<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="generator" content="AsciiDoc 8.6.9">
<title>The Golo Programming Language</title>
<style type="text/css">
/* Shared CSS for AsciiDoc xhtml11 and html5 backends */

/* Default font. */
body {
  font-family: Georgia,serif;
}

/* Title font. */
h1, h2, h3, h4, h5, h6,
div.title, caption.title,
thead, p.table.header,
#toctitle,
#author, #revnumber, #revdate, #revremark,
#footer {
  font-family: Arial,Helvetica,sans-serif;
}

body {
  margin: 1em 5% 1em 5%;
}

a {
  color: blue;
  text-decoration: underline;
}
a:visited {
  color: fuchsia;
}

em {
  font-style: italic;
  color: navy;
}

strong {
  font-weight: bold;
  color: #083194;
}

h1, h2, h3, h4, h5, h6 {
  color: #527bbd;
  margin-top: 1.2em;
  margin-bottom: 0.5em;
  line-height: 1.3;
}

h1, h2, h3 {
  border-bottom: 2px solid silver;
}
h2 {
  padding-top: 0.5em;
}
h3 {
  float: left;
}
h3 + * {
  clear: left;
}
h5 {
  font-size: 1.0em;
}

div.sectionbody {
  margin-left: 0;
}

hr {
  border: 1px solid silver;
}

p {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

ul, ol, li > p {
  margin-top: 0;
}
ul > li     { color: #aaa; }
ul > li > * { color: black; }

pre {
  padding: 0;
  margin: 0;
}

#author {
  color: #527bbd;
  font-weight: bold;
  font-size: 1.1em;
}
#email {
}
#revnumber, #revdate, #revremark {
}

#footer {
  font-size: small;
  border-top: 2px solid silver;
  padding-top: 0.5em;
  margin-top: 4.0em;
}
#footer-text {
  float: left;
  padding-bottom: 0.5em;
}
#footer-badges {
  float: right;
  padding-bottom: 0.5em;
}

#preamble {
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}
div.imageblock, div.exampleblock, div.verseblock,
div.quoteblock, div.literalblock, div.listingblock, div.sidebarblock,
div.admonitionblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.admonitionblock {
  margin-top: 2.0em;
  margin-bottom: 2.0em;
  margin-right: 10%;
  color: #606060;
}

div.content { /* Block element content. */
  padding: 0;
}

/* Block element titles. */
div.title, caption.title {
  color: #527bbd;
  font-weight: bold;
  text-align: left;
  margin-top: 1.0em;
  margin-bottom: 0.5em;
}
div.title + * {
  margin-top: 0;
}

td div.title:first-child {
  margin-top: 0.0em;
}
div.content div.title:first-child {
  margin-top: 0.0em;
}
div.content + div.title {
  margin-top: 0.0em;
}

div.sidebarblock > div.content {
  background: #ffffee;
  border: 1px solid #dddddd;
  border-left: 4px solid #f0f0f0;
  padding: 0.5em;
}

div.listingblock > div.content {
  border: 1px solid #dddddd;
  border-left: 5px solid #f0f0f0;
  background: #f8f8f8;
  padding: 0.5em;
}

div.quoteblock, div.verseblock {
  padding-left: 1.0em;
  margin-left: 1.0em;
  margin-right: 10%;
  border-left: 5px solid #f0f0f0;
  color: #777777;
}

div.quoteblock > div.attribution {
  padding-top: 0.5em;
  text-align: right;
}

div.verseblock > pre.content {
  font-family: inherit;
  font-size: inherit;
}
div.verseblock > div.attribution {
  padding-top: 0.75em;
  text-align: left;
}
/* DEPRECATED: Pre version 8.2.7 verse style literal block. */
div.verseblock + div.attribution {
  text-align: left;
}

div.admonitionblock .icon {
  vertical-align: top;
  font-size: 1.1em;
  font-weight: bold;
  text-decoration: underline;
  color: #527bbd;
  padding-right: 0.5em;
}
div.admonitionblock td.content {
  padding-left: 0.5em;
  border-left: 3px solid #dddddd;
}

div.exampleblock > div.content {
  border-left: 3px solid #dddddd;
  padding-left: 0.5em;
}

div.imageblock div.content { padding-left: 0; }
span.image img { border-style: none; }
a.image:visited { color: white; }

dl {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
dt {
  margin-top: 0.5em;
  margin-bottom: 0;
  font-style: normal;
  color: navy;
}
dd > *:first-child {
  margin-top: 0.1em;
}

ul, ol {
    list-style-position: outside;
}
ol.arabic {
  list-style-type: decimal;
}
ol.loweralpha {
  list-style-type: lower-alpha;
}
ol.upperalpha {
  list-style-type: upper-alpha;
}
ol.lowerroman {
  list-style-type: lower-roman;
}
ol.upperroman {
  list-style-type: upper-roman;
}

div.compact ul, div.compact ol,
div.compact p, div.compact p,
div.compact div, div.compact div {
  margin-top: 0.1em;
  margin-bottom: 0.1em;
}

tfoot {
  font-weight: bold;
}
td > div.verse {
  white-space: pre;
}

div.hdlist {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
div.hdlist tr {
  padding-bottom: 15px;
}
dt.hdlist1.strong, td.hdlist1.strong {
  font-weight: bold;
}
td.hdlist1 {
  vertical-align: top;
  font-style: normal;
  padding-right: 0.8em;
  color: navy;
}
td.hdlist2 {
  vertical-align: top;
}
div.hdlist.compact tr {
  margin: 0;
  padding-bottom: 0;
}

.comment {
  background: yellow;
}

.footnote, .footnoteref {
  font-size: 0.8em;
}

span.footnote, span.footnoteref {
  vertical-align: super;
}

#footnotes {
  margin: 20px 0 20px 0;
  padding: 7px 0 0 0;
}

#footnotes div.footnote {
  margin: 0 0 5px 0;
}

#footnotes hr {
  border: none;
  border-top: 1px solid silver;
  height: 1px;
  text-align: left;
  margin-left: 0;
  width: 20%;
  min-width: 100px;
}

div.colist td {
  padding-right: 0.5em;
  padding-bottom: 0.3em;
  vertical-align: top;
}
div.colist td img {
  margin-top: 0.3em;
}

@media print {
  #footer-badges { display: none; }
}

#toc {
  margin-bottom: 2.5em;
}

#toctitle {
  color: #527bbd;
  font-size: 1.1em;
  font-weight: bold;
  margin-top: 1.0em;
  margin-bottom: 0.1em;
}

div.toclevel1, div.toclevel2, div.toclevel3, div.toclevel4 {
  margin-top: 0;
  margin-bottom: 0;
}
div.toclevel2 {
  margin-left: 2em;
  font-size: 0.9em;
}
div.toclevel3 {
  margin-left: 4em;
  font-size: 0.9em;
}
div.toclevel4 {
  margin-left: 6em;
  font-size: 0.9em;
}

span.aqua { color: aqua; }
span.black { color: black; }
span.blue { color: blue; }
span.fuchsia { color: fuchsia; }
span.gray { color: gray; }
span.green { color: green; }
span.lime { color: lime; }
span.maroon { color: maroon; }
span.navy { color: navy; }
span.olive { color: olive; }
span.purple { color: purple; }
span.red { color: red; }
span.silver { color: silver; }
span.teal { color: teal; }
span.white { color: white; }
span.yellow { color: yellow; }

span.aqua-background { background: aqua; }
span.black-background { background: black; }
span.blue-background { background: blue; }
span.fuchsia-background { background: fuchsia; }
span.gray-background { background: gray; }
span.green-background { background: green; }
span.lime-background { background: lime; }
span.maroon-background { background: maroon; }
span.navy-background { background: navy; }
span.olive-background { background: olive; }
span.purple-background { background: purple; }
span.red-background { background: red; }
span.silver-background { background: silver; }
span.teal-background { background: teal; }
span.white-background { background: white; }
span.yellow-background { background: yellow; }

span.big { font-size: 2em; }
span.small { font-size: 0.6em; }

span.underline { text-decoration: underline; }
span.overline { text-decoration: overline; }
span.line-through { text-decoration: line-through; }


/*
 * xhtml11 specific
 *
 * */

tt {
  font-family: monospace;
  font-size: inherit;
  color: navy;
}

div.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.tableblock > table {
  border: 3px solid #527bbd;
}
thead, p.table.header {
  font-weight: bold;
  color: #527bbd;
}
p.table {
  margin-top: 0;
}
/* Because the table frame attribute is overriden by CSS in most browsers. */
div.tableblock > table[frame="void"] {
  border-style: none;
}
div.tableblock > table[frame="hsides"] {
  border-left-style: none;
  border-right-style: none;
}
div.tableblock > table[frame="vsides"] {
  border-top-style: none;
  border-bottom-style: none;
}


/*
 * html5 specific
 *
 * */

.monospaced {
  font-family: monospace;
  font-size: inherit;
  color: navy;
}

table.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
thead, p.tableblock.header {
  font-weight: bold;
  color: #527bbd;
}
p.tableblock {
  margin-top: 0;
}
table.tableblock {
  border-width: 3px;
  border-spacing: 0px;
  border-style: solid;
  border-color: #527bbd;
  border-collapse: collapse;
}
th.tableblock, td.tableblock {
  border-width: 1px;
  padding: 4px;
  border-style: solid;
  border-color: #527bbd;
}

table.tableblock.frame-topbot {
  border-left-style: hidden;
  border-right-style: hidden;
}
table.tableblock.frame-sides {
  border-top-style: hidden;
  border-bottom-style: hidden;
}
table.tableblock.frame-none {
  border-style: hidden;
}

th.tableblock.halign-left, td.tableblock.halign-left {
  text-align: left;
}
th.tableblock.halign-center, td.tableblock.halign-center {
  text-align: center;
}
th.tableblock.halign-right, td.tableblock.halign-right {
  text-align: right;
}

th.tableblock.valign-top, td.tableblock.valign-top {
  vertical-align: top;
}
th.tableblock.valign-middle, td.tableblock.valign-middle {
  vertical-align: middle;
}
th.tableblock.valign-bottom, td.tableblock.valign-bottom {
  vertical-align: bottom;
}


/*
 * manpage specific
 *
 * */

body.manpage h1 {
  padding-top: 0.5em;
  padding-bottom: 0.5em;
  border-top: 2px solid silver;
  border-bottom: 2px solid silver;
}
body.manpage h2 {
  border-style: none;
}
body.manpage div.sectionbody {
  margin-left: 3em;
}

@media print {
  body.manpage div#toc { display: none; }
}


/*
 * Theme specific overrides of the preceding (asciidoc.css) CSS.
 *
 */
body {
  font-family: Garamond, Georgia, serif;
  font-size: 17px;
  color: #3E4349;
  line-height: 1.3em;
}
h1, h2, h3, h4, h5, h6,
div.title, caption.title,
thead, p.table.header,
#toctitle,
#author, #revnumber, #revdate, #revremark,
#footer {
  font-family: Garmond, Georgia, serif;
  font-weight: normal;
  border-bottom-width: 0;
  color: #3E4349;
}
div.title, caption.title { color: #596673; font-weight: bold; }
h1 { font-size: 240%; }
h2 { font-size: 180%; }
h3 { font-size: 150%; }
h4 { font-size: 130%; }
h5 { font-size: 115%; }
h6 { font-size: 100%; }
#header h1 { margin-top: 0; }
#toc {
  color: #444444;
  line-height: 1.5;
  padding-top: 1.5em;
}
#toctitle {
  font-size: 20px;
}
#toc a {
    border-bottom: 1px dotted #999999;
    color: #444444 !important;
    text-decoration: none !important;
}
#toc a:hover {
    border-bottom: 1px solid #6D4100;
    color: #6D4100 !important;
    text-decoration: none !important;
}
div.toclevel1 { margin-top: 0.2em; font-size: 16px; }
div.toclevel2 { margin-top: 0.15em; font-size: 14px; }
em, dt, td.hdlist1 { color: black; }
strong { color: #3E4349; }
a { color: #004B6B; text-decoration: none; border-bottom: 1px dotted #004B6B; }
a:visited { color: #615FA0; border-bottom: 1px dotted #615FA0; }
a:hover { color: #6D4100; border-bottom: 1px solid #6D4100; }
div.tableblock > table, table.tableblock { border: 3px solid #E8E8E8; }
th.tableblock, td.tableblock { border: 1px solid #E8E8E8; }
ul > li > * { color: #3E4349; }
pre, tt, .monospaced { font-family: Consolas,Menlo,'Deja Vu Sans Mono','Bitstream Vera Sans Mono',monospace; }
tt, .monospaced { font-size: 0.9em; color: black;
}
div.exampleblock > div.content, div.sidebarblock > div.content, div.listingblock > div.content { border-width: 0 0 0 3px; border-color: #E8E8E8; }
div.verseblock { border-left-width: 0; margin-left: 3em; }
div.quoteblock { border-left-width: 3px; margin-left: 0; margin-right: 0;}
div.admonitionblock td.content { border-left: 3px solid #E8E8E8; }
.highlight .hll { background-color: #ffffcc }
.highlight  { background: #f8f8f8; }
.highlight .c { color: #408080; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #FF0000 } /* Error */
.highlight .k { color: #008000; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .cm { color: #408080; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #BC7A00 } /* Comment.Preproc */
.highlight .c1 { color: #408080; font-style: italic } /* Comment.Single */
.highlight .cs { color: #408080; font-style: italic } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .gr { color: #FF0000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #00A000 } /* Generic.Inserted */
.highlight .go { color: #808080 } /* Generic.Output */
.highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0040D0 } /* Generic.Traceback */
.highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008000 } /* Keyword.Pseudo */
.highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #B00040 } /* Keyword.Type */
.highlight .m { color: #666666 } /* Literal.Number */
.highlight .s { color: #BA2121 } /* Literal.String */
.highlight .na { color: #7D9029 } /* Name.Attribute */
.highlight .nb { color: #008000 } /* Name.Builtin */
.highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.highlight .no { color: #880000 } /* Name.Constant */
.highlight .nd { color: #AA22FF } /* Name.Decorator */
.highlight .ni { color: #999999; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #D2413A; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0000FF } /* Name.Function */
.highlight .nl { color: #A0A000 } /* Name.Label */
.highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #19177C } /* Name.Variable */
.highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mf { color: #666666 } /* Literal.Number.Float */
.highlight .mh { color: #666666 } /* Literal.Number.Hex */
.highlight .mi { color: #666666 } /* Literal.Number.Integer */
.highlight .mo { color: #666666 } /* Literal.Number.Oct */
.highlight .sb { color: #BA2121 } /* Literal.String.Backtick */
.highlight .sc { color: #BA2121 } /* Literal.String.Char */
.highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #BA2121 } /* Literal.String.Double */
.highlight .se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */
.highlight .si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
.highlight .sx { color: #008000 } /* Literal.String.Other */
.highlight .sr { color: #BB6688 } /* Literal.String.Regex */
.highlight .s1 { color: #BA2121 } /* Literal.String.Single */
.highlight .ss { color: #19177C } /* Literal.String.Symbol */
.highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
.highlight .vc { color: #19177C } /* Name.Variable.Class */
.highlight .vg { color: #19177C } /* Name.Variable.Global */
.highlight .vi { color: #19177C } /* Name.Variable.Instance */
.highlight .il { color: #666666 } /* Literal.Number.Integer.Long */


@media screen {
  body {
    max-width: 50em; /* approximately 80 characters wide */
    margin-left: 16em;
  }

  #toc {
    position: fixed;
    top: 0;
    left: 0;
    bottom: 0;
    width: 13em;
    padding: 0.5em;
    padding-bottom: 1.5em;
    margin: 0;
    overflow: auto;
    border-right: 3px solid #f8f8f8;
    background-color: white;
  }

  #toc .toclevel1 {
    margin-top: 0.5em;
  }

  #toc .toclevel2 {
    margin-top: 0.25em;
    display: list-item;
    color: #aaaaaa;
  }

  #toctitle {
    margin-top: 0.5em;
  }
}
</style>
<script type="text/javascript">
/*<![CDATA[*/
var asciidoc = {  // Namespace.

/////////////////////////////////////////////////////////////////////
// Table Of Contents generator
/////////////////////////////////////////////////////////////////////

/* Author: Mihai Bazon, September 2002
 * http://students.infoiasi.ro/~mishoo
 *
 * Table Of Content generator
 * Version: 0.4
 *
 * Feel free to use this script under the terms of the GNU General Public
 * License, as long as you do not remove or alter this notice.
 */

 /* modified by Troy D. Hanson, September 2006. License: GPL */
 /* modified by Stuart Rackham, 2006, 2009. License: GPL */

// toclevels = 1..4.
toc: function (toclevels) {

  function getText(el) {
    var text = "";
    for (var i = el.firstChild; i != null; i = i.nextSibling) {
      if (i.nodeType == 3 /* Node.TEXT_NODE */) // IE doesn't speak constants.
        text += i.data;
      else if (i.firstChild != null)
        text += getText(i);
    }
    return text;
  }

  function TocEntry(el, text, toclevel) {
    this.element = el;
    this.text = text;
    this.toclevel = toclevel;
  }

  function tocEntries(el, toclevels) {
    var result = new Array;
    var re = new RegExp('[hH]([1-'+(toclevels+1)+'])');
    // Function that scans the DOM tree for header elements (the DOM2
    // nodeIterator API would be a better technique but not supported by all
    // browsers).
    var iterate = function (el) {
      for (var i = el.firstChild; i != null; i = i.nextSibling) {
        if (i.nodeType == 1 /* Node.ELEMENT_NODE */) {
          var mo = re.exec(i.tagName);
          if (mo && (i.getAttribute("class") || i.getAttribute("className")) != "float") {
            result[result.length] = new TocEntry(i, getText(i), mo[1]-1);
          }
          iterate(i);
        }
      }
    }
    iterate(el);
    return result;
  }

  var toc = document.getElementById("toc");
  if (!toc) {
    return;
  }

  // Delete existing TOC entries in case we're reloading the TOC.
  var tocEntriesToRemove = [];
  var i;
  for (i = 0; i < toc.childNodes.length; i++) {
    var entry = toc.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div'
     && entry.getAttribute("class")
     && entry.getAttribute("class").match(/^toclevel/))
      tocEntriesToRemove.push(entry);
  }
  for (i = 0; i < tocEntriesToRemove.length; i++) {
    toc.removeChild(tocEntriesToRemove[i]);
  }

  // Rebuild TOC entries.
  var entries = tocEntries(document.getElementById("content"), toclevels);
  for (var i = 0; i < entries.length; ++i) {
    var entry = entries[i];
    if (entry.element.id == "")
      entry.element.id = "_toc_" + i;
    var a = document.createElement("a");
    a.href = "#" + entry.element.id;
    a.appendChild(document.createTextNode(entry.text));
    var div = document.createElement("div");
    div.appendChild(a);
    div.className = "toclevel" + entry.toclevel;
    toc.appendChild(div);
  }
  if (entries.length == 0)
    toc.parentNode.removeChild(toc);
},


/////////////////////////////////////////////////////////////////////
// Footnotes generator
/////////////////////////////////////////////////////////////////////

/* Based on footnote generation code from:
 * http://www.brandspankingnew.net/archive/2005/07/format_footnote.html
 */

footnotes: function () {
  // Delete existing footnote entries in case we're reloading the footnodes.
  var i;
  var noteholder = document.getElementById("footnotes");
  if (!noteholder) {
    return;
  }
  var entriesToRemove = [];
  for (i = 0; i < noteholder.childNodes.length; i++) {
    var entry = noteholder.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div' && entry.getAttribute("class") == "footnote")
      entriesToRemove.push(entry);
  }
  for (i = 0; i < entriesToRemove.length; i++) {
    noteholder.removeChild(entriesToRemove[i]);
  }

  // Rebuild footnote entries.
  var cont = document.getElementById("content");
  var spans = cont.getElementsByTagName("span");
  var refs = {};
  var n = 0;
  for (i=0; i<spans.length; i++) {
    if (spans[i].className == "footnote") {
      n++;
      var note = spans[i].getAttribute("data-note");
      if (!note) {
        // Use [\s\S] in place of . so multi-line matches work.
        // Because JavaScript has no s (dotall) regex flag.
        note = spans[i].innerHTML.match(/\s*\[([\s\S]*)]\s*/)[1];
        spans[i].innerHTML =
          "[<a id='_footnoteref_" + n + "' href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
        spans[i].setAttribute("data-note", note);
      }
      noteholder.innerHTML +=
        "<div class='footnote' id='_footnote_" + n + "'>" +
        "<a href='#_footnoteref_" + n + "' title='Return to text'>" +
        n + "</a>. " + note + "</div>";
      var id =spans[i].getAttribute("id");
      if (id != null) refs["#"+id] = n;
    }
  }
  if (n == 0)
    noteholder.parentNode.removeChild(noteholder);
  else {
    // Process footnoterefs.
    for (i=0; i<spans.length; i++) {
      if (spans[i].className == "footnoteref") {
        var href = spans[i].getElementsByTagName("a")[0].getAttribute("href");
        href = href.match(/#.*/)[0];  // Because IE return full URL.
        n = refs[href];
        spans[i].innerHTML =
          "[<a href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
      }
    }
  }
},

install: function(toclevels) {
  var timerId;

  function reinstall() {
    asciidoc.footnotes();
    if (toclevels) {
      asciidoc.toc(toclevels);
    }
  }

  function reinstallAndRemoveTimer() {
    clearInterval(timerId);
    reinstall();
  }

  timerId = setInterval(reinstall, 500);
  if (document.addEventListener)
    document.addEventListener("DOMContentLoaded", reinstallAndRemoveTimer, false);
  else
    window.onload = reinstallAndRemoveTimer;
}

}
asciidoc.install(2);
/*]]>*/
</script>
</head>
<body class="book">
<div id="header">
<h1>The Golo Programming Language</h1>
<span id="author">Julien Ponge</span><br>
<span id="email" class="monospaced">&lt;<a href="mailto:julien.ponge@insa-lyon.fr">julien.ponge@insa-lyon.fr</a>&gt;</span><br>
<div id="toc">
  <div id="toctitle">Table of Contents</div>
  <noscript><p><b>JavaScript must be enabled in your browser to display the table of contents.</b></p></noscript>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph"><p>This is the documentation for the Golo programming language.</p></div>
<div class="listingblock">
<div class="title">Copyright and License Notice</div>
<div class="content monospaced">
<pre>Copyright 2012-2014 Institut National des Sciences Appliquées de Lyon (INSA-Lyon)

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.</pre>
</div></div>
</div>
</div>
<div class="sect1">
<h2 id="_basics">Basics</h2>
<div class="sectionbody">
<div class="paragraph"><p>Let us start with the Golo basics.</p></div>
<div class="sect2">
<h3 id="_editor_ide_support">Editor / IDE support</h3>
<div class="paragraph"><p>Editor and IDE support for Golo is available for:</p></div>
<div class="ulist"><ul>
<li>
<p>
<a href="https://github.com/jponge/vim-golo">Vim</a>
</p>
</li>
<li>
<p>
<a href="https://github.com/k33g/sublime-golo">Sublime Text 2 &amp; 3</a>
</p>
</li>
<li>
<p>
<a href="https://github.com/k33g/golo-storm">IntelliJ IDEA (syntax highthing)</a>
</p>
</li>
<li>
<p>
<a href="https://github.com/golo-lang/gldt">Eclipse</a> (contributed by Jeff Maury)
</p>
</li>
<li>
<p>
<a href="https://github.com/golo-lang/golo-netbeans">Netbeans</a> (contributed by <a href="http://www.serli.com/">Serli</a>)
</p>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="_hello_world">Hello world</h3>
<div class="paragraph"><p>Golo source code need to be placed in <em>modules</em>. Module names are
separated with dots, as in:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="n">Foo</span>
<span class="nn">foo.Bar</span>
<span class="nn">foo.bar.Baz</span>
<span class="p">(</span><span class="o">...</span><span class="p">)</span>
</pre></div></div></div>
<div class="paragraph"><p>It is suggested yet not enforced that the first elements in a module
name are in lowercase, and that the last one have an uppercase first
letter.</p></div>
<div class="paragraph"><p>A Golo module can be executable if it has a <em>function</em> named <span class="monospaced">main</span> and
that takes an argument for the JVM program arguments:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kn">module</span> <span class="nn">hello.World</span>

<span class="kd">function</span> <span class="nf">main</span> <span class="o">=</span> <span class="p">|</span><span class="n">args</span><span class="p">|</span> <span class="p">{</span>
  <span class="nb">println</span><span class="p">(</span><span class="s">&quot;Hello world!</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="p">}</span>
</pre></div></div></div>
<div class="paragraph"><p><span class="monospaced">println</span> is a predefined function that outputs a value to the standard
console. As you can easily guess, here we output <span class="monospaced">Hello, world!</span> and
that is an awesome achievement.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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">
</td>
<td class="content">Newlines are important in Golo, so make sure that your editor ends files with a newline.</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="_running_em_hello_world_em">Running <em>"Hello world"</em></h3>
<div class="paragraph"><p>Of course, we need to run this incredibly complex application.</p></div>
<div class="paragraph"><p>Golo comes with a <span class="monospaced">golo</span> script found in the distribution <span class="monospaced">bin/</span> folder. It provides several
commands, notably:</p></div>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">version</span> to query the Golo version, and
</p>
</li>
<li>
<p>
<span class="monospaced">compile</span> to compile some Golo code to JVM classes, and
</p>
</li>
<li>
<p>
<span class="monospaced">run</span> to execute some already compiled Golo code, and
</p>
</li>
<li>
<p>
<span class="monospaced">golo</span> to directly execute Golo code from source files, and
</p>
</li>
<li>
<p>
<span class="monospaced">diagnose</span> to print compiler internal diagnosis information, and
</p>
</li>
<li>
<p>
<span class="monospaced">doc</span> to generate module(s) documentation, and
</p>
</li>
<li>
<p>
<span class="monospaced">new</span> to generate new project(s).
</p>
</li>
</ul></div>
<div class="paragraph"><p>The complete commands usage instructions can be listed by running <span class="monospaced">golo --help</span>.
A command usage instructions can be listed by running <span class="monospaced">golo --usage ${command}</span>.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Important" src="data:image/png;base64,
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
EQn3XQAAAABJRU5ErkJggg==">
</td>
<td class="content">The <span class="monospaced">golo</span> script comes with JVM tuning settings that may not be appropriate to your
environment. We also provide a <span class="monospaced">vanilla-golo</span> script with no tuning. You may use the <span class="monospaced">$JAVA_OPTS</span>
environment variable to provide custom JVM tuning to <span class="monospaced">vanilla-golo</span>.</td>
</tr></table>
</div>
<div class="paragraph"><p>Provided that <span class="monospaced">golo</span> is available from your current <span class="monospaced">$PATH</span>, you may run the program above as
follows:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="gp">$</span> golo golo --files samples/helloworld.golo
<span class="go">Hello world!</span>
<span class="gp">$</span> golo golo --files samples/ --module hello.World
<span class="go">Hello world!</span>
<span class="gp">$</span>
</pre></div></div></div>
<div class="paragraph"><p><span class="monospaced">golo golo</span> takes several Golo source files (*.golo and directories) as input.
It expects the last one to have a <span class="monospaced">main</span> function to call (or use
<span class="monospaced">--module</span> to define the golo module with the <span class="monospaced">main</span> function).
The Golo code is compiled on the fly and executed straight into a JVM.</p></div>
<div class="paragraph"><p>You may also pass arguments to the <span class="monospaced">main</span> function by appending <span class="monospaced">--args</span>
on the command line invocation. Suppose that we have a module <span class="monospaced">EchoArgs</span>
as follows:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kn">module</span> <span class="nn">EchoArgs</span>

<span class="kd">function</span> <span class="nf">main</span> <span class="o">=</span> <span class="p">|</span><span class="n">args</span><span class="p">|</span> <span class="p">{</span>
  <span class="k">foreach</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">args</span> <span class="p">{</span>
    <span class="nb">println</span><span class="p">(</span><span class="s">&quot;-&gt;  </span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">arg</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div></div></div>
<div class="paragraph"><p>We may invoke it as follows:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="gp">$</span> golo golo --files samples/echo-args.golo --args plop da plop
<span class="go">-&gt; plop</span>
<span class="go">-&gt; da</span>
<span class="go">-&gt; plop</span>
<span class="gp">$</span>
</pre></div></div></div>
<div class="paragraph"><p>Note that <span class="monospaced">args</span> is expected to be an array.</p></div>
<div class="paragraph"><p>Finally, the <span class="monospaced">--classpath</span> flag allows to specify a list of classpath elements, which can be either
directories or <span class="monospaced">.jar</span> files. See the <span class="monospaced">golo help</span> command for details on the various Golo commands.</p></div>
</div>
<div class="sect2">
<h3 id="_compiling_golo_source_code">Compiling Golo source code</h3>
<div class="paragraph"><p>Golo comes with a compiler that generates JVM bytecode in <span class="monospaced">.class</span> files. We will give more details
in the chapter on interoperability with Java.</p></div>
<div class="paragraph"><p>Compiling Golo files is straightforward:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="gp">$</span> golo compile --output classes samples/helloworld.golo
<span class="gp">$</span>
</pre></div></div></div>
<div class="paragraph"><p>This compiles the code found in <span class="monospaced">samples/helloworld.golo</span> and outputs
the generated classes to a <span class="monospaced">classes</span> folder (it will be created if
needed):</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="gp">$</span> tree classes/
<span class="go">classes/</span>
<span class="go">└── hello</span>
<span class="go">    └── World.class</span>

<span class="go">1 directory, 1 file</span>
<span class="gp">$</span>
</pre></div></div></div>
</div>
<div class="sect2">
<h3 id="_running_compiled_golo_code">Running compiled Golo code</h3>
<div class="paragraph"><p>Golo provides a <span class="monospaced">golo</span> command for running compiled Golo code:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="gp">$</span> <span class="nb">cd </span>classes
<span class="gp">$</span> golo run --module hello.World
<span class="go">Hello world!</span>
<span class="gp">$</span>
</pre></div></div></div>
<div class="paragraph"><p>Simple, isn&#8217;t it?</p></div>
</div>
<div class="sect2">
<h3 id="_passing_jvm_specific_flags">Passing JVM-specific flags</h3>
<div class="paragraph"><p>Both <span class="monospaced">golo</span> and <span class="monospaced">run</span> commands can be given JVM-specific flags using the <span class="monospaced">JAVA_OPTS</span> environment
variable.</p></div>
<div class="paragraph"><p>As an example, the following runs <span class="monospaced">fibonacci.golo</span> and prints JIT compilation along the way:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="gp">#</span> Exporting an environment variable
<span class="gp">$</span> <span class="nb">export </span><span class="nv">JAVA_OPTS</span><span class="o">=</span>-XX:+PrintCompilation
<span class="gp">$</span> golo golo --files samples/fibonacci.golo

<span class="gp">#</span> ...or you may use this one-liner
<span class="gp">$</span> <span class="nv">JAVA_OPTS</span><span class="o">=</span>-XX:+PrintCompilation golo golo --files samples/fibonacci.golo
</pre></div></div></div>
</div>
<div class="sect2">
<h3 id="_bash_autocompletion">Bash autocompletion</h3>
<div class="paragraph"><p>A bash script can be found in <span class="monospaced">share/shell-completion/</span> called <span class="monospaced">golo-bash-completion</span> that will provide autocomplete support for the <span class="monospaced">golo</span> and <span class="monospaced">vanilla-golo</span> CLI scripts. You may either <span class="monospaced">source</span> the script, or drop the script into your <span class="monospaced">bash_completion.d/</span> folder and restart your terminal.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Tip" src="data:image/png;base64,
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">
</td>
<td class="content">Not sure where your <span class="monospaced">bash_completion.d/</span> folder is? Try <span class="monospaced">/etc/bash_completion.d/</span> on Linux or <span class="monospaced">/usr/local/etc/bash_completion.d/</span> for Mac Homebrew users.</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="_zsh_autocompletion">Zsh autocompletion</h3>
<div class="paragraph"><p>A zsh script can be found in <span class="monospaced">share/shell-completion/</span> called <span class="monospaced">golo-zsh-completion</span> that works using the <span class="monospaced">golo-bash-completion</span> to provide autocomplete support using the bash autocomplete support provided by zsh. Place both files into the same directory and <span class="monospaced">source golo-zsh-completion</span> from your terminal or <span class="monospaced">.zshrc</span> to give it a try!</p></div>
</div>
<div class="sect2">
<h3 id="_comments">Comments</h3>
<div class="paragraph"><p>Golo comments start with a <span class="monospaced">#</span>, just like in Bash, Python or Ruby:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="c"># This is a comment</span>
<span class="nb">println</span><span class="p">(</span><span class="s">&quot;WTF?</span><span class="s2">&quot;</span><span class="p">)</span> <span class="c"># it works here, too</span>
</pre></div></div></div>
</div>
<div class="sect2">
<h3 id="_variable_and_constant_references">Variable and constant references</h3>
<div class="paragraph"><p>Golo does not check for types at compile time, and they are not declared. Everything happens at
runtime in Golo.</p></div>
<div class="paragraph"><p>Variables are declared using the <span class="monospaced">var</span> keyword, while constant references are declared with <span class="monospaced">let</span>.
It is strongly advised that you favour <span class="monospaced">let</span> over <span class="monospaced">var</span> unless you are certain that you need
mutability.</p></div>
<div class="paragraph"><p>Variables and constants need to be initialized when declared. Failing to do so results in a
compilation error.</p></div>
<div class="paragraph"><p>Here are a few examples:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="c"># Ok</span>
<span class="kd">var</span> <span class="nv">i</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>

<span class="c"># The assignment fails because truth is a constant</span>
<span class="kd">let</span> <span class="nv">truth</span> <span class="o">=</span> <span class="mi">42</span>
<span class="n">truth</span> <span class="o">=</span> <span class="mi">666</span>

<span class="c"># Invalid statement, variables / constants have to be initialized</span>
<span class="kd">var</span> <span class="nv">foo</span>
</pre></div></div></div>
<div class="paragraph"><p>Valid names contain upper and lower case letters within the <span class="monospaced">[a..z]</span> range, underscores (<span class="monospaced">_</span>),
dollar symbols (<span class="monospaced">$</span>) and numbers. In any case, an identifier must not start with a number.</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="c"># Ok, but not necessarily great for humans...</span>
<span class="kd">let</span> <span class="nv">_$_f_o_$$666</span> <span class="o">=</span> <span class="mi">666</span>

<span class="c"># Wrong!</span>
<span class="kd">let</span> <span class="err">666</span><span class="nv">_club</span> <span class="o">=</span> <span class="mi">666</span>
</pre></div></div></div>
</div>
<div class="sect2">
<h3 id="_data_literals">Data literals</h3>
<div class="paragraph"><p>Golo supports a set of data literals. They directly map to their counterparts from the Java Standard
API. We give them along with examples in <a href="#data-literals">the data literals table</a> below.</p></div>
<table class="tableblock frame-all grid-all" id="data-literals"
style="
width:100%;
">
<col style="width:50%;">
<col style="width:50%;">
<thead>
<tr>
<th class="tableblock halign-left valign-top" >Java type </th>
<th class="tableblock halign-left valign-top" > Golo literals</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><span class="monospaced">null</span></p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><span class="monospaced">null</span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><span class="monospaced">java.lang.Boolean</span></p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><span class="monospaced">true</span> or <span class="monospaced">false</span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><span class="monospaced">java.lang.String</span></p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><span class="monospaced">"hello world"</span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><span class="monospaced">java.lang.Character</span></p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><span class="monospaced">'a'</span>, <span class="monospaced">'b'</span>, &#8230;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><span class="monospaced">java.lang.Integer</span></p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><span class="monospaced">123</span>, <span class="monospaced">-123</span>, <span class="monospaced">1_234</span>, &#8230;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><span class="monospaced">java.lang.Long</span></p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><span class="monospaced">123_L</span>, <span class="monospaced">-123_L</span>, <span class="monospaced">1_234_L</span>, &#8230;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><span class="monospaced">java.lang.Double</span></p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><span class="monospaced">1.234</span>, <span class="monospaced">-1.234</span>, <span class="monospaced">1.234e9</span>, &#8230;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><span class="monospaced">java.lang.Float</span></p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><span class="monospaced">1.234_F</span>, <span class="monospaced">-1.234_F</span>, <span class="monospaced">1.234e9_F</span>, &#8230;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><span class="monospaced">java.lang.Class</span></p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><span class="monospaced">String.class</span>, <span class="monospaced">java.lang.String.class</span>, <span class="monospaced">gololang.Predef.module</span>, &#8230;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><span class="monospaced">java.lang.invoke.MethodHandle</span></p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><span class="monospaced">^foo</span>, <span class="monospaced">^some.module::foo</span>, &#8230;</p></td>
</tr>
</tbody>
</table>
<div class="paragraph"><p>Speaking of strings, Golo also supports multi-line strings using the <span class="monospaced">"""</span> delimiters, as in:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">let</span> <span class="nv">text</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;This is</span>
<span class="s">a multi-line string.</span>
<span class="s">  How</span>
<span class="s">    cool</span>
<span class="s">      is</span>
<span class="s">        that?&quot;&quot;&quot;</span>

<span class="nb">println</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
</pre></div></div></div>
<div class="paragraph"><p>This snippet would print the following to the standard console output:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>This is
a multi-line string.
  How
    cool
      is
        that?</pre>
</div></div>
</div>
<div class="sect2">
<h3 id="_collection_literals">Collection literals</h3>
<div class="paragraph"><p>Golo support special support for common collections. The syntax uses brackets prefixed by a
collection name, as in:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">let</span> <span class="nv">s</span> <span class="o">=</span> <span class="nb">set</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s">&quot;a</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s">&quot;b</span><span class="s2">&quot;</span><span class="p">]</span>
<span class="kd">let</span> <span class="nv">v</span> <span class="o">=</span> <span class="nb">vector</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="kd">let</span> <span class="nv">m</span> <span class="o">=</span> <span class="nb">map</span><span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="s">&quot;a</span><span class="s2">&quot;</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="s">&quot;b</span><span class="s2">&quot;</span><span class="p">]]</span>
<span class="c"># (...)</span>
</pre></div></div></div>
<div class="paragraph"><p>The syntax and type matchings are the following:</p></div>
<table class="tableblock frame-all grid-all" id="collection-literals-matching"
style="
width:100%;
">
<col style="width:33%;">
<col style="width:33%;">
<col style="width:33%;">
<thead>
<tr>
<th class="tableblock halign-left valign-top" >Collection </th>
<th class="tableblock halign-left valign-top" >Java type </th>
<th class="tableblock halign-left valign-top" >Syntax</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Tuple</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><span class="monospaced">gololang.Tuple</span></p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><span class="monospaced">tuple[1, 2, 3]</span>, or simply <span class="monospaced">[1, 2, 3]</span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Array</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><span class="monospaced">java.lang.Object[]</span></p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><span class="monospaced">array[1, 2, 3]</span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">List</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><span class="monospaced">java.util.LinkedList</span></p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><span class="monospaced">list[1, 2, 3]</span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Vector</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><span class="monospaced">java.util.ArrayList</span></p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><span class="monospaced">vector[1, 2, 3]</span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Set</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><span class="monospaced">java.util.LinkedHashSet</span></p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><span class="monospaced">set[1, 2, 3]</span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Map</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><span class="monospaced">java.util.LinkedHashMap</span></p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><span class="monospaced">map[[1, "a"], [2, "b"]]</span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Range</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><span class="monospaced">gololang.Range</span></p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><span class="monospaced">[1..10]</span>, <span class="monospaced">['a'..'f']</span></p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="_a_note_on_tuples">A note on tuples</h4>
<div class="paragraph"><p>Tuples essentially behave as immutable arrays.</p></div>
<div class="paragraph"><p>The <span class="monospaced">gololang.Tuple</span> class provides the following methods:</p></div>
<div class="ulist"><ul>
<li>
<p>
a constructor with a variable-arguments list of values,
</p>
</li>
<li>
<p>
a <span class="monospaced">get(index)</span> method to get the element at a specified index,
</p>
</li>
<li>
<p>
<span class="monospaced">size()</span> and <span class="monospaced">isEmpty()</span> methods that do what their names suggest,
</p>
</li>
<li>
<p>
an <span class="monospaced">iterator()</span> method because tuples are iterable, and
</p>
</li>
<li>
<p>
<span class="monospaced">equals(other)</span>, <span class="monospaced">hashCode()</span> and <span class="monospaced">toString()</span> do just what you would expect.
</p>
</li>
</ul></div>
</div>
<div class="sect3">
<h4 id="_a_note_on_maps">A note on maps</h4>
<div class="paragraph"><p>The map collection literal expects entries to be specified as tuples where the first entry is the
key, and the second entry is the value. This allows nested structures to be specified as in:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="nb">map</span><span class="p">[</span>
  <span class="p">[</span><span class="s">&quot;foo</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s">&quot;bar</span><span class="s2">&quot;</span><span class="p">],</span>
  <span class="p">[</span><span class="s">&quot;plop</span><span class="s2">&quot;</span><span class="p">,</span> <span class="nb">set</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]],</span>
  <span class="p">[</span><span class="s">&quot;mrbean</span><span class="s2">&quot;</span><span class="p">,</span> <span class="nb">map</span><span class="p">[</span>
    <span class="p">[</span><span class="s">&quot;name</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s">&quot;Mr Bean</span><span class="s2">&quot;</span><span class="p">],</span>
    <span class="p">[</span><span class="s">&quot;email</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s">&quot;bean@outlook.com</span><span class="s2">&quot;</span><span class="p">]</span>
  <span class="p">]]</span>
<span class="p">]</span>
</pre></div></div></div>
<div class="paragraph"><p>There are a few rules to observe:</p></div>
<div class="ulist"><ul>
<li>
<p>
not providing a series of tuples will yield class cast exceptions,
</p>
</li>
<li>
<p>
tuples must have at least 2 entries or will yield index bound exceptions,
</p>
</li>
<li>
<p>
tuples with more than 2 entries are ok, but only the first 2 entries matter.
</p>
</li>
</ul></div>
<div class="paragraph"><p>Because of that, the following code compiles but raises exceptions at runtime:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">let</span> <span class="nv">m1</span> <span class="o">=</span> <span class="nb">map</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
<span class="kd">let</span> <span class="nv">m2</span> <span class="o">=</span> <span class="nb">map</span><span class="p">[</span>
  <span class="p">[</span><span class="mi">1</span><span class="p">],</span>
  <span class="p">[</span><span class="s">&quot;a</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s">&quot;b</span><span class="s2">&quot;</span><span class="p">]</span>
<span class="p">]</span>
</pre></div></div></div>
<div class="paragraph"><p>The rationale for map literals to be loose is that we let you put any valid Golo expression, like
functions returning valid tuples:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">let</span> <span class="nv">a</span> <span class="o">=</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">]</span>
<span class="kd">let</span> <span class="nv">b</span> <span class="o">=</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">]</span>
<span class="kd">let</span> <span class="nv">m</span> <span class="o">=</span> <span class="nb">map</span><span class="p">[</span><span class="nf">a</span><span class="p">(),</span> <span class="nf">b</span><span class="p">()]</span>
</pre></div></div></div>
</div>
</div>
<div class="sect2">
<h3 id="_operators">Operators</h3>
<div class="paragraph"><p>Golo supports the following <a href="#operators">set of operators</a>.</p></div>
<table class="tableblock frame-all grid-all" id="operators"
style="
width:100%;
">
<col style="width:33%;">
<col style="width:33%;">
<col style="width:33%;">
<thead>
<tr>
<th class="tableblock halign-left valign-top" >Symbol(s) </th>
<th class="tableblock halign-left valign-top" >Description </th>
<th class="tableblock halign-left valign-top" >Examples</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><span class="monospaced">+</span></p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Addition on numbers and strings.</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><span class="monospaced">1 + 2</span> gives 3.</p>
<p class="tableblock"><span class="monospaced">"foo" + "bar"</span> gives <span class="monospaced">"foobar"</span>.</p>
<p class="tableblock"><span class="monospaced">"foo" + something</span> where <span class="monospaced">something</span> is any object instance is equivalent to
<span class="monospaced">"foo" + something.toString()</span> in Java.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><span class="monospaced">-</span></p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Subtraction on numbers.</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><span class="monospaced">4 - 1</span> gives <span class="monospaced">3</span>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><span class="monospaced">*</span></p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Multiplication on numbers and strings.</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><span class="monospaced">2 * 2</span> gives <span class="monospaced">4</span>.</p>
<p class="tableblock"><span class="monospaced">"a" * 3</span> gives <span class="monospaced">"aaa"</span>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><span class="monospaced">/</span></p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Division on numbers.</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><span class="monospaced">4 / 2</span> gives <span class="monospaced">2</span>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><em>%</em></p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Modulo on numbers.</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><span class="monospaced">4 % 2</span> gives <span class="monospaced">0</span>, <span class="monospaced">3 % 2</span> gives <span class="monospaced">1</span>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><span class="monospaced">"&lt;"</span>, <span class="monospaced">"&lt;="</span>, <span class="monospaced">"=="</span>, <span class="monospaced">"!="</span>, <span class="monospaced">"&gt;"</span>, <span class="monospaced">"&gt;="</span></p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Comparison between numbers and objects that implement <span class="monospaced">java.lang.Comparable</span>.
<span class="monospaced">==</span> is equivalent to calling <span class="monospaced">Object#equals(Object)</span> in Java.</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><span class="monospaced">1 &lt; 2</span> gives <span class="monospaced">true</span>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><span class="monospaced">is</span>, <span class="monospaced">isnt</span></p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Comparison of reference equality.</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><span class="monospaced">a is b</span> gives <span class="monospaced">true</span> only if <span class="monospaced">a</span> and <span class="monospaced">b</span> reference the same object instance.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><span class="monospaced">and</span>, <span class="monospaced">or</span>, <span class="monospaced">not</span></p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Boolean operators. <span class="monospaced">not</span> is of course a unary operator.</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><span class="monospaced">true and true</span> gives <span class="monospaced">true</span>, <span class="monospaced">not(true)</span> gives <span class="monospaced">false</span>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><span class="monospaced">oftype</span></p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Checks the type of an object instance, equivalent to the <span class="monospaced">instanceof</span> operator
in Java.</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><span class="monospaced">("plop" oftype String.class)</span> gives <span class="monospaced">true</span>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><span class="monospaced">orIfNull</span></p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Evaluates an expression and returns the value of another one if <span class="monospaced">null</span>.</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><span class="monospaced">null orIfNull "a"</span> gives <span class="monospaced">"a"</span>. <span class="monospaced">foo() orIfNull 0</span> gives the value of calling <span class="monospaced">foo()</span>, or <span class="monospaced">0</span> if
<span class="monospaced">foo()</span> returns <span class="monospaced">null</span>.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_calling_a_method">Calling a method</h3>
<div class="paragraph"><p>Although we will discuss this in more details later on, you should already know that <span class="monospaced">:</span> is used to
invoke instance methods.</p></div>
<div class="paragraph"><p>You could for instance call the <span class="monospaced">toString()</span> method that any Java object has, and print it out as
follows:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="nb">println</span><span class="p">(</span><span class="mi">123</span><span class="o">:</span> <span class="nf">toString</span><span class="p">())</span>
<span class="nb">println</span><span class="p">(</span><span class="n">someObject</span><span class="o">:</span> <span class="nf">toString</span><span class="p">())</span>
</pre></div></div></div>
</div>
<div class="sect2">
<h3 id="_java_jvm_arrays">Java / JVM arrays</h3>
<div class="paragraph"><p>As you probably know, arrays on the JVM are special objects. Golo deals with such arrays as being
instances of <span class="monospaced">Object[]</span> and does not provide a wrapper class like many languages do. A Java / JVM
array is just what it is supposed to be.</p></div>
<div class="paragraph"><p>Golo adds some sugar to relieve the pain of working with arrays. Golo allows some special methods to
be invoked on arrays:</p></div>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">get(index)</span> returns the value at <span class="monospaced">index</span>,
</p>
</li>
<li>
<p>
<span class="monospaced">set(index, value)</span> sets <span class="monospaced">value</span> at <span class="monospaced">index</span>,
</p>
</li>
<li>
<p>
<span class="monospaced">length()</span> and <span class="monospaced">size()</span> return the array length,
</p>
</li>
<li>
<p>
<span class="monospaced">iterator()</span> returns a <span class="monospaced">java.util.Iterator</span>,
</p>
</li>
<li>
<p>
<span class="monospaced">toString()</span> delegates to <span class="monospaced">java.util.Arrays.toString(Object[])</span>,
</p>
</li>
<li>
<p>
<span class="monospaced">asList()</span> delegates to <span class="monospaced">java.util.Arrays.asList(Object[])</span>,
</p>
</li>
<li>
<p>
<span class="monospaced">equals(someArray)</span> delegates to <span class="monospaced">java.util.Arrays.equals(this, someArray)</span>,
</p>
</li>
<li>
<p>
<span class="monospaced">getClass()</span> return the array class.
</p>
</li>
</ul></div>
<div class="paragraph"><p>Given a reference <span class="monospaced">a</span> on some array:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="c"># Gets the element at index 0</span>
<span class="n">a</span><span class="o">:</span> <span class="nf">get</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

<span class="c"># Replaces the element at index 1 with &quot;a&quot;</span>
<span class="n">a</span><span class="o">:</span> <span class="nf">set</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&quot;a</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c"># Nice print</span>
<span class="nb">println</span><span class="p">(</span><span class="n">a</span><span class="o">:</span> <span class="nf">toString</span><span class="p">())</span>

<span class="c"># Convert to a real collection</span>
<span class="kd">let</span> <span class="nv">list</span> <span class="o">=</span> <span class="n">a</span><span class="o">:</span> <span class="nf">asList</span><span class="p">()</span>
</pre></div></div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==">
</td>
<td class="content">The methods above do <strong>not</strong> perform array bound checks.</td>
</tr></table>
</div>
<div class="paragraph"><p>Finally, arrays can be created with the <span class="monospaced">Array</span> function, as in:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">let</span> <span class="nv">a</span> <span class="o">=</span> <span class="nf">Array</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="kd">let</span> <span class="nv">b</span> <span class="o">=</span> <span class="nf">Array</span><span class="p">(</span><span class="s">&quot;a</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s">&quot;b</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div></div></div>
<div class="paragraph"><p>You can of course take advantage of the <span class="monospaced">array</span> collection literal, too:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">let</span> <span class="nv">a</span> <span class="o">=</span> <span class="nb">array</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
<span class="kd">let</span> <span class="nv">b</span> <span class="o">=</span> <span class="nb">array</span><span class="p">[</span><span class="s">&quot;a</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s">&quot;b</span><span class="s2">&quot;</span><span class="p">]</span>
</pre></div></div></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_creating_new_project_s">Creating new project(s)</h2>
<div class="sectionbody">
<div class="paragraph"><p>The <span class="monospaced">golo new</span> command can create new Golo project(s):</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="gp">$</span> golo new Foo
</pre></div></div></div>
<div class="paragraph"><p>The command creates a new Golo module named <span class="monospaced">Foo</span> in a <span class="monospaced">main.golo</span> file with a simple <em>function</em>
named <span class="monospaced">main</span> that takes an argument for the JVM program arguments.</p></div>
<div class="paragraph"><p>By default we create a new free-form project but you can specify the type of project with the
<span class="monospaced">--type</span> command argument. Three types of projects are currently available:</p></div>
<div class="ulist"><ul>
<li>
<p>
Free-form project,
</p>
</li>
<li>
<p>
Maven-driven project,
</p>
</li>
<li>
<p>
Gradle-driven project.
</p>
</li>
</ul></div>
<div class="paragraph"><p>As an example if you want to create a Maven-driven project, just add <span class="monospaced">--type maven</span>:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="gp">$</span> golo new Foo --type maven
</pre></div></div></div>
<div class="paragraph"><p>By default we create the project directory where the <span class="monospaced">golo</span> command is run. If you need to create
your project directory elsewhere you can use the <span class="monospaced">--path</span> command argument:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="gp">$</span> golo new Bar --path /opt/golo
</pre></div></div></div>
<div class="paragraph"><p>This creates the project directory named <span class="monospaced">Bar</span> in <span class="monospaced">/opt/golo</span>.</p></div>
<div class="sect2">
<h3 id="_free_form_project">Free-form project</h3>
<div class="paragraph"><p>The structure of a free-form project is as follows:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="gp">$</span> tree Foo
<span class="go">Foo</span>
<span class="go">├── imports</span>
<span class="go">├── jars</span>
<span class="go">└── main.golo</span>
</pre></div></div></div>
</div>
<div class="sect2">
<h3 id="_maven_driven_project">Maven-driven project</h3>
<div class="paragraph"><p>The structure of a Maven-driven project is as follows:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="gp">$</span> tree Foo
<span class="go">Foo</span>
<span class="go">├── pom.xml</span>
<span class="go">└── src</span>
<span class="go">    └── main</span>
<span class="go">        └── golo</span>
<span class="go">            └── main.golo</span>
</pre></div></div></div>
<div class="paragraph"><p>The project can be built and packaged with Maven using the following command:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="gp">$</span> mvn package
</pre></div></div></div>
<div class="paragraph"><p>You can now run the module <span class="monospaced">Foo</span> with:</p></div>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">mvn</span>
</p>
</li>
</ul></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="gp">$</span> mvn <span class="nb">exec</span>:java
</pre></div></div></div>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">java</span>
</p>
</li>
</ul></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="gp">$</span> java -jar target/Foo-*-jar-with-dependencies.jar
</pre></div></div></div>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">golo</span>
</p>
</li>
</ul></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="gp">$</span> <span class="nb">cd </span>target/classes
<span class="gp">$</span> golo run --module Foo
</pre></div></div></div>
</div>
<div class="sect2">
<h3 id="_gradle_driven_project">Gradle-driven project</h3>
<div class="paragraph"><p>The structure of a Gradle-driven project is as follows:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="gp">$</span> tree Foo
<span class="go">Foo</span>
<span class="go">├── build.gradle</span>
<span class="go">└── src</span>
<span class="go">    └── main</span>
<span class="go">        └── golo</span>
<span class="go">            └── main.golo</span>
</pre></div></div></div>
<div class="paragraph"><p>The project can be built and packaged with Gradle using the following command:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="gp">$</span> gradle build
</pre></div></div></div>
<div class="paragraph"><p>You can now run the module <span class="monospaced">Foo</span> with:</p></div>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">gradle</span>
</p>
</li>
</ul></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="gp">$</span> gradle run
</pre></div></div></div>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">golo</span>
</p>
</li>
</ul></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="gp">$</span> <span class="nb">cd </span>build/classes/main
<span class="gp">$</span> golo run --module Foo
</pre></div></div></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_functions">Functions</h2>
<div class="sectionbody">
<div class="paragraph"><p>Functions are first-class citizen in Golo. Here is how to define and
call some.</p></div>
<div class="sect2">
<h3 id="_parameter_less_functions">Parameter-less functions</h3>
<div class="paragraph"><p>Golo modules can define functions as follows:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kn">module</span> <span class="nn">sample</span>

<span class="kd">function</span> <span class="nf">hello</span> <span class="o">=</span> <span class="p">{</span>
  <span class="k">return</span> <span class="s">&quot;Hello!</span><span class="s2">&quot;</span>
<span class="p">}</span>
</pre></div></div></div>
<div class="paragraph"><p>In turn, you may invoke a function with a familiar notation:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">let</span> <span class="nv">str</span> <span class="o">=</span> <span class="nf">hello</span><span class="p">()</span>
</pre></div></div></div>
<div class="paragraph"><p>A function needs to return a value using the <span class="monospaced">return</span> keyword. Some
languages state that the last statement is the return value, but Golo
does not follow that trend. We believe that <span class="monospaced">return</span> is more explicit,
and that a few keystrokes in favour of readability is still a good deal.</p></div>
<div class="paragraph"><p>Still, you may omit <span class="monospaced">return</span> statements if your function does not return
a value:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">function</span> <span class="nf">printer</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nb">println</span><span class="p">(</span><span class="s">&quot;Hey!</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="p">}</span>
</pre></div></div></div>
<div class="paragraph"><p>If you do so, the function will actually return <span class="monospaced">null</span>, hence <span class="monospaced">result</span>
in the next statement is <span class="monospaced">null</span>:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="c"># result will be null</span>
<span class="kd">let</span> <span class="nv">result</span> <span class="o">=</span> <span class="nf">printer</span><span class="p">()</span>
</pre></div></div></div>
</div>
<div class="sect2">
<h3 id="_functions_with_parameters">Functions with parameters</h3>
<div class="paragraph"><p>Of course functions may take some parameters, as in:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">function</span> <span class="nf">addition</span> <span class="o">=</span> <span class="p">|</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">|</span> <span class="p">{</span>
  <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
<span class="p">}</span>
</pre></div></div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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">
</td>
<td class="content">Parameters are constant references, hence they cannot be reassigned.</td>
</tr></table>
</div>
<div class="paragraph"><p>Invoking functions that take parameters is straightforward, too:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">let</span> <span class="nv">three</span> <span class="o">=</span> <span class="nf">addition</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="kd">let</span> <span class="nv">hello_world</span> <span class="o">=</span> <span class="nf">addition</span><span class="p">(</span><span class="s">&quot;hello </span><span class="s2">&quot;</span><span class="p">,</span> <span class="s">&quot;world!</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div></div></div>
</div>
<div class="sect2">
<h3 id="_variable_arity_functions">Variable-arity functions</h3>
<div class="paragraph"><p>Functions may take a varying number of parameters. To define one, just
add <span class="monospaced">...</span> to the last parameter name:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">function</span> <span class="nf">foo</span> <span class="o">=</span> <span class="p">|</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="o">...</span><span class="p">|</span> <span class="p">{</span>
  <span class="c"># ...</span>
<span class="p">}</span>
</pre></div></div></div>
<div class="paragraph"><p>Here, <span class="monospaced">c</span> catches the variable arguments in an array, just like it would
be the case with Java. You can thus treat <span class="monospaced">c</span> as being a Java object of
type <span class="monospaced">Object[]</span>.</p></div>
<div class="paragraph"><p>Calling variable-arity functions does not require wrapping the last
arguments in an array. While invoking the <span class="monospaced">foo</span> function above, the
following examples are legit:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="c"># a=1, b=2, c=[]</span>
<span class="nf">foo</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>

<span class="c"># a=1, b=2, c=[3]</span>
<span class="nf">foo</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>

<span class="c"># a=1, b=2, c=[3,4]</span>
<span class="nf">foo</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
</pre></div></div></div>
<div class="paragraph"><p>Because the parameter that catches the last arguments is an array, you
may call array methods. Given:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">function</span> <span class="nf">elementAt</span> <span class="o">=</span> <span class="p">|</span><span class="n">index</span><span class="p">,</span> <span class="n">args</span><span class="o">...</span><span class="p">|</span> <span class="p">{</span>
  <span class="k">return</span> <span class="n">args</span><span class="o">:</span> <span class="nf">get</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
<span class="p">}</span>
</pre></div></div></div>
<div class="paragraph"><p>then:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="c"># prints &quot;2&quot;</span>
<span class="nb">println</span><span class="p">(</span><span class="nf">elementAt</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
</pre></div></div></div>
</div>
<div class="sect2">
<h3 id="_functions_from_other_modules_and_imports">Functions from other modules and imports</h3>
<div class="paragraph"><p>Suppose that we have a module <span class="monospaced">foo.Bar</span>:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kn">module</span> <span class="nn">foo.Bar</span>

<span class="kd">function</span> <span class="nf">f</span> <span class="o">=</span> <span class="p">{</span>
  <span class="k">return</span> <span class="s">&quot;f()</span><span class="s2">&quot;</span>
<span class="p">}</span>
</pre></div></div></div>
<div class="paragraph"><p>We can invoke <span class="monospaced">f</span> from another module by prefixing it with its module
name:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">let</span> <span class="nv">r</span> <span class="o">=</span> <span class="nn">foo.Bar.f</span><span class="p">()</span>
</pre></div></div></div>
<div class="paragraph"><p>Of course, we may also take advantage of an <span class="monospaced">import</span> statement:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kn">module</span> <span class="nn">Somewhere.Else</span>

<span class="kn">import</span> <span class="nn">foo.Bar</span>

<span class="kd">function</span> <span class="nf">plop</span> <span class="o">=</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nf">f</span><span class="p">()</span>
<span class="p">}</span>
</pre></div></div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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">
</td>
<td class="content">Imports in Golo do not work as in Java.
Golo is a dynamic language where symbols are being resolved at runtime. Module imports are
<strong>not</strong> checked at compilation time, and their sole purpose is to help in dynamic resolution. Back
to the previous example, <span class="monospaced">f</span> cannot be resolved from the current module, and the Golo runtime
subsequently tries to resolve <span class="monospaced">f</span> from each <span class="monospaced">import</span> statement. Also, note that the order of
<span class="monospaced">import</span> statements is important, as the resolution stops at the first module having the <span class="monospaced">f</span>
function.</td>
</tr></table>
</div>
<div class="paragraph"><p>Last but not least, you may prepend the last piece of the module name. The following invocations are
equivalent:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kn">module</span> <span class="nn">Somewhere.Else</span>

<span class="kn">import</span> <span class="nn">foo.Bar</span>

<span class="kd">function</span> <span class="nf">plop</span> <span class="o">=</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nv">result</span> <span class="o">=</span> <span class="nf">f</span><span class="p">()</span>
  <span class="kd">let</span> <span class="nv">result_bis</span> <span class="o">=</span> <span class="nn">Bar.f</span><span class="p">()</span>
  <span class="kd">let</span> <span class="nv">result_full</span> <span class="o">=</span> <span class="nn">foo.Bar.f</span><span class="p">()</span>
  <span class="k">return</span> <span class="n">result</span>
<span class="p">}</span>
</pre></div></div></div>
<div class="paragraph"><p>Golo modules have a set of implicit imports:</p></div>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">gololang.Predefined</span>,
</p>
</li>
<li>
<p>
<span class="monospaced">gololang.StandardAugmentations</span>,
</p>
</li>
<li>
<p>
<span class="monospaced">gololang</span>,
</p>
</li>
<li>
<p>
<span class="monospaced">java.lang</span>.
</p>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="_local_functions">Local functions</h3>
<div class="paragraph"><p>By default, functions are visible outside of their module. You may
restrict the visibility of a function by using the <span class="monospaced">local</span> keyword:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kn">module</span> <span class="nn">Foo</span>

<span class="k">local</span> <span class="kd">function</span> <span class="nf">a</span> <span class="o">=</span> <span class="p">{</span>
  <span class="k">return</span> <span class="mi">666</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nf">b</span> <span class="o">=</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nf">a</span><span class="p">()</span>
<span class="p">}</span>
</pre></div></div></div>
<div class="paragraph"><p>Here, <span class="monospaced">b</span> is visible while <span class="monospaced">a</span> can only be invoked from within the <span class="monospaced">Foo</span>
module. Given another module called <span class="monospaced">Bogus</span>, the following would fail at
runtime:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kn">module</span> <span class="nn">Bogus</span>

<span class="kd">function</span> <span class="nf">i_will_crash</span> <span class="o">=</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nn">Foo.a</span><span class="p">()</span>
<span class="p">}</span>
</pre></div></div></div>
</div>
<div class="sect2">
<h3 id="_module_level_state">Module-level state</h3>
<div class="paragraph"><p>You can declare <span class="monospaced">let</span> and <span class="monospaced">var</span> references at the module level, as in:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kn">module</span> <span class="nn">Sample</span>

<span class="kd">let</span> <span class="nv">a</span> <span class="o">=</span> <span class="mi">1</span>

<span class="kd">var</span> <span class="nv">b</span> <span class="o">=</span> <span class="nf">truth</span><span class="p">()</span>

<span class="k">local</span> <span class="kd">function</span> <span class="nf">truth</span> <span class="o">=</span> <span class="p">{</span>
  <span class="k">return</span> <span class="mi">42</span>
<span class="p">}</span>
</pre></div></div></div>
<div class="paragraph"><p>These references get initialized when the module is being loaded by the Java virtual machine. In
fact, module-level state is implemented using <span class="monospaced">private static</span> fields that get initialized in a
<span class="monospaced">&lt;clinit&gt;</span> method.</p></div>
<div class="paragraph"><p>Module-level references are only visible from their module, although a function may provide
accessors to them.</p></div>
<div class="paragraph"><p>It is important to note that such references get initialized in the order of declaration in the
source file. Having initialization dependencies between such references would be silly anyway, but
one should keep it in mind <em>just in case</em>.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Caution" src="data:image/png;base64,
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">
</td>
<td class="content">Global state is a bad thing in general. We strongly advise you to <strong>think twice</strong> before you
introduce module-level state. Beware of potential memory leaks, just like <span class="monospaced">static</span> class fields in
the Java programming language.</td>
</tr></table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_java_interoperability">Java interoperability</h2>
<div class="sectionbody">
<div class="paragraph"><p>Golo aims at providing a seamless 2-way interoperability with the Java programming language.</p></div>
<div class="sect2">
<h3 id="_main_function_java_compliance">Main function Java compliance</h3>
<div class="paragraph"><p>If the Golo compiler find a unary function named <span class="monospaced">main</span>, it will be compiled to a <span class="monospaced">void(String[])</span> static method.
This <span class="monospaced">main</span> method can servers as a JVM entry point.</p></div>
<div class="paragraph"><p>Suppose that we have the following Golo module:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kn">module</span> <span class="nn">mainEntryPoint</span>


<span class="kd">function</span> <span class="nf">main</span> <span class="o">=</span> <span class="p">|</span><span class="n">args</span><span class="p">|</span> <span class="p">{</span>
  <span class="nb">println</span><span class="p">(</span><span class="s">&quot;-&gt; </span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">args</span><span class="o">:</span> <span class="nf">get</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
<span class="p">}</span>
</pre></div></div></div>
<div class="paragraph"><p>Once compiled, we may invoke it as follows:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="gp">$</span> golo compile mainEntryPoint.golo
<span class="gp">$</span> java -cp <span class="s2">&quot;.:golo.jar&quot;</span> mainEntryPoint GoloRocks
<span class="go">-&gt; GoloRocks</span>
<span class="gp">$</span>
</pre></div></div></div>
</div>
<div class="sect2">
<h3 id="_calling_static_methods">Calling static methods</h3>
<div class="paragraph"><p>Golo can invoke public Java static methods by treating them as functions:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kn">module</span> <span class="nn">sample</span>

<span class="kn">import</span> <span class="nn">java.util.Arrays</span>

<span class="kd">function</span> <span class="nf">oneTwoThree</span> <span class="o">=</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nf">asList</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="p">}</span>
</pre></div></div></div>
<div class="paragraph"><p>In this example, <span class="monospaced">asList</span> is resolved from the <span class="monospaced">java.util.Arrays</span> import and called as a function.
Note that we could equivalently have written a qualified invocation as <span class="monospaced">Arrays.asList(1, 2, 3)</span>.</p></div>
</div>
<div class="sect2">
<h3 id="_calling_instance_methods">Calling instance methods</h3>
<div class="paragraph"><p>When you have an object, you may invoke its methods using the <span class="monospaced">:</span> operator.</p></div>
<div class="paragraph"><p>The following would call the <span class="monospaced">toString</span> method of any kind, then print it:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="nb">println</span><span class="p">(</span><span class="s">&quot;&gt;&gt;&gt; </span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">someObject</span><span class="o">:</span> <span class="nf">toString</span><span class="p">())</span>
</pre></div></div></div>
<div class="paragraph"><p>Of course, you may chain calls as long as a method is not of a <span class="monospaced">void</span> return type. Golo converts
Java <span class="monospaced">void</span> methods by making them return <span class="monospaced">null</span>. This is neither a bug or a feature: the
<strong>invokedynamic</strong> support on the JVM simply does so.</p></div>
</div>
<div class="sect2">
<h3 id="_span_class_monospaced_null_span_safe_instance_method_invocations"><span class="monospaced">null</span>-safe instance method invocations</h3>
<div class="paragraph"><p>Golo supports <strong><span class="monospaced">null</span>-safe</strong> methods invocations using the <strong>"Elvis"</strong> symbol: <span class="monospaced">?:</span>.</p></div>
<div class="paragraph"><p>Suppose that we invoke the method <span class="monospaced">bar()</span> on some reference <span class="monospaced">foo</span>: <span class="monospaced">foo: bar()</span>. If <span class="monospaced">foo</span> is <span class="monospaced">null</span>,
then invoking <span class="monospaced">bar()</span> throws a <span class="monospaced">java.lang.NullPointerException</span>, just like you would expect in Java.</p></div>
<div class="paragraph"><p>By contrast:</p></div>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">foo?: bar()</span> simply returns <span class="monospaced">null</span>, and
</p>
</li>
<li>
<p>
<span class="monospaced">null?: anything()</span> returns <span class="monospaced">null</span>, too.
</p>
</li>
</ul></div>
<div class="paragraph"><p>This is quite useful when querying data models where <span class="monospaced">null</span> values could be returned. This can be
elegantly combined with the <span class="monospaced">orIfNull</span> operator to return a default value, as illustrated by the
following example:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">let</span> <span class="nv">person</span> <span class="o">=</span> <span class="n">dao</span><span class="o">:</span> <span class="nf">findByName</span><span class="p">(</span><span class="s">&quot;Mr Bean</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="kd">let</span> <span class="nv">city</span> <span class="o">=</span> <span class="n">person</span><span class="o">?:</span> <span class="nf">address</span><span class="p">()</span><span class="o">?:</span> <span class="nf">city</span><span class="p">()</span> <span class="ow">orIfNull</span> <span class="s">&quot;n/a</span><span class="s2">&quot;</span>
</pre></div></div></div>
<div class="paragraph"><p>This is more elegant than, say:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">let</span> <span class="nv">person</span> <span class="o">=</span> <span class="n">dao</span><span class="o">:</span> <span class="nf">findByName</span><span class="p">(</span><span class="s">&quot;Mr Bean</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="kd">var</span> <span class="nv">city</span> <span class="o">=</span> <span class="s">&quot;n/a</span><span class="s2">&quot;</span>
<span class="k">if</span> <span class="n">person</span> <span class="ow">isnt</span> <span class="kc">null</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nv">address</span> <span class="o">=</span> <span class="n">person</span><span class="o">:</span> <span class="nf">address</span><span class="p">()</span>
  <span class="k">if</span> <span class="n">address</span> <span class="ow">isnt</span> <span class="kc">null</span> <span class="p">{</span>
    <span class="n">city</span> <span class="o">=</span> <span class="n">address</span><span class="o">:</span> <span class="nf">city</span><span class="p">()</span> <span class="n">ofIfNull</span> <span class="s">&quot;n/a</span><span class="s2">&quot;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div></div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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">
</td>
<td class="content">The runtime implementation of <span class="monospaced">null</span>-safe method invocations is <strong>optimistic</strong> as it behaves
like a <span class="monospaced">try</span> block catching a <span class="monospaced">NullPointerException</span>. Performance is good unless most invocations
happen to be on <span class="monospaced">null</span>, in which case using <span class="monospaced">?:</span> is probably not a great idea.</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="_creating_objects">Creating objects</h3>
<div class="paragraph"><p>Golo doesn&#8217;t have an instantiation operator like <span class="monospaced">new</span> in Java. Instead, creating an object and
calling its constructor is done as if it was just another function.</p></div>
<div class="paragraph"><p>As an example, we may allocate a <span class="monospaced">java.util.LinkedList</span> as follows:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kn">module</span> <span class="nn">sample</span>

<span class="kn">import</span> <span class="nn">java.util</span>

<span class="kd">function</span> <span class="nf">aList</span> <span class="o">=</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nf">LinkedList</span><span class="p">()</span>
<span class="p">}</span>
</pre></div></div></div>
<div class="paragraph"><p>Another example would be using a <span class="monospaced">java.lang.StringBuilder</span>.</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">function</span> <span class="nf">str_build</span> <span class="o">=</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nn">java.lang.StringBuilder</span><span class="p">(</span><span class="s">&quot;h</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">:</span>
    <span class="nf">append</span><span class="p">(</span><span class="s">&quot;e</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">:</span>
    <span class="nf">append</span><span class="p">(</span><span class="s">&quot;l</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">:</span>
    <span class="nf">append</span><span class="p">(</span><span class="s">&quot;l</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">:</span>
    <span class="nf">append</span><span class="p">(</span><span class="s">&quot;o</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">:</span>
    <span class="nf">toString</span><span class="p">()</span>
<span class="p">}</span>
</pre></div></div></div>
<div class="paragraph"><p>As one would expect, the <span class="monospaced">str_build</span> function above gives the <span class="monospaced">"hello"</span> string.</p></div>
</div>
<div class="sect2">
<h3 id="_static_fields">Static fields</h3>
<div class="paragraph"><p>Golo treats public static fields as function, so one could get the maximum value for an <span class="monospaced">Integer</span> as
follows:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kn">module</span> <span class="nn">samples.MaxInt</span>

<span class="k">local</span> <span class="kd">function</span> <span class="nf">max_int</span> <span class="o">=</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nn">java.lang.Integer.MAX_VALUE</span><span class="p">()</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nf">main</span> <span class="o">=</span> <span class="p">|</span><span class="n">args</span><span class="p">|</span> <span class="p">{</span>
  <span class="nb">println</span><span class="p">(</span><span class="nf">max_int</span><span class="p">())</span>
<span class="p">}</span>
</pre></div></div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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">
</td>
<td class="content">Given than most static fields are used as constants in Java, Golo does not provide support to
change their values. This may change in the future if compelling general-interest use-cases emerge.</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="_instance_fields">Instance fields</h3>
<div class="paragraph"><p>Instance fields can be accessed as functions, both for reading and writing. Suppose that we have a
Java class that looks as follows:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Foo</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="n">bar</span><span class="o">;</span>
<span class="o">}</span>
</pre></div></div></div>
<div class="paragraph"><p>We can access the <span class="monospaced">bar</span> field as follows:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">let</span> <span class="nv">foo</span> <span class="o">=</span> <span class="nf">Foo</span><span class="p">()</span>

<span class="c"># Write</span>
<span class="n">foo</span><span class="o">:</span> <span class="nf">bar</span><span class="p">(</span><span class="s">&quot;baz</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c"># Read, prints &quot;baz&quot;</span>
<span class="nb">println</span><span class="p">(</span><span class="n">foo</span><span class="o">:</span> <span class="nf">bar</span><span class="p">())</span>
</pre></div></div></div>
<div class="paragraph"><p>An interesting behavior when writing fields is that the <strong>"methods"</strong> return the object, which means
that you can chain invocations.</p></div>
<div class="paragraph"><p>Suppose that we have a Java class as follows:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Foo</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="n">bar</span><span class="o">;</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="n">baz</span><span class="o">;</span>
<span class="o">}</span>
</pre></div></div></div>
<div class="paragraph"><p>We can set all fields by chaining invocations as in:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">let</span> <span class="nv">foo</span> <span class="o">=</span> <span class="nf">Foo</span><span class="p">()</span><span class="o">:</span> <span class="nf">bar</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">:</span> <span class="nf">baz</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div></div></div>
<div class="paragraph"><p>It should be noted that Golo won&#8217;t bypass the regular Java visibility access rules on fields.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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">
</td>
<td class="content">
<div class="title">What happens if there is both a field and a method with the same names?</div>
<div class="paragraph"><p>Back to the previous example, suppose that we have both a field and a method with the same name, as
in:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Foo</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="n">bar</span><span class="o">;</span>

  <span class="kd">public</span> <span class="n">String</span> <span class="nf">bar</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">bar</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div></div></div>
<div class="paragraph"><p><strong>Golo resolves methods first, fields last.</strong> Hence, the following Golo code will resolve the
<span class="monospaced">bar()</span> method, not the <span class="monospaced">bar</span> field:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">let</span> <span class="nv">foo</span> <span class="o">=</span> <span class="nf">Foo</span><span class="p">()</span>

<span class="c"># Write the field</span>
<span class="n">foo</span><span class="o">:</span> <span class="nf">bar</span><span class="p">(</span><span class="s">&quot;baz</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c"># Calls the bar() method</span>
<span class="nb">println</span><span class="p">(</span><span class="n">foo</span><span class="o">:</span> <span class="nf">bar</span><span class="p">())</span>
</pre></div></div></div>
</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="_inner_classes_and_enumerations">Inner classes and enumerations</h3>
<div class="paragraph"><p>We will illustrate both how to deal with public static inner classes and enumerations at once.</p></div>
<div class="paragraph"><p>The rules to deal with them in Golo are as follows.</p></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
Inner classes are identified by their real name in the JVM, with nested classes being separated
   by a <span class="monospaced">$</span> sign. Hence, <span class="monospaced">Thread.State</span> in Java is written <span class="monospaced">Thread$State</span> in Golo.
</p>
</li>
<li>
<p>
Enumerations are just normal objects. They expose each entry as a static field, and each entry is
   an instance of the enumeration class.
</p>
</li>
</ol></div>
<div class="paragraph"><p>Let us consider the following example:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kn">module</span> <span class="nn">sample.EnumsThreadState</span>

<span class="kn">import</span> <span class="nn">java.lang.Thread$State</span>

<span class="kd">function</span> <span class="nf">main</span> <span class="o">=</span> <span class="p">|</span><span class="n">args</span><span class="p">|</span> <span class="p">{</span>

  <span class="c"># Call the enum entry like a function</span>
  <span class="kd">let</span> <span class="nv">new</span> <span class="o">=</span> <span class="nn">Thread$State.NEW</span><span class="p">()</span>
  <span class="nb">println</span><span class="p">(</span><span class="s">&quot;name=</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">new</span><span class="o">:</span> <span class="nf">name</span><span class="p">()</span> <span class="o">+</span> <span class="s">&quot;, ordinal=</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">new</span><span class="o">:</span> <span class="nf">ordinal</span><span class="p">())</span>

  <span class="c"># Walk through all enum entries</span>
  <span class="k">foreach</span> <span class="n">element</span> <span class="ow">in</span> <span class="nn">Thread$State.values</span><span class="p">()</span> <span class="p">{</span>
    <span class="nb">println</span><span class="p">(</span><span class="s">&quot;name=</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">element</span><span class="o">:</span> <span class="nf">name</span><span class="p">()</span> <span class="o">+</span> <span class="s">&quot;, ordinal=</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">element</span><span class="o">:</span> <span class="nf">ordinal</span><span class="p">())</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div></div></div>
<div class="paragraph"><p>Running it yields the following console output:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="gp">$</span> golo golo --files samples/enums-thread-state.golo
<span class="go">name=NEW, ordinal=0</span>
<span class="go">name=NEW, ordinal=0</span>
<span class="go">name=RUNNABLE, ordinal=1</span>
<span class="go">name=BLOCKED, ordinal=2</span>
<span class="go">name=WAITING, ordinal=3</span>
<span class="go">name=TIMED_WAITING, ordinal=4</span>
<span class="go">name=TERMINATED, ordinal=5</span>
<span class="gp">$</span>
</pre></div></div></div>
</div>
<div class="sect2">
<h3 id="_clashes_with_golo_operators_and_escaping">Clashes with Golo operators and escaping</h3>
<div class="paragraph"><p>Because Golo provides a few named operators such as <span class="monospaced">is</span>, <span class="monospaced">and</span> or <span class="monospaced">not</span>, they are recognized as
operator tokens.</p></div>
<div class="paragraph"><p>However, you may find yourself in a situation where you need to invoke a Java method whose name is
a Golo operator, such as:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="c"># Function call</span>
<span class="ow">is</span><span class="p">()</span>

<span class="c"># Method call</span>
<span class="n">someObject</span><span class="o">:</span> <span class="nf">foo</span><span class="p">()</span><span class="o">:</span> <span class="ow">is</span><span class="p">()</span><span class="o">:</span> <span class="ow">not</span><span class="p">()</span><span class="o">:</span> <span class="nf">bar</span><span class="p">()</span>
</pre></div></div></div>
<div class="paragraph"><p>This results in a parsing error, as <span class="monospaced">is</span> and <span class="monospaced">not</span> will be matched as operators instead of method
identifiers.</p></div>
<div class="paragraph"><p>The solution is to use <strong>escaping</strong>, by prefixing identifiers with a backtick, as in:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="c"># Function call</span>
<span class="nf">`is</span><span class="p">()</span>

<span class="c"># Method call</span>
<span class="n">someObject</span><span class="o">:</span> <span class="nf">foo</span><span class="p">()</span><span class="o">:</span> <span class="nf">`is</span><span class="p">()</span><span class="o">:</span> <span class="nf">`not</span><span class="p">()</span><span class="o">:</span> <span class="nf">bar</span><span class="p">()</span>
</pre></div></div></div>
</div>
<div class="sect2">
<h3 id="_golo_class_loader">Golo class loader</h3>
<div class="paragraph"><p>Golo provides a class loader for directly loading and compiling Golo modules. You may use it as
follows:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">fr.insalyon.citi.golo.compiler.GoloClassLoader</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Foo</span> <span class="o">{</span>

  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">...</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Throwable</span> <span class="o">{</span>
    <span class="n">GoloClassLoader</span> <span class="n">classLoader</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GoloClassLoader</span><span class="o">();</span>
    <span class="n">Class</span><span class="o">&lt;?&gt;</span> <span class="n">moduleClass</span> <span class="o">=</span> <span class="n">classLoader</span><span class="o">.</span><span class="na">load</span><span class="o">(</span><span class="s">&quot;foo.golo&quot;</span><span class="o">,</span> <span class="k">new</span> <span class="n">FileInputStream</span><span class="o">(</span><span class="s">&quot;/path/to/foo.golo&quot;</span><span class="o">));</span>
    <span class="n">Method</span> <span class="n">bar</span> <span class="o">=</span> <span class="n">moduleClass</span><span class="o">.</span><span class="na">getMethod</span><span class="o">(</span><span class="s">&quot;bar&quot;</span><span class="o">,</span> <span class="n">Object</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    <span class="n">bar</span><span class="o">.</span><span class="na">invoke</span><span class="o">(</span><span class="kc">null</span><span class="o">,</span> <span class="s">&quot;golo golo&quot;</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div></div></div>
<div class="paragraph"><p>This would work with a Golo module defined as in:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kn">module</span> <span class="nn">foo.Bar</span>

<span class="kd">function</span> <span class="nf">bar</span> <span class="o">=</span> <span class="p">|</span><span class="n">wat</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="nb">println</span><span class="p">(</span><span class="n">wat</span><span class="p">)</span>
</pre></div></div></div>
<div class="paragraph"><p>Indeed, a Golo module is viewable as a Java class where each function is a static method.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Important" src="data:image/png;base64,
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
EQn3XQAAAABJRU5ErkJggg==">
</td>
<td class="content"><span class="monospaced">GoloClassLoader</span> is rather dumb at this stage, and you will get an exception if you try
to load two Golo source files with the same <span class="monospaced">module</span> name declaration. This is because it will
attempt to redefine an already defined class.</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Caution" src="data:image/png;base64,
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">
</td>
<td class="content">Later in the glorious and glamorous future, Golo will have objects and not just functions.
Be patient, it&#8217;s coming in!</td>
</tr></table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_control_flow">Control flow</h2>
<div class="sectionbody">
<div class="paragraph"><p>Control flow in Golo is imperative and has the usual constructions found in upstream languages.</p></div>
<div class="sect2">
<h3 id="_conditional_branching">Conditional branching</h3>
<div class="paragraph"><p>Golo supports the traditional <span class="monospaced">if</span> / <span class="monospaced">else</span> constructions, as in:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="k">if</span> <span class="nf">goloIsGreat</span><span class="p">()</span> <span class="p">{</span>
  <span class="nb">println</span><span class="p">(</span><span class="s">&quot;Golo Golo</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="p">}</span>

<span class="k">if</span> <span class="p">(</span><span class="n">someCondition</span><span class="p">)</span> <span class="p">{</span>
  <span class="nf">doThis</span><span class="p">()</span>
<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="n">someOtherCondition</span> <span class="p">{</span>
  <span class="nf">doThat</span><span class="p">()</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
  <span class="nf">doThatThing</span><span class="p">()</span>
<span class="p">}</span>
</pre></div></div></div>
<div class="paragraph"><p>The condition of an <span class="monospaced">if</span> statement does not need parenthesis. You may add some to clarify a more
elaborated expression, though.</p></div>
</div>
<div class="sect2">
<h3 id="_span_class_monospaced_case_span_branching"><span class="monospaced">case</span> branching</h3>
<div class="paragraph"><p>Golo offers a versatile <span class="monospaced">case</span> construction for conditional branching. It may be used in place of
multiple nested <span class="monospaced">if</span> / <span class="monospaced">else</span> statements, as in:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">function</span> <span class="nf">what</span> <span class="o">=</span> <span class="p">|</span><span class="n">obj</span><span class="p">|</span> <span class="p">{</span>
  <span class="k">case</span> <span class="p">{</span>
    <span class="k">when</span> <span class="n">obj</span> <span class="ow">oftype</span> <span class="nn">String.class</span> <span class="p">{</span>
      <span class="k">return</span> <span class="s">&quot;String</span><span class="s2">&quot;</span>
    <span class="p">}</span>
    <span class="k">when</span> <span class="n">obj</span> <span class="ow">oftype</span> <span class="nn">Integer.class</span> <span class="p">{</span>
      <span class="k">return</span> <span class="s">&quot;Integer</span><span class="s2">&quot;</span>
    <span class="p">}</span>
    <span class="k">otherwise</span> <span class="p">{</span>
      <span class="k">return</span> <span class="s">&quot;alien</span><span class="s2">&quot;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div></div></div>
<div class="paragraph"><p>A <span class="monospaced">case</span> statement requires at least 1 <span class="monospaced">when</span> clause and a mandatory <span class="monospaced">otherwise</span> clause. Each clause
is being associated with a block. It is semantically equivalent to the corresponding <span class="monospaced">if</span> / <span class="monospaced">else</span>
chain:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">function</span> <span class="nf">what</span> <span class="o">=</span> <span class="p">|</span><span class="n">obj</span><span class="p">|</span> <span class="p">{</span>
  <span class="k">if</span> <span class="n">obj</span> <span class="ow">oftype</span> <span class="nn">String.class</span> <span class="p">{</span>
    <span class="k">return</span> <span class="s">&quot;String</span><span class="s2">&quot;</span>
  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="n">obj</span> <span class="ow">oftype</span> <span class="nn">Integer.class</span> <span class="p">{</span>
    <span class="k">return</span> <span class="s">&quot;Integer</span><span class="s2">&quot;</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">return</span> <span class="s">&quot;alien</span><span class="s2">&quot;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div></div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Important" src="data:image/png;base64,
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
EQn3XQAAAABJRU5ErkJggg==">
</td>
<td class="content"><span class="monospaced">when</span> clauses are being evaluated in the declaration order, and only the first satisfied
one is being executed.</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="_span_class_monospaced_match_span_statements"><span class="monospaced">match</span> statements</h3>
<div class="paragraph"><p>The <span class="monospaced">match</span> statement is a convenient shortcut for cases where a <span class="monospaced">case</span> statement would be used to
match a value, and give back a result. While it may resemble <strong>pattern matching</strong> operators in some
other languages it is not fully equivalent, as Golo does not support destructuring.</p></div>
<div class="paragraph"><p><span class="monospaced">match</span> is a great addition to the Golo programmer:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">let</span> <span class="nv">item</span> <span class="o">=</span> <span class="s">&quot;foo@bar.com</span><span class="s2">&quot;</span>

<span class="kd">let</span> <span class="nv">what_it_could_be</span> <span class="o">=</span> <span class="o">-&gt;</span> <span class="k">match</span> <span class="p">{</span>
  <span class="k">when</span> <span class="n">item</span><span class="o">:</span> <span class="nf">contains</span><span class="p">(</span><span class="s">&quot;@</span><span class="s2">&quot;</span><span class="p">)</span> <span class="k">then</span> <span class="s">&quot;an email?</span><span class="s2">&quot;</span>
  <span class="k">when</span> <span class="n">item</span><span class="o">:</span> <span class="nf">startsWith</span><span class="p">(</span><span class="s">&quot;+33</span><span class="s2">&quot;</span><span class="p">)</span> <span class="k">then</span> <span class="s">&quot;a French phone number?</span><span class="s2">&quot;</span>
  <span class="k">when</span> <span class="n">item</span><span class="o">:</span> <span class="nf">startsWith</span><span class="p">(</span><span class="s">&quot;http://</span><span class="s2">&quot;</span><span class="p">)</span> <span class="k">then</span> <span class="s">&quot;a website URL?</span><span class="s2">&quot;</span>
  <span class="k">otherwise</span> <span class="s">&quot;I have no clue, mate!</span><span class="s2">&quot;</span>
<span class="p">}</span>

<span class="c"># prints &quot;an email?&quot;</span>
<span class="nb">println</span><span class="p">(</span><span class="nf">what_it_could_be</span><span class="p">(</span><span class="n">item</span><span class="p">))</span>
</pre></div></div></div>
<div class="paragraph"><p>The values to be returned are specified after a <span class="monospaced">then</span> keyword that follows a boolean expression to
be evaluated.</p></div>
<div class="paragraph"><p>Like <span class="monospaced">case</span> statements, a <span class="monospaced">match</span> construct needs at least one <span class="monospaced">when</span> clause and one <span class="monospaced">otherwise</span>
clause.</p></div>
</div>
<div class="sect2">
<h3 id="_span_class_monospaced_while_span_loops"><span class="monospaced">while</span> loops</h3>
<div class="paragraph"><p>While loops in Golo are straightforward:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">function</span> <span class="nf">times</span> <span class="o">=</span> <span class="p">|</span><span class="n">n</span><span class="p">|</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nv">times</span> <span class="o">=</span> <span class="mi">0</span>
  <span class="k">while</span> <span class="p">(</span><span class="n">times</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">)</span> <span class="p">{</span> <span class="n">times</span> <span class="o">=</span> <span class="n">times</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">}</span>
  <span class="k">return</span> <span class="n">times</span>
<span class="p">}</span>
</pre></div></div></div>
<div class="paragraph"><p>The parenthesis in the <span class="monospaced">while</span> condition may be omitted like it is the case for <span class="monospaced">if</span> statements.</p></div>
</div>
<div class="sect2">
<h3 id="_span_class_monospaced_for_span_loops"><span class="monospaced">for</span> loops</h3>
<div class="paragraph"><p>This is the most versatile loop construction, as it features:</p></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
a variable declaration and initialization (a Golo variable is always initialized anyway), and
</p>
</li>
<li>
<p>
a loop progress condition, and
</p>
</li>
<li>
<p>
a loop progress statement.
</p>
</li>
</ol></div>
<div class="paragraph"><p>The following function shows a <span class="monospaced">for</span> loop:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">function</span> <span class="nf">fact</span> <span class="o">=</span> <span class="p">|</span><span class="n">value</span><span class="p">,</span> <span class="n">n</span><span class="p">|</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nv">result</span> <span class="o">=</span> <span class="mi">1</span>
  <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nv">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">,</span> <span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">result</span> <span class="o">*</span> <span class="n">value</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="n">result</span>
<span class="p">}</span>
</pre></div></div></div>
<div class="paragraph"><p>As you can see, it is very much like a <span class="monospaced">for</span> loop in Java, except that:</p></div>
<div class="ulist"><ul>
<li>
<p>
the <span class="monospaced">for</span> loop elements are separated by <span class="monospaced">','</span> instead of <span class="monospaced">';'</span>, and
</p>
</li>
<li>
<p>
there cannot be multiple variables in the loop, and
</p>
</li>
<li>
<p>
there cannot be multiple loop progress statements.
</p>
</li>
</ul></div>
<div class="paragraph"><p>Again, this choice is dictated by the pursue of simplicity.</p></div>
</div>
<div class="sect2">
<h3 id="_span_class_monospaced_foreach_span_loops"><span class="monospaced">foreach</span> loops</h3>
<div class="paragraph"><p>Golo provides a "for each" style of iteration over iterable elements. Any object that is an instance
of <span class="monospaced">java.lang.Iterable</span> can be used in <span class="monospaced">foreach</span> loops, as in:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">function</span> <span class="nf">concat_to_string</span> <span class="o">=</span> <span class="p">|</span><span class="n">iterable</span><span class="p">|</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nv">result</span> <span class="o">=</span> <span class="s">&quot;</span><span class="s2">&quot;</span>
  <span class="k">foreach</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">iterable</span> <span class="p">{</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">result</span> <span class="o">+</span> <span class="n">item</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="n">result</span>
<span class="p">}</span>
</pre></div></div></div>
<div class="paragraph"><p>In this example, <span class="monospaced">item</span> is a variable within the <span class="monospaced">foreach</span> loop scope, and <span class="monospaced">iterable</span> is an object
that is expected to be iterable.</p></div>
<div class="paragraph"><p>You may use parenthesis around a <span class="monospaced">foreach</span> expression, so <span class="monospaced">foreach (foo in bar)</span> is equivalent to
<span class="monospaced">foreach foo in bar</span>.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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">
</td>
<td class="content">Although Java arrays (<span class="monospaced">Object[]</span>) are not real objects, they can be used with <span class="monospaced">foreach</span> loops.
Golo provides a <span class="monospaced">iterator()</span> method for them.</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="_span_class_monospaced_break_span_and_span_class_monospaced_continue_span"><span class="monospaced">break</span> and <span class="monospaced">continue</span></h3>
<div class="paragraph"><p>Although not strictly necessary, the <span class="monospaced">break</span> and <span class="monospaced">continue</span> statements can be useful to simplify
some loops in imperative languages.</p></div>
<div class="paragraph"><p>Like in Java and many other languages:</p></div>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">break</span> exits the current inner-most loop, and
</p>
</li>
<li>
<p>
<span class="monospaced">continue</span> skips to the next iteration of the current inner-most loop.
</p>
</li>
</ul></div>
<div class="paragraph"><p>Consider the following contrived example:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kn">module</span> <span class="nn">test</span>

<span class="kd">function</span> <span class="nf">main</span> <span class="o">=</span> <span class="p">|</span><span class="n">args</span><span class="p">|</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nv">i</span> <span class="o">=</span> <span class="mi">0</span>
  <span class="k">while</span> <span class="kc">true</span> <span class="p">{</span>
    <span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="k">if</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">40</span> <span class="p">{</span>
      <span class="k">continue</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nb">print</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="s">&quot; </span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">50</span> <span class="p">{</span>
      <span class="k">break</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="nb">println</span><span class="p">(</span><span class="s">&quot;bye</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="p">}</span>
</pre></div></div></div>
<div class="paragraph"><p>It prints the following output:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>40 41 42 43 44 45 46 47 48 49 50 bye</pre>
</div></div>
<div class="paragraph"><p>Golo does not support <span class="monospaced">break</span> statements to labels like Java does. In fact, this is a <span class="monospaced">goto</span>
statement in disguise.</p></div>
</div>
<div class="sect2">
<h3 id="_why_no_value_from_most_control_flow_constructions">Why no value from most control flow constructions?</h3>
<div class="paragraph"><p>Some programming languages return values from selected control flow constructions, with the returned
value being the evaluation of the last statement in a block. This can be handy in some situations
such as the following code snippet in Scala:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="n">println</span><span class="o">(</span><span class="k">if</span> <span class="o">(</span><span class="mi">4</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="s">&quot;even&quot;</span> <span class="k">else</span> <span class="s">&quot;odd&quot;</span><span class="o">)</span>
</pre></div></div></div>
<div class="paragraph"><p>The Golo original author recognizes and appreciates the expressiveness of such construct. However,
he often finds it harder to spot the returned values with such constructs, and he thought that
trading a few keystrokes for <strong>explicitness</strong> was better than shorter construct based in
<strong>implicitness</strong>.</p></div>
<div class="paragraph"><p>Therefore, most Golo control flow constructions do not return values, and programmers are instead
required to extract a variable or provide an explicit <span class="monospaced">return</span> statement.</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_exceptions">Exceptions</h2>
<div class="sectionbody">
<div class="paragraph"><p>Exception handling in Golo is simple. There is no distinction between <strong>checked</strong> and <strong>unchecked</strong>
exceptions.</p></div>
<div class="sect2">
<h3 id="_raising_exceptions">Raising exceptions</h3>
<div class="paragraph"><p>Golo provides 2 predefined functions for raising exceptions:</p></div>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">raise(message)</span> throws a <span class="monospaced">java.lang.RuntimeException</span> with a message given as a string, and
</p>
</li>
<li>
<p>
<span class="monospaced">raise(message, cause)</span> does the same and specifies a cause which must be an instance of
  <span class="monospaced">java.lang.Throwable</span>.
</p>
</li>
</ul></div>
<div class="paragraph"><p>Throwing an exception is thus as easy as:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="k">if</span> <span class="nf">somethingIsWrong</span><span class="p">()</span> <span class="p">{</span>
  <span class="nb">raise</span><span class="p">(</span><span class="s">&quot;Woops!</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="p">}</span>
</pre></div></div></div>
</div>
<div class="sect2">
<h3 id="_raising_specialized_exceptions">Raising specialized exceptions</h3>
<div class="paragraph"><p>Of course not every exception shall be an instance of <span class="monospaced">java.lang.RuntimeException</span>. When a more
specialized type is required, you may simply instantiate a Java exception and throw it using the
<span class="monospaced">throw</span> keyword as in the following example:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kn">module</span> <span class="nn">golotest.execution.Exceptions</span>

<span class="kn">import</span> <span class="nn">java.lang.RuntimeException</span>

<span class="kd">function</span> <span class="nf">runtimeException</span> <span class="o">=</span> <span class="p">{</span>
  <span class="k">throw</span> <span class="nf">RuntimeException</span><span class="p">(</span><span class="s">&quot;w00t</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="p">}</span>
</pre></div></div></div>
</div>
<div class="sect2">
<h3 id="_exception_handling">Exception handling</h3>
<div class="paragraph"><p>Exception handling uses the familiar <span class="monospaced">try / catch</span>, <span class="monospaced">try / catch / finally</span> and <span class="monospaced">try / finally</span>
constructions. Their semantics are the same as found in other languages such as Java, especially
regarding the handling of <span class="monospaced">finally</span> blocks.</p></div>
<div class="paragraph"><p>The following snippets show each exception handling form.</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="c"># Good old try / catch</span>
<span class="k">try</span> <span class="p">{</span>
  <span class="nf">something</span><span class="p">()</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">e</span><span class="o">:</span> <span class="nf">printStackTrace</span><span class="p">()</span>
<span class="p">}</span>

<span class="c"># A try / finally</span>
<span class="k">try</span> <span class="p">{</span>
  <span class="nf">doSomething</span><span class="p">()</span>
<span class="p">}</span> <span class="k">finally</span> <span class="p">{</span>
  <span class="nf">cleanup</span><span class="p">()</span>
<span class="p">}</span>

<span class="c"># Full try / catch / finally construct</span>
<span class="k">try</span> <span class="p">{</span>
  <span class="nf">doSomething</span><span class="p">()</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">e</span><span class="o">:</span> <span class="nf">printStackTrace</span><span class="p">()</span>
  <span class="k">case</span> <span class="p">{</span>
    <span class="k">when</span> <span class="n">e</span> <span class="ow">oftype</span> <span class="nn">IOException.class</span> <span class="p">{</span>
      <span class="nb">println</span><span class="p">(</span><span class="s">&quot;Oh, an I/O exception that I was expecting!</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="k">when</span> <span class="n">e</span> <span class="ow">oftype</span> <span class="nn">SecurityException.class</span> <span class="p">{</span>
      <span class="nb">println</span><span class="p">(</span><span class="s">&quot;Damn, I didn&#39;t expect a security problem...</span><span class="s2">&quot;</span><span class="p">)</span>
      <span class="k">throw</span> <span class="n">e</span>
    <span class="p">}</span>
    <span class="k">otherwise</span> <span class="p">{</span>
      <span class="k">throw</span> <span class="n">e</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span> <span class="k">finally</span> <span class="p">{</span>
  <span class="nf">cleanup</span><span class="p">()</span>
<span class="p">}</span>
</pre></div></div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Tip" src="data:image/png;base64,
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">
</td>
<td class="content">Because Golo is a weakly typed dynamic language, you need to check for the exception type
with the <span class="monospaced">oftype</span> operator. In a statically typed language like Java, you would instead have several
<span class="monospaced">catch</span> clauses with the exception reference given a specific type. We suggest that you take
advantage of the <span class="monospaced">case</span> branching statement.</td>
</tr></table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_closures">Closures</h2>
<div class="sectionbody">
<div class="paragraph"><p>Golo supports <strong>closures</strong>, which means that functions can be treated as first-class citizen.</p></div>
<div class="sect2">
<h3 id="_defining_and_using_a_closure">Defining and using a closure</h3>
<div class="paragraph"><p>Defining a closure is straightforward as it derives from the way a function can be defined:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">let</span> <span class="nv">adder</span> <span class="o">=</span> <span class="p">|</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">|</span> <span class="p">{</span>
  <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
<span class="p">}</span>
</pre></div></div></div>
<div class="paragraph"><p>At runtime, a closure is an instance of <span class="monospaced">java.lang.invoke.MethodHandle</span>. This means that you can do
all the operations that method handles support, such as invoking them or inserting arguments as
illustrated in the following example:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">let</span> <span class="nv">adder</span> <span class="o">=</span> <span class="p">|</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">|</span> <span class="p">{</span>
  <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
<span class="p">}</span>
<span class="nb">println</span><span class="p">(</span><span class="n">adder</span><span class="o">:</span> <span class="nf">invokeWithArguments</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>

<span class="kd">let</span> <span class="nv">addToTen</span> <span class="o">=</span> <span class="n">adder</span><span class="o">:</span> <span class="nf">bindTo</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="nb">println</span><span class="p">(</span><span class="n">addToTen</span><span class="o">:</span> <span class="nf">invokeWithArguments</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
</pre></div></div></div>
<div class="paragraph"><p>As one would expect, this prints <span class="monospaced">3</span> and <span class="monospaced">12</span>.</p></div>
</div>
<div class="sect2">
<h3 id="_compact_closures">Compact closures</h3>
<div class="paragraph"><p>Golo supports a compact form of closures for the cases where their body consists of a single
expression. The example above can be simplified as:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">let</span> <span class="nv">adder</span> <span class="o">=</span> <span class="p">|</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
</pre></div></div></div>
<div class="paragraph"><p>You may also use this compact form when defining regular functions, as in:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kn">module</span> <span class="nn">Foo</span>

<span class="k">local</span> <span class="kd">function</span> <span class="nf">sayHello</span> <span class="o">=</span> <span class="p">|</span><span class="n">who</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="s">&quot;Hello </span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">who</span> <span class="o">+</span> <span class="s">&quot;!</span><span class="s2">&quot;</span>

<span class="c"># Prints &quot;Hello Julien!&quot;</span>
<span class="kd">function</span> <span class="nf">main</span> <span class="o">=</span> <span class="p">|</span><span class="n">args</span><span class="p">|</span> <span class="p">{</span>
  <span class="nb">println</span><span class="p">(</span><span class="nf">sayHello</span><span class="p">(</span><span class="s">&quot;Julien</span><span class="s2">&quot;</span><span class="p">))</span>
<span class="p">}</span>
</pre></div></div></div>
</div>
<div class="sect2">
<h3 id="_calling_closures">Calling closures</h3>
<div class="paragraph"><p>While you may take advantage of closures being method handles and call them using
<span class="monospaced">invokeWithArguments</span>, there is a (much) better way.</p></div>
<div class="paragraph"><p>When you have a reference to a closure, you may simply call it as a regular function. The previous
<span class="monospaced">adder</span> example can be equivalently rewritten as:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">let</span> <span class="nv">adder</span> <span class="o">=</span> <span class="p">|</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
<span class="nb">println</span><span class="p">(</span><span class="nf">adder</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>

<span class="kd">let</span> <span class="nv">addToTen</span> <span class="o">=</span> <span class="n">adder</span><span class="o">:</span> <span class="nf">bindTo</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="nb">println</span><span class="p">(</span><span class="nf">addToTen</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
</pre></div></div></div>
</div>
<div class="sect2">
<h3 id="_limitations">Limitations</h3>
<div class="paragraph"><p>Closures have access to the lexical scope of their defining environment. Consider this example:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">function</span> <span class="nf">plus_3</span> <span class="o">=</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nv">foo</span> <span class="o">=</span> <span class="mi">3</span>
  <span class="k">return</span> <span class="p">|</span><span class="n">x</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="n">x</span> <span class="o">+</span> <span class="n">foo</span>
<span class="p">}</span>
</pre></div></div></div>
<div class="paragraph"><p>The <span class="monospaced">plus_3</span> function returns a closure that has access to the <span class="monospaced">foo</span> reference, just as you would
expect. The <span class="monospaced">foo</span> reference is said to have been <strong>captured</strong> and made available in the closure.</p></div>
<div class="paragraph"><p>It is important to <strong>note that captured references are constants within the closure</strong>. Consider the
following example:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">var</span> <span class="nv">a</span> <span class="o">=</span> <span class="mi">1</span>
<span class="kd">let</span> <span class="nv">f</span> <span class="o">=</span> <span class="p">{</span>
  <span class="n">a</span> <span class="o">=</span> <span class="mi">2</span>   <span class="c"># Compilation error!</span>
<span class="p">}</span>
</pre></div></div></div>
<div class="paragraph"><p>The compilation fails because although <span class="monospaced">a</span> is declared using <span class="monospaced">var</span> in its original scope, it is
actually passed as an argument to the <span class="monospaced">f</span> closure. Because function parameters are implicitly
constant references, this results in a compilation error.</p></div>
<div class="paragraph"><p>That being said, a closure has a reference on the same object as its defining environment, so a
mutable object is a sensible way to pass data back from a closure as a side-effect, as in:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">let</span> <span class="nv">list</span> <span class="o">=</span> <span class="nn">java.util.LinkedList</span><span class="p">()</span>
<span class="kd">let</span> <span class="nv">pump_it</span> <span class="o">=</span> <span class="p">{</span>
  <span class="n">list</span><span class="o">:</span> <span class="nf">add</span><span class="p">(</span><span class="s">&quot;I heard you say</span><span class="s2">&quot;</span><span class="p">)</span>
  <span class="n">list</span><span class="o">:</span> <span class="nf">add</span><span class="p">(</span><span class="s">&quot;Hey!</span><span class="s2">&quot;</span><span class="p">)</span>
  <span class="n">list</span><span class="o">:</span> <span class="nf">add</span><span class="p">(</span><span class="s">&quot;Hey!</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="p">}</span>
<span class="nf">pump_it</span><span class="p">()</span>
<span class="nb">println</span><span class="p">(</span><span class="n">list</span><span class="p">)</span>
</pre></div></div></div>
<div class="paragraph"><p>which prints <span class="monospaced">[I heard you say, Hey!, Hey!]</span>.</p></div>
</div>
<div class="sect2">
<h3 id="_closures_to_single_method_interfaces">Closures to single-method interfaces</h3>
<div class="paragraph"><p>The Java SE APIs have plenty of interfaces with a single method: <span class="monospaced">java.util.concurrent.Callable</span>,
<span class="monospaced">java.lang.Runnable</span>, <span class="monospaced">javax.swing.ActionListener</span>, etc.</p></div>
<div class="paragraph"><p>The predefined function <span class="monospaced">asInterfaceInstance</span> can be used to convert a method handle or Golo closure
to an instance of a specific interface.</p></div>
<div class="paragraph"><p>Here is how one could pass an action listener to a <span class="monospaced">javax.swing.JButton</span>:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">let</span> <span class="nv">button</span> <span class="o">=</span> <span class="nf">JButton</span><span class="p">(</span><span class="s">&quot;Click me!</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="kd">let</span> <span class="nv">handler</span> <span class="o">=</span> <span class="p">|</span><span class="n">event</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="nb">println</span><span class="p">(</span><span class="s">&quot;Clicked!</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="n">button</span><span class="o">:</span> <span class="nf">addActionListener</span><span class="p">(</span><span class="nb">asInterfaceInstance</span><span class="p">(</span><span class="nn">ActionListener.class</span><span class="p">,</span> <span class="n">handler</span><span class="p">))</span>
</pre></div></div></div>
<div class="paragraph"><p>Because the <span class="monospaced">asInterfaceInstance</span> call consumes some readability budget, you may refactor it with a
local function as in:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="k">local</span> <span class="kd">function</span> <span class="nf">listener</span> <span class="o">=</span> <span class="p">|</span><span class="n">handler</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="nb">asInterfaceInstance</span><span class="p">(</span><span class="nn">ActionListener.class</span><span class="p">,</span> <span class="n">handler</span><span class="p">)</span>

<span class="c"># (...)</span>
<span class="kd">let</span> <span class="nv">button</span> <span class="o">=</span> <span class="nf">JButton</span><span class="p">(</span><span class="s">&quot;Click me!</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="n">button</span><span class="o">:</span> <span class="nf">addActionListener</span><span class="p">(</span><span class="nf">listener</span><span class="p">(|</span><span class="n">event</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="nb">println</span><span class="p">(</span><span class="s">&quot;Clicked!</span><span class="s2">&quot;</span><span class="p">)))</span>
</pre></div></div></div>
<div class="paragraph"><p>Here is another example that uses the <span class="monospaced">java.util.concurrent</span> APIs to obtain an executor, pass it a
task, fetch the result with a <span class="monospaced">Future</span> object then shut it down:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">function</span> <span class="nf">give_me_hey</span> <span class="o">=</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nv">executor</span> <span class="o">=</span> <span class="nn">Executors.newSingleThreadExecutor</span><span class="p">()</span>
  <span class="kd">let</span> <span class="nv">future</span> <span class="o">=</span> <span class="n">executor</span><span class="o">:</span> <span class="nf">submit</span><span class="p">(</span><span class="nb">asInterfaceInstance</span><span class="p">(</span><span class="nn">Callable.class</span><span class="p">,</span> <span class="o">-&gt;</span> <span class="s">&quot;hey!</span><span class="s2">&quot;</span><span class="p">))</span>
  <span class="kd">let</span> <span class="nv">result</span> <span class="o">=</span> <span class="n">future</span><span class="o">:</span> <span class="nf">get</span><span class="p">()</span>
  <span class="n">executor</span><span class="o">:</span> <span class="nf">shutdown</span><span class="p">()</span>
  <span class="k">return</span> <span class="n">result</span>
<span class="p">}</span>
</pre></div></div></div>
</div>
<div class="sect2">
<h3 id="_direct_closure_passing_works">Direct closure passing works</h3>
<div class="paragraph"><p>When a function or method parameter of a Java API expects a single method interface type, you
can pass a closure directly, as in:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="c"># (...)</span>
<span class="kd">let</span> <span class="nv">button</span> <span class="o">=</span> <span class="nf">JButton</span><span class="p">(</span><span class="s">&quot;Click me!</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="n">button</span><span class="o">:</span> <span class="nf">addActionListener</span><span class="p">(|</span><span class="n">event</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="nb">println</span><span class="p">(</span><span class="s">&quot;Clicked!</span><span class="s2">&quot;</span><span class="p">))</span>
</pre></div></div></div>
<div class="paragraph"><p>Note that this causes the creation of a method handle proxy object for each function or method
invocation. For performance-sensitive contexts, we suggest that you use either <span class="monospaced">asInterfaceInstance</span>
or the <span class="monospaced">to</span> conversion method described hereafter.</p></div>
</div>
<div class="sect2">
<h3 id="_conversion_to_single_method_interfaces">Conversion to single-method interfaces</h3>
<div class="paragraph"><p>Instead of using <span class="monospaced">asInterfaceInstance</span>, you may use a <strong>class augmentation</strong> which is described later in this
documentation. In short, it allows you to call a <span class="monospaced">to</span> method on instances of <span class="monospaced">MethodHandle</span>, which
in turn calls <span class="monospaced">asInterfaceInstance</span>. Back to the previous examples, the next 2 lines are equivalent:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="c"># Calling asInterfaceInstance</span>
<span class="n">future</span> <span class="o">=</span> <span class="n">executor</span><span class="o">:</span> <span class="nf">submit</span><span class="p">(</span><span class="nb">asInterfaceInstance</span><span class="p">(</span><span class="nn">Callable.class</span><span class="p">,</span> <span class="o">-&gt;</span> <span class="s">&quot;hey!</span><span class="s2">&quot;</span><span class="p">))</span>

<span class="c"># Using a class augmentation</span>
<span class="n">future</span> <span class="o">=</span> <span class="n">executor</span><span class="o">:</span> <span class="nf">submit</span><span class="p">((</span><span class="o">-&gt;</span> <span class="s">&quot;hey!</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">:</span> <span class="nf">to</span><span class="p">(</span><span class="nn">Callable.class</span><span class="p">))</span>
</pre></div></div></div>
</div>
<div class="sect2">
<h3 id="_getting_a_reference_to_a_closure_golo_function">Getting a reference to a closure / Golo function</h3>
<div class="paragraph"><p>You may also take advantage of the predefined <span class="monospaced">fun</span> function to obtain a reference to a closure, as
in:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">golotest.Closures</span>

<span class="k">local</span> <span class="kd">function</span> <span class="nf">local_fun</span> <span class="o">=</span> <span class="p">|</span><span class="n">x</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">1</span>

<span class="kd">function</span> <span class="nf">call_local_fun</span> <span class="o">=</span> <span class="p">{</span>

  <span class="c"># local_fun, with a parameter</span>
  <span class="kd">var</span> <span class="nv">f</span> <span class="o">=</span> <span class="nb">fun</span><span class="p">(</span><span class="s">&quot;local_fun</span><span class="s2">&quot;</span><span class="p">,</span> <span class="nn">golotest.Closures.module</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

  <span class="c"># ...or just like this if there is only 1 local_fun definition</span>
  <span class="n">f</span> <span class="o">=</span> <span class="nb">fun</span><span class="p">(</span><span class="s">&quot;local_fun</span><span class="s2">&quot;</span><span class="p">,</span> <span class="nn">golotest.Closures.module</span><span class="p">)</span>

  <span class="k">return</span> <span class="nf">f</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="p">}</span>
</pre></div></div></div>
<div class="paragraph"><p>Last but not least, we have an even shorter notation if function are not overridden:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">golotest.Closures</span>

<span class="k">local</span> <span class="kd">function</span> <span class="nf">local_fun</span> <span class="o">=</span> <span class="p">|</span><span class="n">x</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">1</span>

<span class="kd">function</span> <span class="nf">call_local_fun</span> <span class="o">=</span> <span class="p">{</span>

  <span class="c"># In the current module</span>
  <span class="kd">var</span> <span class="nv">f</span> <span class="o">=</span> <span class="o">^</span><span class="nb">fun</span>

  <span class="c"># ...or with a full module name</span>
  <span class="n">f</span> <span class="o">=</span> <span class="o">^</span><span class="nn">golotest.Closures</span><span class="p">::</span><span class="nb">fun</span>

  <span class="k">return</span> <span class="nf">f</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="p">}</span>
</pre></div></div></div>
</div>
<div class="sect2">
<h3 id="_binding_and_composing">Binding and composing</h3>
<div class="paragraph"><p>Because closure references are just instances of <span class="monospaced">java.lang.invoke.MethodHandle</span>, you can bind its
first argument using the <span class="monospaced">bindTo(value)</span> method. If you need to bind an argument at another position
than 0, you may take advantage of the <span class="monospaced">bindAt(position, value)</span> augmentation:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">let</span> <span class="nv">diff</span> <span class="o">=</span> <span class="p">|</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="n">a</span> <span class="o">-</span> <span class="n">b</span>
<span class="kd">let</span> <span class="nv">minus10</span> <span class="o">=</span> <span class="n">diff</span><span class="o">:</span> <span class="nf">bindAt</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>

<span class="c"># 10</span>
<span class="nb">println</span><span class="p">(</span><span class="nf">minus10</span><span class="p">(</span><span class="mi">20</span><span class="p">))</span>
</pre></div></div></div>
<div class="paragraph"><p>You may compose function using the <span class="monospaced">andThen</span> augmentation method:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">let</span> <span class="nv">f</span> <span class="o">=</span> <span class="p">(|</span><span class="n">x</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span><span class="o">:</span> <span class="nf">andThen</span><span class="p">(|</span><span class="n">x</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="n">x</span> <span class="o">-</span> <span class="mi">10</span><span class="p">)</span><span class="o">:</span> <span class="nf">andThen</span><span class="p">(|</span><span class="n">x</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="n">x</span> <span class="o">*</span> <span class="mi">100</span><span class="p">)</span>

<span class="c"># -500</span>
<span class="nb">println</span><span class="p">(</span><span class="nf">f</span><span class="p">(</span><span class="mi">4</span><span class="p">))</span>
</pre></div></div></div>
</div>
<div class="sect2">
<h3 id="_calling_functions_that_return_functions">Calling functions that return functions</h3>
<div class="paragraph"><p>Given that functions are first-class objects in Golo, you may define functions (or closures) that
return functions, as in:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">let</span> <span class="nv">f</span> <span class="o">=</span> <span class="p">|</span><span class="n">x</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="p">|</span><span class="n">y</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="p">|</span><span class="n">z</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="o">-&gt;</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span> <span class="o">+</span> <span class="n">z</span>
</pre></div></div></div>
<div class="paragraph"><p>You could use intermediate references to use the <span class="monospaced">f</span> function above:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">let</span> <span class="nv">f1</span> <span class="o">=</span> <span class="nf">f</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="kd">let</span> <span class="nv">f2</span> <span class="o">=</span> <span class="nf">f1</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="kd">let</span> <span class="nv">f3</span> <span class="o">=</span> <span class="nf">f2</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>

<span class="c"># Prints &#39;6&#39;</span>
<span class="nb">println</span><span class="p">(</span><span class="nf">f3</span><span class="p">())</span>
</pre></div></div></div>
<div class="paragraph"><p>Golo supports a nicer syntax if you don&#8217;t need intermediate references:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="c"># Prints &#39;6&#39;</span>
<span class="nb">println</span><span class="p">(</span><span class="nf">f</span><span class="p">(</span><span class="mi">1</span><span class="p">)(</span><span class="mi">2</span><span class="p">)(</span><span class="mi">3</span><span class="p">)())</span>
</pre></div></div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Important" src="data:image/png;base64,
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
EQn3XQAAAABJRU5ErkJggg==">
</td>
<td class="content">
<div class="paragraph"><p>This syntax only works following a function or method invocation, not on expressions. This means
that:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="n">foo</span><span class="o">:</span> <span class="nf">bar</span><span class="p">()(</span><span class="s">&quot;baz</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div></div></div>
<div class="paragraph"><p>is valid, while:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="p">(</span><span class="n">foo</span><span class="o">:</span> <span class="nf">bar</span><span class="p">())(</span><span class="s">&quot;baz</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div></div></div>
<div class="paragraph"><p>is not. Let us say that "It is not a bug, it is a feature".</p></div>
</td>
</tr></table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_predefined_functions">Predefined functions</h2>
<div class="sectionbody">
<div class="paragraph"><p>Every Golo module definition comes with <span class="monospaced">gololang.Predefined</span> as a default import. It provides
useful functions.</p></div>
<div class="sect2">
<h3 id="_console_output">Console output</h3>
<div class="paragraph"><p><span class="monospaced">print</span> and <span class="monospaced">println</span> do just what you would expect.</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="nb">print</span><span class="p">(</span><span class="s">&quot;Hey</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">println</span><span class="p">()</span>

<span class="nb">println</span><span class="p">(</span><span class="s">&quot;Hey</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div></div></div>
</div>
<div class="sect2">
<h3 id="_console_input">Console input</h3>
<div class="paragraph"><p><span class="monospaced">readln()</span> or <span class="monospaced">readln(strMessage)</span> reads a single line of text from the console. It always returns a
string.</p></div>
<div class="paragraph"><p><span class="monospaced">readPassword()</span> or <span class="monospaced">readPassword(strPassword)</span> reads a password from the console with echoing
disabled. It always returns a string.  There are also <span class="monospaced">secureReadPassword()</span> and
<span class="monospaced">secureReadPassword(strPassword)</span> variants that return a <span class="monospaced">char[]</span> array.</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">let</span> <span class="nv">name</span> <span class="o">=</span> <span class="nb">readln</span><span class="p">(</span><span class="s">&quot;what&#39;s your name? </span><span class="s2">&quot;</span><span class="p">)</span>
<span class="kd">let</span> <span class="nv">value</span> <span class="o">=</span> <span class="nb">readln</span><span class="p">()</span>
<span class="kd">let</span> <span class="nv">pwd</span> <span class="o">=</span> <span class="nf">readpwd</span><span class="p">(</span><span class="s">&quot;type your password:</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div></div></div>
</div>
<div class="sect2">
<h3 id="_number_type_conversions">Number type conversions</h3>
<div class="paragraph"><p>The following functions convert any number of string value to another number type:
<span class="monospaced">intValue(n)</span>, <span class="monospaced">longValue(n)</span>, <span class="monospaced">charValue(n)</span>, <span class="monospaced">doubleValue(n)</span> and <span class="monospaced">floatValue(n)</span>.</p></div>
<div class="paragraph"><p>The usual Java type narrowing or widening conventions apply.</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">let</span> <span class="nv">i</span> <span class="o">=</span> <span class="nf">intValue</span><span class="p">(</span><span class="s">&quot;666</span><span class="s2">&quot;</span><span class="p">)</span>   <span class="c"># 666 (string to integer)</span>
<span class="kd">let</span> <span class="nv">j</span> <span class="o">=</span> <span class="nf">intValue</span><span class="p">(</span><span class="mf">1.234</span><span class="p">)</span>   <span class="c"># 1 (double to integer)</span>
<span class="kd">let</span> <span class="nv">k</span> <span class="o">=</span> <span class="nf">intValue</span><span class="p">(</span><span class="il">666_L</span><span class="p">)</span>   <span class="c"># 666 (long to integer)</span>
<span class="c"># etc</span>
</pre></div></div></div>
</div>
<div class="sect2">
<h3 id="_exceptions_2">Exceptions</h3>
<div class="paragraph"><p><span class="monospaced">raise</span> can be used to throw a <span class="monospaced">java.lang.RuntimeException</span>. It comes in two forms: one with a
message as a string, and one with a message and a cause.</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="k">try</span> <span class="p">{</span>
  <span class="o">...</span>
  <span class="nb">raise</span><span class="p">(</span><span class="s">&quot;Somehow something is wrong</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="p">{</span>
  <span class="o">...</span>
  <span class="nb">raise</span><span class="p">(</span><span class="s">&quot;Something was wrong, and here is the cause</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
<span class="p">}</span>
</pre></div></div></div>
</div>
<div class="sect2">
<h3 id="_preconditions">Preconditions</h3>
<div class="paragraph"><p>Preconditions are useful, especially in a dynamically-typed language.</p></div>
<div class="paragraph"><p><span class="monospaced">require</span> can check for a boolean expression along with an error message. In case of error, it
throws an <span class="monospaced">AssertionError</span>.</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">function</span> <span class="nf">foo</span> <span class="o">=</span> <span class="p">|</span><span class="n">a</span><span class="p">|</span> <span class="p">{</span>
  <span class="nf">require</span><span class="p">(</span><span class="n">a</span> <span class="ow">oftype</span> <span class="nn">String.class</span><span class="p">,</span> <span class="s">&quot;a must be a String</span><span class="s2">&quot;</span><span class="p">)</span>
  <span class="o">...</span>
<span class="p">}</span>
</pre></div></div></div>
<div class="paragraph"><p>You may also use <span class="monospaced">requireNotNull</span> that&#8230; well&#8230; checks that its argument is not <span class="monospaced">null</span>:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">function</span> <span class="nf">foo</span> <span class="o">=</span> <span class="p">|</span><span class="n">a</span><span class="p">|</span> <span class="p">{</span>
  <span class="nf">requireNotNull</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
  <span class="o">...</span>
<span class="p">}</span>
</pre></div></div></div>
</div>
<div class="sect2">
<h3 id="_arrays_deprecated">Arrays (deprecated)</h3>
<div class="paragraph"><p>Golo provides functions to deal with Java arrays (<span class="monospaced">Object[]</span>).</p></div>
<div class="ulist"><ul>
<li>
<p>
the <span class="monospaced">Array</span> function takes a variable number of arguments and returns a Java array from them,
</p>
</li>
<li>
<p>
the <span class="monospaced">aget</span> function takes an array and an index to return the element at that position,
</p>
</li>
<li>
<p>
the <span class="monospaced">aset</span> function takes an array, an index and a value to set the element at that position,
</p>
</li>
<li>
<p>
the <span class="monospaced">alength</span> function returns the length of an array,
</p>
</li>
<li>
<p>
the <span class="monospaced">atoList</span> function calls the <span class="monospaced">java.util.Arrays.asList(values...)</span> method.
</p>
</li>
</ul></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">let</span> <span class="nv">a</span> <span class="o">=</span> <span class="nf">Array</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="nf">require</span><span class="p">(</span><span class="nf">alength</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">,</span> <span class="s">&quot;a must be of length 3</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nf">require</span><span class="p">(</span><span class="nf">aget</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&quot;the first element shall be 1</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nf">aset</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">666</span><span class="p">)</span>
<span class="nf">require</span><span class="p">(</span><span class="nf">aget</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">==</span> <span class="mi">666</span><span class="p">,</span> <span class="s">&quot;the new first element shall be 666</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div></div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==">
</td>
<td class="content">Those functions were introduced for the needs of the early developments of Golo. They will
be removed at some point before the release of version 0, so please use the corresponding array
object methods instead: <span class="monospaced">get</span>, <span class="monospaced">set</span>, <span class="monospaced">length</span>, &#8230;</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="_ranges">Ranges</h3>
<div class="paragraph"><p>The <span class="monospaced">range</span> function yields an iterable range over either <span class="monospaced">Integer</span>, <span class="monospaced">Long</span> or
<span class="monospaced">Character</span> bounds:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="c"># Prints 1 2 (...) 100</span>
<span class="k">foreach</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">101</span><span class="p">)</span> <span class="p">{</span>
  <span class="nb">print</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="s">&quot; </span><span class="s2">&quot;</span><span class="p">)</span>
<span class="p">}</span>

<span class="c"># Prints a b c d</span>
<span class="k">foreach</span> <span class="n">c</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;e&#39;</span><span class="p">)</span> <span class="p">{</span>
  <span class="nb">print</span><span class="p">(</span><span class="n">c</span> <span class="o">+</span> <span class="s">&quot; </span><span class="s2">&quot;</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">let</span> <span class="nv">r</span> <span class="o">=</span> <span class="nf">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span><span class="o">:</span> <span class="nf">incrementBy</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="nb">println</span><span class="p">(</span><span class="s">&quot;Start: </span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">r</span><span class="o">:</span> <span class="nf">from</span><span class="p">())</span>
<span class="nb">println</span><span class="p">(</span><span class="s">&quot;End: </span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">r</span><span class="o">:</span> <span class="nf">to</span><span class="p">())</span>
<span class="k">foreach</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">r</span> <span class="p">{</span>
  <span class="nb">println</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
<span class="p">}</span>

<span class="nb">println</span><span class="p">(</span><span class="s">&quot;Increment: </span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">r</span><span class="o">:</span> <span class="nf">increment</span><span class="p">())</span>
</pre></div></div></div>
<div class="paragraph"><p>The lower bound is inclusive, the upper bound is exclusive.</p></div>
<div class="paragraph"><p>A <span class="monospaced">range</span> with a lower bound greater than its upper bound will be empty, except
if the increment is explicitly negative:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="c"># Prints nothing</span>
<span class="k">foreach</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
  <span class="nb">print</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="s">&quot; </span><span class="s2">&quot;</span><span class="p">)</span>
<span class="p">}</span>

<span class="c"># Prints 3 2 1</span>
<span class="k">foreach</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span><span class="o">:</span> <span class="nf">incrementBy</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
  <span class="nb">print</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="s">&quot; </span><span class="s2">&quot;</span><span class="p">)</span>
<span class="p">}</span>

<span class="c"># Prints 0 -2 -4</span>
<span class="k">foreach</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">6</span><span class="p">)</span><span class="o">:</span><span class="nf">decrementBy</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
  <span class="nb">print</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="s">&quot; </span><span class="s2">&quot;</span><span class="p">)</span>
<span class="p">}</span>
</pre></div></div></div>
<div class="paragraph"><p>The <span class="monospaced">reversed_range</span> function is an alias for <span class="monospaced">range</span> with an increment of -1,
such that <span class="monospaced">reversed_range(5, 1)</span> is the same as <span class="monospaced">range(5, 1): decrementBy(1)</span>.</p></div>
<div class="paragraph"><p>When <span class="monospaced">range</span> is called with only one value, it is used as the upper bound, the
lower one being a default value (0 for numbers, <em>A</em> for chars). For example,
<span class="monospaced">range(5) == range(0, 5)</span> and <span class="monospaced">range('Z') == range('A', 'Z')</span>. In the same way,
<span class="monospaced">reversed_range(5) == reversed_range(5, 0)</span>.</p></div>
<div class="paragraph"><p>Two ranges are equals if they have the same bounds and increment.</p></div>
<div class="paragraph"><p>A range can also be defined with the literal notation <span class="monospaced">[begin..end]</span>, which is
equivalent to <span class="monospaced">range(begin, end)</span>.</p></div>
</div>
<div class="sect2">
<h3 id="_closures_2">Closures</h3>
<div class="paragraph"><p>Given a closure reference or a method handle, one can convert it to an instance of an interface with
a single method declaration, as in:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="k">local</span> <span class="kd">function</span> <span class="nf">listener</span> <span class="o">=</span> <span class="p">|</span><span class="n">handler</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="nb">asInterfaceInstance</span><span class="p">(</span><span class="nn">ActionListener.class</span><span class="p">,</span> <span class="n">handler</span><span class="p">)</span>

<span class="c"># (...)</span>
<span class="kd">let</span> <span class="nv">button</span> <span class="o">=</span> <span class="nf">JButton</span><span class="p">(</span><span class="s">&quot;Click me!</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="n">button</span><span class="o">:</span> <span class="nf">addActionListener</span><span class="p">(</span><span class="nf">listener</span><span class="p">(|</span><span class="n">event</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="nb">println</span><span class="p">(</span><span class="s">&quot;Clicked!</span><span class="s2">&quot;</span><span class="p">)))</span>
</pre></div></div></div>
<div class="paragraph"><p>It is possible to test if an object is a closure or not with the <span class="monospaced">isClosure</span> function. This is
useful to support values and delayed evaluation, as in:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="k">if</span> <span class="nf">isClosure</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">map</span><span class="o">:</span> <span class="nf">put</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="nf">value</span><span class="p">())</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
  <span class="n">map</span><span class="o">:</span> <span class="nf">put</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
<span class="p">}</span>
</pre></div></div></div>
<div class="paragraph"><p>You can get a reference to a closure using the predefined <span class="monospaced">fun</span> function:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">golotest.Closures</span>

<span class="k">local</span> <span class="kd">function</span> <span class="nf">local_fun</span> <span class="o">=</span> <span class="p">|</span><span class="n">x</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">1</span>

<span class="kd">function</span> <span class="nf">call_local_fun</span> <span class="o">=</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nv">f</span> <span class="o">=</span> <span class="nb">fun</span><span class="p">(</span><span class="s">&quot;local_fun</span><span class="s2">&quot;</span><span class="p">,</span> <span class="nn">golotest.Closures.module</span><span class="p">)</span>
  <span class="k">return</span> <span class="nf">f</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="p">}</span>
</pre></div></div></div>
<div class="paragraph"><p>Because functions may be overloaded, there is a form that accepts an extra parameter for specifying
the number of parameters:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">golotest.Closures</span>

<span class="k">local</span> <span class="kd">function</span> <span class="nf">local_fun</span> <span class="o">=</span> <span class="p">|</span><span class="n">x</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">1</span>

<span class="kd">function</span> <span class="nf">call_local_fun</span> <span class="o">=</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nv">f</span> <span class="o">=</span> <span class="nb">fun</span><span class="p">(</span><span class="s">&quot;local_fun</span><span class="s2">&quot;</span><span class="p">,</span> <span class="nn">golotest.Closures.module</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
  <span class="k">return</span> <span class="nf">f</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="p">}</span>
</pre></div></div></div>
</div>
<div class="sect2">
<h3 id="_file_i_o">File I/O</h3>
<div class="paragraph"><p>Sometimes it is very desirable to read the content of a text file. The <span class="monospaced">fileToText</span> function does just that:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">let</span> <span class="nv">text</span> <span class="o">=</span> <span class="nf">fileToText</span><span class="p">(</span><span class="s">&quot;/some/file.txt</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s">&quot;UTF-8</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div></div></div>
<div class="paragraph"><p>The first parameter is either a <span class="monospaced">java.lang.String</span>, a <span class="monospaced">java.io.File</span> or a <span class="monospaced">java.nio.file.Path</span>. The second parameter
represents the encoding charset, either as a <span class="monospaced">java.lang.String</span> or a <span class="monospaced">java.nio.charset.Charset</span>.</p></div>
<div class="paragraph"><p>We can write some text to a file, too:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="nf">textToFile</span><span class="p">(</span><span class="s">&quot;Hello, world!</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s">&quot;/foo/bar.txt</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div></div></div>
<div class="paragraph"><p>The <span class="monospaced">textToFile</span> function overwrites existing files, and creates new ones if needed.</p></div>
<div class="paragraph"><p>These functions are provided for convenience, so if you need more fine-grained control over reading and writing text
then we suggest that you look into the <span class="monospaced">java.nio.file</span> package.</p></div>
<div class="paragraph"><p>In addition, if you need to verify that a file exists, you can use the <span class="monospaced">fileExists</span> function.</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="k">if</span> <span class="nf">fileExists</span><span class="p">(</span><span class="s">&quot;/foo/bar.txt</span><span class="s2">&quot;</span><span class="p">)</span> <span class="p">{</span>
  <span class="nb">println</span><span class="p">(</span><span class="s">&quot;file found!</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="p">}</span>
</pre></div></div></div>
<div class="paragraph"><p>As in the other File I/O methods, the parameter is either a <span class="monospaced">java.lang.String</span>, a <span class="monospaced">java.io.File</span> or a <span class="monospaced">java.nio.file.Path</span>.
The <span class="monospaced">fileExists</span> function will return true if the file exists, false if it doesn&#8217;t.</p></div>
<div class="paragraph"><p>If you need the current path of execution, you can use the <span class="monospaced">currentDir</span> function.</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="nb">println</span><span class="p">(</span><span class="nf">currentDir</span><span class="p">())</span>
</pre></div></div></div>
</div>
<div class="sect2">
<h3 id="_array_types">Array types</h3>
<div class="paragraph"><p>Golo does not provide a literal syntax for array types, such as <span class="monospaced">Object[].class</span> in Java.</p></div>
<div class="paragraph"><p>Instead, we provide 3 helper functions.</p></div>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">isArray(object)</span>: returns a boolean if <span class="monospaced">object</span> is an array.
</p>
</li>
<li>
<p>
<span class="monospaced">objectArrayType()</span>: returns <span class="monospaced">Object[].class</span>.
</p>
</li>
<li>
<p>
<span class="monospaced">arrayTypeOf(type)</span>: given <span class="monospaced">type</span> as a <span class="monospaced">java.lang.Class</span>, returns an array of type <span class="monospaced">type[]</span>.
</p>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="_misc">Misc.</h3>
<div class="paragraph"><p><span class="monospaced">mapEntry</span> gives instances of <span class="monospaced">java.util.AbstractMap.SimpleEntry</span>, and is used as follows:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">let</span> <span class="nv">e</span> <span class="o">=</span> <span class="nf">mapEntry</span><span class="p">(</span><span class="s">&quot;foo</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s">&quot;bar</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c"># prints &quot;foo =&gt; bar&quot;</span>
<span class="nb">println</span><span class="p">(</span><span class="n">e</span><span class="o">:</span> <span class="nf">getKey</span><span class="p">()</span> <span class="o">+</span> <span class="s">&quot; =&gt; </span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">e</span><span class="o">:</span> <span class="nf">getValue</span><span class="p">())</span>
</pre></div></div></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_class_augmentations">Class augmentations</h2>
<div class="sectionbody">
<div class="paragraph"><p>Many dynamic languages support the ability to extend existing classes by adding new methods to them.
You may think of categories in Objective-C and Groovy, or <strong>open classes</strong> in Ruby.</p></div>
<div class="paragraph"><p>This is generally implemented by providing <strong>meta-classes</strong>. When some piece of code adds a method
<span class="monospaced">foo</span> to, say, <span class="monospaced">SomeClass</span>, then all instances of <span class="monospaced">SomeClass</span> get that new <span class="monospaced">foo</span> method. While very
convenient, such an open system may lead to well-known conflicts between the added methods.</p></div>
<div class="paragraph"><p>Golo provides a more limited but explicit way to add methods to existing classes in the form of
<strong>class augmentations</strong>.</p></div>
<div class="sect2">
<h3 id="_wrapping_a_string_with_a_function">Wrapping a string with a function</h3>
<div class="paragraph"><p>Let us motivate the value of <strong>augmentations</strong> by starting with the following example. Suppose that we would
like a function to wrap a string with a left and right string. We could do that in Golo as follows:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">function</span> <span class="nf">wrap</span> <span class="o">=</span> <span class="p">|</span><span class="n">left</span><span class="p">,</span> <span class="n">str</span><span class="p">,</span> <span class="n">right</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="n">left</span> <span class="o">+</span> <span class="n">str</span> <span class="o">+</span> <span class="n">right</span>

<span class="c"># (...)</span>
<span class="kd">let</span> <span class="nv">str</span> <span class="o">=</span> <span class="nf">wrap</span><span class="p">(</span><span class="s">&quot;(</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s">&quot;foo</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s">&quot;)</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">println</span><span class="p">(</span><span class="n">str</span><span class="p">)</span> <span class="c"># prints &quot;(abc)&quot;</span>
</pre></div></div></div>
<div class="paragraph"><p>Defining functions for such tasks makes perfect sense, but what if we could just add the <span class="monospaced">wrap</span>
method to all instances of <span class="monospaced">java.lang.String</span> instead?</p></div>
</div>
<div class="sect2">
<h3 id="_augmenting_classes">Augmenting classes</h3>
<div class="paragraph"><p>Defining an augmentation is a matter of adding a <span class="monospaced">augment</span> block in a module:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kn">module</span> <span class="nn">foo</span>

<span class="k">augment</span> <span class="nn">java.lang.String</span> <span class="p">{</span>
  <span class="kd">function</span> <span class="nf">wrap</span> <span class="o">=</span> <span class="p">|</span><span class="n">this</span><span class="p">,</span> <span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="n">left</span> <span class="o">+</span> <span class="n">this</span> <span class="o">+</span> <span class="n">right</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nf">wrapped</span> <span class="o">=</span> <span class="o">-&gt;</span> <span class="s">&quot;abc</span><span class="s2">&quot;</span><span class="o">:</span> <span class="nf">wrap</span><span class="p">(</span><span class="s">&quot;(</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s">&quot;)</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div></div></div>
<div class="paragraph"><p>More specifically:</p></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
a <span class="monospaced">augment</span> definition is made on a fully-qualified class name, and
</p>
</li>
<li>
<p>
an augmentation function takes the receiver object as its first argument, followed by optional
   arguments, and
</p>
</li>
<li>
<p>
there can be as many augmentation functions as you want, and
</p>
</li>
<li>
<p>
there can be as many augmentations as you want.
</p>
</li>
</ol></div>
<div class="paragraph"><p>It is a good convention to name the receiver <span class="monospaced">this</span>, but you are free to call it differently.</p></div>
<div class="paragraph"><p>Also, augmentation functions can take variable-arity arguments, as in:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="k">augment</span> <span class="nn">java.lang.String</span> <span class="p">{</span>

  <span class="kd">function</span> <span class="nf">concatWith</span> <span class="o">=</span> <span class="p">|</span><span class="n">this</span><span class="p">,</span> <span class="n">args</span><span class="o">...</span><span class="p">|</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nv">result</span> <span class="o">=</span> <span class="n">this</span>
    <span class="k">foreach</span><span class="p">(</span><span class="n">arg</span> <span class="ow">in</span> <span class="n">args</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">result</span> <span class="o">=</span> <span class="n">result</span> <span class="o">+</span> <span class="n">arg</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">result</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c"># (...)</span>
<span class="kd">function</span> <span class="nf">varargs</span> <span class="o">=</span> <span class="o">-&gt;</span> <span class="s">&quot;a</span><span class="s2">&quot;</span><span class="o">:</span> <span class="nf">concatWith</span><span class="p">(</span><span class="s">&quot;b</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s">&quot;c</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s">&quot;d</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div></div></div>
<div class="paragraph"><p>It should be noted that augmentations work with class hierarchies too. The following example adds an
augmentation to <span class="monospaced">java.util.Collection</span>, which also adds it to concrete subclasses such as <span class="monospaced">java.util.LinkedList</span>:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="k">augment</span> <span class="nn">java.util.Collection</span> <span class="p">{</span>
  <span class="kd">function</span> <span class="nf">plop</span> <span class="o">=</span> <span class="p">|</span><span class="n">this</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="s">&quot;plop!</span><span class="s2">&quot;</span>
<span class="p">}</span>

<span class="c"># (...)</span>
<span class="kd">function</span> <span class="nf">plop_in_a_list</span> <span class="o">=</span> <span class="o">-&gt;</span> <span class="nn">java.util.LinkedList</span><span class="p">()</span><span class="o">:</span> <span class="nf">plop</span><span class="p">()</span>
</pre></div></div></div>
</div>
<div class="sect2">
<h3 id="_augmentation_scopes_reusable_augmentations">Augmentation scopes, reusable augmentations</h3>
<div class="paragraph"><p>By default, an augmentation is only visible from its defining module.</p></div>
<div class="paragraph"><p><strong>Augmentations are clear and explicit as they
only affect the instances from which you have decided to make them visible.</strong></p></div>
<div class="paragraph"><p>It is advised to place reusable augmentations in separate module definitions. Then, a module that needs such
augmentations can make them available through imports.</p></div>
<div class="paragraph"><p>Suppose that you want to define augmentations for dealing with URLs from strings. You could define a
<span class="monospaced">string-url-augmentations.golo</span> module source as follows:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kn">module</span> <span class="nn">my.StringUrlAugmentations</span>

<span class="kn">import</span> <span class="nn">java.net</span>

<span class="k">augment</span> <span class="nn">java.lang.String</span> <span class="p">{</span>

  <span class="kd">function</span> <span class="nf">toURL</span> <span class="o">=</span> <span class="p">|</span><span class="n">this</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="nf">URL</span><span class="p">(</span><span class="n">this</span><span class="p">)</span>

  <span class="kd">function</span> <span class="nf">httpGet</span> <span class="o">=</span> <span class="p">|</span><span class="n">this</span><span class="p">|</span> <span class="p">{</span>
    <span class="c"># Open the URL, get a connection, grab the body as a string, etc</span>
    <span class="c"># (...)</span>
  <span class="p">}</span>

  <span class="c"># (...)</span>
<span class="p">}</span>
</pre></div></div></div>
<div class="paragraph"><p>Then, a module willing to take advantage of those augmentations can simply import their defining module:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kn">module</span> <span class="nn">my.App</span>

<span class="kn">import</span> <span class="nn">my.StringUrlAugmentations</span>

<span class="kd">function</span> <span class="nf">googPageBody</span> <span class="o">=</span> <span class="o">-&gt;</span> <span class="s">&quot;http://www.google.com/</span><span class="s2">&quot;</span><span class="o">:</span> <span class="nf">httpGet</span><span class="p">()</span>
</pre></div></div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Tip" src="data:image/png;base64,
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">
</td>
<td class="content">As a matter of style, we suggest that your module names end with <span class="monospaced">Augmentations</span>. Because importing a
module imports <strong>all</strong> of its augmentation definitions, we suggest that you modularize them with <strong>fine
taste</strong> (for what it means).</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="_named_augmentations">Named augmentations</h3>
<div class="paragraph"><p>It is possible for augmentations to have a name.
A named augmentation is a set of functions that can be applied to some
classes or structures.</p></div>
<div class="paragraph"><p>This can be seen as a kind of lightweight
<a href="http://en.wikipedia.org/wiki/Trait_%28computer_programming%29"><em>traits</em></a>, or
<a href="http://en.wikipedia.org/wiki/Mixin"><em>mixin</em></a>,
as found in Rust, Groovy or Scala.</p></div>
<div class="paragraph"><p>Named augmentations are defined with the <span class="monospaced">augmentation</span> keyword.</p></div>
<div class="paragraph"><p>As an example:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="n">augmentation</span> <span class="n">FooBar</span> <span class="o">=</span> <span class="p">{</span>
  <span class="kd">function</span> <span class="nf">foo</span> <span class="o">=</span> <span class="p">|</span><span class="n">this</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="s">&quot;foo</span><span class="s2">&quot;</span>
  <span class="kd">function</span> <span class="nf">bar</span> <span class="o">=</span> <span class="p">|</span><span class="n">this</span><span class="p">,</span> <span class="n">a</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="n">this</span><span class="o">:</span> <span class="nf">length</span><span class="p">()</span> <span class="o">+</span> <span class="n">a</span>
<span class="p">}</span>

<span class="n">augmentation</span> <span class="n">Spamable</span> <span class="o">=</span> <span class="p">{</span>
  <span class="kd">function</span> <span class="nf">spam</span> <span class="o">=</span> <span class="p">|</span><span class="n">this</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="s">&quot;spam</span><span class="s2">&quot;</span>
<span class="p">}</span>
</pre></div></div></div>
<div class="paragraph"><p>A named augmentation is applied using the <span class="monospaced">augment ... with</span> construct, as in</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="k">augment</span> <span class="nn">java.util.Collection</span> <span class="n">with</span> <span class="n">FooBar</span>

<span class="k">augment</span> <span class="n">MyStruct</span> <span class="n">with</span> <span class="n">Spamable</span>

<span class="k">augment</span> <span class="nn">java.lang.String</span> <span class="n">with</span> <span class="n">FooBar</span><span class="p">,</span> <span class="n">Spamable</span>
</pre></div></div></div>
<div class="paragraph"><p>When applying several named augmentations, they are used in the application
order. For instance, if <span class="monospaced">AugmentA</span> and <span class="monospaced">AugmentB</span> define both the method
<span class="monospaced">meth</span>, and we augment <span class="monospaced">augment java.lang.String with AugmentA, AugmentB</span>, then
calling <span class="monospaced">"": meth()</span> will call <span class="monospaced">AugmentA::meth</span>.</p></div>
<div class="paragraph"><p>Augmentation rules about scopes and reusability apply.
So, if we create a module</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kn">module</span> <span class="nn">MyAugmentations</span>

<span class="n">augmentation</span> <span class="n">Searchable</span> <span class="o">=</span> <span class="p">{</span>
  <span class="kd">function</span> <span class="nf">search</span> <span class="o">=</span> <span class="p">|</span><span class="n">this</span><span class="p">,</span> <span class="n">value</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="o">...</span>
<span class="p">}</span>

<span class="k">augment</span> <span class="nn">java.util.Collection</span> <span class="n">with</span> <span class="n">Searchable</span>
</pre></div></div></div>
<div class="paragraph"><p>and import it, we can use the applied augmentation</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">MyAugmentations</span>

<span class="c">#...</span>
<span class="nb">list</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span><span class="o">:</span> <span class="nf">search</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div></div></div>
<div class="paragraph"><p>The augmentations defined in an other module can also be applied, provided they
are fully qualified or the module is imported:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="k">augment</span> <span class="nn">java.lang.String</span> <span class="n">with</span> <span class="nn">MyAugmentations.Searchable</span>
</pre></div></div></div>
<div class="paragraph"><p>or</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">MyAugmentations</span>

<span class="k">augment</span> <span class="nn">java.lang.String</span> <span class="n">with</span> <span class="n">Searchable</span>
</pre></div></div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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">
</td>
<td class="content">If several imported modules define augmentations with the same name, the
<strong>first</strong> imported one will be used.</td>
</tr></table>
</div>
<div class="paragraph"><p>The validity of the application is not checked at compile time. Thus augmenting
without importing the coresponding module, as in:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="k">augment</span> <span class="nn">java.lang.String</span> <span class="n">with</span> <span class="n">Searchable</span>
</pre></div></div></div>
<div class="paragraph"><p>will not raise an error, but trying to call <span class="monospaced">search</span> on a <span class="monospaced">String</span> will throw a
<span class="monospaced">java.lang.NoSuchMethodError: class java.lang.String::search</span> at <strong>runtime</strong>.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Important" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAALa0lEQVRogdWZa2wc1RXHfzM7O/te
P9e1vXHSmEdjx3YeDkkaF6REKRRCEDSEFNkRjdSWSsgC2iqoRWqLQKiqIBg1NOQDiMeHtkQIQkRR
S9S4aWwgCQoUgl232KkT28J21l6vd3d2dx79sDuTXdtre03Uqlc62tl53Pv/n3PuOffcKxiGwf9z
E//XAL5sk65WR0a6AaDrOjMtKwgCoigiCAKCIAhXa9wvTcAEHhoc5KMjR7jw3nucf+MN67k/GCS4
YQOr77yTpl27kGUZm81mXC0ywlLnQDbwEwcO0P2b3yz4jV5RwZq2Nm5/5BH8fj+SJGGz2b4UiSUR
MAzD0DSNEwcO8MdHHln8d0AcsAUCfOe551h7yy04HA7sdvuSrVEwAV3XjdDgIC/v2cOl06dznqWA
JCAAMvn9MwlEgF1PP8037rsPt9uN3W5fkjUKIqDrujF+4QLP3XQTU0NDOc8UIAa4y8sJtrQQqK/H
7XQSfv99Pn/nHQRRxNB16/0EEAUatm9n76uv4vP5cDgcBZNYNIF84I0MEK20lIZvf5sNe/dSWlqK
1+vFxBEZHubT3/+evqNHmR4dJRWP55BevW0bra+8gt/vx+l0IknSokksikA+8ElgClixYwc3799P
ZWUlTqczbz+x0VFOPvEEQ6dPE/niCwxdt0jUbd1K68svU1xcXBCJBQnMBz5eWkrL/v2s++Y3KSsr
QxQXlxc7f/5zBjo7CQ8NoadSKKQn943t7dyyf79FYjHuNC8BwzAMVVV56Z57+OzNN3PAJ8vK+FZH
B2s2b55X6/nahRMnOP7TnxLOKEXJyO2/+hVf37uXoqIinE6nmfzyksirMjNUvvGjH+WAVwG1vJxb
Dhxg1bp1uFwuMwQWJCu3bWPN3r24SkoAcGbA/OXXv2bws8+IRqOkUqlZGX1RBAzDMHRd51+nTvHe
wYNX7gPTQMO+faxav56SkpIlgTdlU3s7TXv2IGUs6AGioRDH2tuZmJggFouhqirGPCzyEUBVVX7X
1pZzPwI0fP/7bNmzh7KysrzADh8+zP3338++ffs4ePBg3vdEUWTDD3/IsuZmRLsdW4bEpd5eOp99
lnA4jKIoaJqWl8QsAqb2Txw4kDNp40BxXR0bWlspLy/PC+qZZ55hdHQUSZIYHByko6ODxx57bBZw
cy3kq6xk6y9/ib+qCgQBmbQ7nT50iIs9PUSjUZLJJIZhzEliLgKMDQzwp5/9zLqnkQ51W3/xCwKB
AE6nMy+B3t5exsfH6ezspLe3l3g8zuHDh2cBz5bKpibWtrXhLi0FwA3owNsPP8zExATxeBxVVecy
QC4Bc+L+taNjluvU33031dddN6/2BUGgpKSE/v5+JicncweaA3i2tDz8MIHrr0eU0gsQBzDW10ff
yZNEIhESicScrpRDQNd1xgYG+OC3v7XuJQBXIMDWn/yEioqKeUGMjY0hCAKKoszS1MjIyLzfAmx/
4gmKli0DQcBJOmicfOopJicnicfjJoG5LWBq/+Szz+a8oABNe/bgdrvndR1BEKiqqiIejxOLxWYR
CAaDC0alqjVrqGxowFNWhkDalUKff07f3/5mWSFTLFksLAK6rjN+4UKO9lXAUV7O2tbWeaNOthZl
WZ4FHlh0aN3y4IPIHk+6L8AGvNfRQTgctuZCthVEU/u6rnPutddyBk0A9bt3W4us+QY2fbyurg6v
15vTzw033LBoAsHmZoLNzdgcDgBcQKi/n391dTE9PU0ymcyxgkmAVCrF+4cO5WjfFgiwfoGwOTOy
lJWVUVtba1mkUAKCILClvR1veTkA9owVPnzllZy8YFnA1H5/dzfTw8PWgziwcutWfD4fsiwvCNyU
xsZG3G43lZWVVl933XVXQQSq161j+ebNlhXcwBdnzxIOh60lhmkFEUDTNP7++uvWgBrp6mrNHBk3
H/BsAtFoFEdm8GAwyMaNGwsiIAgCjbt346uosKwgAp8cPWolNj1THInmsqHn6FGLQApY1thIxcqV
+Hy+WX6+0ETesWMHLpcLWZZ54IEHCgYvCAKrbrsNyem0JrQEXMzkhKzlBaKu61z+97+ZHhnJmbwr
tm2zJu5CWp8pra2tNDU1sXPnTtrb25dEQBAEvrplC57MXJCB8XPniEQixONxa6Uq6brOQHd3jvvo
QP2ttxZUpMxsL7zwwpK+AyxLXrt9Oxe6uxFEEXvGZc4fO0bVD35AMplM1wuapjGYtbugAp5AgKLq
aquu/W/JTEs37dqFqihWzSADk8PD1jzQNC3tQtmrThUINDbm+H4h0tfXx6OPPsodd9xBW1sbPT09
BQPPluu2b7fWRxIQ6usjFotZBCRN06wZbbZAfT1FRUWWKQtpzz//PMPDw/T09DA1NcXo6CjHjx+f
11Xma95AwHJjEdB0HUVRrhCYuRGrAiXBoFUqFtq6u7sZHx9nJBMUurq65uxnsX0Hm5v56A9/ANIJ
LXrpEolEwgqlUqZQyPlo6OOPlzx5ly1bxnBWQmxpackBW6hSBEC02axrpqasNZGmaek8kN0kYPDj
j1FVdUlz4Mknn6Surs4Cb5aUhYZiUy59+GGOgm3V1WiadiUPCILAV9autV5wAaM9PXQeOWJprBBp
aGjgxIkTpFIpOjs7aWxsXBJwUwZOnUKZmgLS2zl4vUjSlV1XURRFqtavv3IDKAVe/O53efPxx69a
SCxUBs+c4dV77+Vyfz+xy5eBdG3iX7ECm81m9S2JokiwuZmiujrCPT1AuqgOAqcef5zzL77Imt27
uemhhyipqVnYZ5cw8bPbR0eOcOall7g8MEB4aIhEJAJk9qOAwKZNyLJsHpQgRKNRIxQK0XPmDH/+
3vdQQ6G8na/YtIk199zDypYWVmzceFWAT1y8yMWzZzn/9tv0vfsudqeTlKIQHRvL2QSOAqU7d/K1
W2/l2muvpba2Nl3iJhIJIxKJMDw8TO/Zs3zw4x+jTUzkHVCw2fCUleHw+QiuXYu/upqqhgb8VVUY
hkFNczPFweCs7z556y3r+vyxYwiiyD+PHwdBwNB1krEYhqYRC4UwdB2D9LJmmnRtXHz77VTfeCPL
ly+ntraWmpqa9MaaqqqGoiiEQiGGhoYYHBzk00OHiHR2LkqDNlnG7nJhd7nQswqN+ZogiuipFMlY
DDWRgBl5KEF6woqAUFFByc03U756NZWVlSxfvpyamhoCgQAejwdB13VDVVVisRihUIiRkRGGh4cZ
+sc/GO3qIt7VhZGJAle7mVpWuVKDCBng8jXX4N68Gc8111BUVER5eTnV1dVUV1cTCASuFFqGYaDr
upFKpYjH40xMTDA+Ps7Y2Bjj4+OEw2EmenqYPneO1OAgZCWpxTY9S9QMcLhyHGUDRI8HqbISZ309
zoYGnE4nHo8Hv99PaWkpgUCAiooK6/DE4XCkI1HW2a6hqiqKojA9Pc3k5KQl4XCY6elpotFoetuk
v59UKIR66RLToRBJTcMYHUWIRvMSMPO6rbY2/SsIOFatQpYk5NWrkSQJWZZxOBy43W68Xi9+v5+i
oiJKSkooLi7G5/PhdruRZdnads85HzD3hpLJJIqiEIvFiEajRCIRIpEI0WiUWCxGPB631iOKopBK
pazUbi4Oc7Y+snKCzWbDZrMhSRKSJGG3262w6HK5cLlceDwevF4vPp8Pr9eL2+3G5XLhcDjMkxuE
TNibdcBhnv9qmkYqlSKZTJJIJFAUhXg8jqIoKIpCIpGwSCSTSVRVtWSuk3qTiAnebrfngHc4HDid
TpxOJy6Xy7qWZdk6wZzrxCbvCY1JRNd1NE3LAWgSM69ngp+PgCiK1gF3NhFTzHvmO+Y3wCzw8xLI
JpL5tYCZpEyw2f/nWt1ag2UtM0x3Mq1iAp1j+bH0M7KFCGWDnfmbd8AMnuxfUzL/C0rp/wFnFd4n
EQn3XQAAAABJRU5ErkJggg==">
</td>
<td class="content">As for every augmentation, no checks are made that the augmentation
can be applied to the augmented class. For instance, augmenting <span class="monospaced">java.lang.Number</span>
with the previous <span class="monospaced">FooBar</span> augmentation will raise
<span class="monospaced">java.lang.NoSuchMethodError: class java.lang.Integer::length</span>
at <strong>runtime</strong> when trying to call <span class="monospaced">1:bar(1)</span>. Calling <span class="monospaced">1:foo()</span> will be OK however.</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="_augmentations_resolution_order">Augmentations Resolution Order</h3>
<div class="paragraph"><p>The augmentations resolution order is as follows:</p></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
native java method (i.e. an augmentation can&#8217;t override a native java method),
</p>
</li>
<li>
<p>
locally applied augmentations:
</p>
<div class="olist loweralpha"><ol class="loweralpha">
<li>
<p>
simple augmentations: <span class="monospaced">augment MyType { ... }</span>,
</p>
</li>
<li>
<p>
named augmentations: <span class="monospaced">augmentation Foo = { ... }</span>
       and <span class="monospaced">augment MyType with Foo</span> in the current module. Multiple
       applications are searched in the application order,
</p>
</li>
<li>
<p>
externally defined named augmentations with fully qualified
       name: <span class="monospaced">augmentation Foo = { ... }</span> in module <span class="monospaced">Augmentations</span>, and
       <span class="monospaced">augment MyType with Augmentations.Foo</span> in the current module,
</p>
</li>
<li>
<p>
named augmentation defined in an imported module:
       <span class="monospaced">augmentation Foo = { ... }</span> in module <span class="monospaced">Augmentations</span>, and
       <span class="monospaced">augment MyType with Foo</span> in the current module that <span class="monospaced">import Augmentations</span>
       (imported module are searched in the importation order),
</p>
</li>
</ol></div>
</li>
<li>
<p>
augmentations applied in imported modules:
   using the same order than locally applied ones, in the importation order.
</p>
</li>
</ol></div>
<div class="paragraph"><p>The first matching method found is used. It is thus possible to “override” an
augmentation with a more higher priority one (in the sens of the previous order).</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Tip" src="data:image/png;base64,
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">
</td>
<td class="content">Since importing a module imports all the applied augmentations, and given
the somewhat complex resolution order when involving simple and named
augmentations, being local, external or imported, and involving class
hierarchies, knowing which method will be applied on a given type can be difficult.
A good modularisation and a careful application are recommended.</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="_standard_augmentations">Standard augmentations</h3>
<div class="paragraph"><p>Golo comes with a set of pre-defined augmentations over collections, strings, closures and more.</p></div>
<div class="paragraph"><p>These augmentation do not require a special import, and they are defined in the
<a href="./golodoc/gololang/StandardAugmentations"><span class="monospaced">gololang.StandardAugmentations</span></a> module.</p></div>
<div class="paragraph"><p>Here is an example:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">let</span> <span class="nv">odd</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span><span class="o">:</span> <span class="nf">filter</span><span class="p">(|</span><span class="n">n</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="p">(</span><span class="n">n</span> <span class="o">%</span> <span class="mi">2</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>

<span class="kd">let</span> <span class="nv">m</span> <span class="o">=</span> <span class="nb">map</span><span class="p">[]</span>
<span class="nb">println</span><span class="p">(</span><span class="n">m</span><span class="o">:</span> <span class="nf">getOrElse</span><span class="p">(</span><span class="s">&quot;foo</span><span class="s2">&quot;</span><span class="p">,</span> <span class="o">-&gt;</span> <span class="s">&quot;bar</span><span class="s2">&quot;</span><span class="p">))</span>
</pre></div></div></div>
<div class="paragraph"><p>The full set of standard augmentations is documented in the generated <strong>golodoc</strong> (hint: look for
<span class="monospaced">doc/golodoc</span> in the Golo distribution).</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_structs">Structs</h2>
<div class="sectionbody">
<div class="paragraph"><p>Golo allows the definition of simple structures using the <span class="monospaced">struct</span> keyword. They resemble structures
in procedural languages such as C <span class="monospaced">struct</span> or Pascal <strong>records</strong>. They are useful to store data when
the set of named entries is fixed.</p></div>
<div class="sect2">
<h3 id="_definition">Definition</h3>
<div class="paragraph"><p>Structures are defined at the module-level:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kn">module</span> <span class="nn">sample</span>

<span class="kd">struct</span> <span class="nc">Person</span> <span class="o">=</span> <span class="p">{</span> <span class="n">name</span><span class="p">,</span> <span class="n">age</span><span class="p">,</span> <span class="n">email</span> <span class="p">}</span>

<span class="kd">function</span> <span class="nf">main</span> <span class="o">=</span> <span class="p">|</span><span class="n">args</span><span class="p">|</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nv">p1</span> <span class="o">=</span> <span class="nf">Person</span><span class="p">(</span><span class="s">&quot;Mr Bean</span><span class="s2">&quot;</span><span class="p">,</span> <span class="mi">54</span><span class="p">,</span> <span class="s">&quot;bean@gmail.com</span><span class="s2">&quot;</span><span class="p">)</span>
  <span class="nb">println</span><span class="p">(</span><span class="n">p1</span><span class="o">:</span> <span class="nf">name</span><span class="p">())</span>
  <span class="kd">let</span> <span class="nv">p2</span> <span class="o">=</span> <span class="nf">Person</span><span class="p">()</span><span class="o">:</span> <span class="nf">name</span><span class="p">(</span><span class="s">&quot;John</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">:</span> <span class="nf">age</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span><span class="o">:</span> <span class="nf">email</span><span class="p">(</span><span class="s">&quot;john@b-root.com</span><span class="s2">&quot;</span><span class="p">)</span>
  <span class="nb">println</span><span class="p">(</span><span class="n">p2</span><span class="o">:</span> <span class="nf">age</span><span class="p">())</span>
<span class="p">}</span>
</pre></div></div></div>
<div class="paragraph"><p>When declaring a structure, it also defines two factory functions: one with no arguments, and one
with all arguments in their order of declaration in the <span class="monospaced">struct</span> statement. When not initialized,
member values are <span class="monospaced">null</span>.</p></div>
<div class="paragraph"><p>Each member yields a <strong>getter</strong> and a <strong>setter</strong> method: given a member <span class="monospaced">a</span>, the getter is method <span class="monospaced">a()</span>
while the setter is method <span class="monospaced">a(newValue)</span>. It should be noted that setter methods return the
structure instance which makes it possible to chain calls as illustrated in the previous example
while building <span class="monospaced">p2</span>.</p></div>
</div>
<div class="sect2">
<h3 id="_jvm_existence">JVM existence</h3>
<div class="paragraph"><p>Each <span class="monospaced">struct</span> is compiled to a self-contained JVM class.</p></div>
<div class="paragraph"><p>Given:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kn">module</span> <span class="nn">sample</span>

<span class="kd">struct</span> <span class="nc">Point</span> <span class="o">=</span> <span class="p">{</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="p">}</span>
</pre></div></div></div>
<div class="paragraph"><p>a class <span class="monospaced">sample.types.Point</span> is being generated.</p></div>
<div class="paragraph"><p>It is important to note that:</p></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
each <span class="monospaced">struct</span> class is <span class="monospaced">final</span>,
</p>
</li>
<li>
<p>
each <span class="monospaced">struct</span> class inherits from <span class="monospaced">gololang.GoloStruct</span>,
</p>
</li>
<li>
<p>
proper definitions of <span class="monospaced">toString()</span>, <span class="monospaced">hashCode()</span> and <span class="monospaced">equals()</span> are being provided.
</p>
</li>
</ol></div>
</div>
<div class="sect2">
<h3 id="_span_class_monospaced_tostring_span_behavior"><span class="monospaced">toString()</span> behavior</h3>
<div class="paragraph"><p>The <span class="monospaced">toString()</span> method is being overridden to provide a meaningful description of a structure
content.</p></div>
<div class="paragraph"><p>Given the following program:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kn">module</span> <span class="nn">test</span>

<span class="kd">struct</span> <span class="nc">Point</span> <span class="o">=</span> <span class="p">{</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="p">}</span>

<span class="kd">function</span> <span class="nf">main</span> <span class="o">=</span> <span class="p">|</span><span class="n">args</span><span class="p">|</span> <span class="p">{</span>
  <span class="nb">println</span><span class="p">(</span><span class="nf">Point</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="p">}</span>
</pre></div></div></div>
<div class="paragraph"><p>running it prints the following console output:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">struct</span> <span class="nc">Point</span><span class="p">{</span><span class="n">x</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">2</span><span class="p">}</span>
</pre></div></div></div>
</div>
<div class="sect2">
<h3 id="_immutable_structs">Immutable structs</h3>
<div class="paragraph"><p>Structure instances are mutable by default. Golo generates a factory function with the <span class="monospaced">Immutable</span>
prefix to directly build immutable instances:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kn">module</span> <span class="nn">test</span>

<span class="kd">struct</span> <span class="nc">Point</span> <span class="o">=</span> <span class="p">{</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="p">}</span>

<span class="kd">function</span> <span class="nf">main</span> <span class="o">=</span> <span class="p">|</span><span class="n">args</span><span class="p">|</span> <span class="p">{</span>

  <span class="kd">let</span> <span class="nv">p</span> <span class="o">=</span> <span class="nf">ImmutablePoint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
  <span class="nb">println</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>

  <span class="k">try</span> <span class="p">{</span>
    <span class="c"># Fails! (p is immutable)</span>
    <span class="n">p</span><span class="o">:</span> <span class="nf">x</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="n">expected</span><span class="p">)</span> <span class="p">{</span>
    <span class="nb">println</span><span class="p">(</span><span class="n">expected</span><span class="o">:</span> <span class="nf">getMessage</span><span class="p">())</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div></div></div>
</div>
<div class="sect2">
<h3 id="_copying">Copying</h3>
<div class="paragraph"><p>Instances of a structure provide copying methods:</p></div>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">copy()</span> returns a <strong>shallow</strong> copy of the structure instance, and
</p>
</li>
<li>
<p>
<span class="monospaced">frozenCopy()</span> returns a read-only <strong>shallow</strong> copy.
</p>
</li>
</ul></div>
<div class="paragraph"><p>Trying to invoke any setter methods on an instance obtained through <span class="monospaced">frozenCopy()</span> raises a
<span class="monospaced">java.lang.IllegalStateException</span>.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Important" src="data:image/png;base64,
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
EQn3XQAAAABJRU5ErkJggg==">
</td>
<td class="content">The result of calling <span class="monospaced">copy()</span> on a frozen instance <strong>is a mutable</strong> copy, not a frozen
copy.</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="_span_class_monospaced_equals_span_and_span_class_monospaced_hashcode_span_semantics"><span class="monospaced">equals()</span> and <span class="monospaced">hashCode()</span> semantics</h3>
<div class="paragraph"><p>Golo structures honor the contract of Java objects regarding equality and hash codes.</p></div>
<div class="paragraph"><p>By default, <span class="monospaced">equals()</span> and <span class="monospaced">hashCode()</span> are the ones of <span class="monospaced">java.lang.Object</span>. Indeed, structure
members can be changed, so they cannot be used to compute stable values.</p></div>
<div class="paragraph"><p>Nevertheless, structure instances returned by <span class="monospaced">frozenCopy()</span> have stable members, and members are
being used.</p></div>
<div class="paragraph"><p>Consider the following program:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kn">module</span> <span class="nn">test</span>

<span class="kd">struct</span> <span class="nc">Point</span> <span class="o">=</span> <span class="p">{</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="p">}</span>

<span class="kd">function</span> <span class="nf">main</span> <span class="o">=</span> <span class="p">|</span><span class="n">args</span><span class="p">|</span> <span class="p">{</span>

  <span class="kd">let</span> <span class="nv">p1</span> <span class="o">=</span> <span class="nf">Point</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
  <span class="kd">let</span> <span class="nv">p2</span> <span class="o">=</span> <span class="nf">Point</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
  <span class="kd">let</span> <span class="nv">p3</span> <span class="o">=</span> <span class="n">p1</span><span class="o">:</span> <span class="nf">frozenCopy</span><span class="p">()</span>
  <span class="kd">let</span> <span class="nv">p4</span> <span class="o">=</span> <span class="n">p1</span><span class="o">:</span> <span class="nf">frozenCopy</span><span class="p">()</span>

  <span class="nb">println</span><span class="p">(</span><span class="s">&quot;p1 == p2 </span><span class="s2">&quot;</span> <span class="o">+</span> <span class="p">(</span><span class="n">p1</span> <span class="o">==</span> <span class="n">p2</span><span class="p">))</span>
  <span class="nb">println</span><span class="p">(</span><span class="s">&quot;p1 == p3 </span><span class="s2">&quot;</span> <span class="o">+</span> <span class="p">(</span><span class="n">p1</span> <span class="o">==</span> <span class="n">p3</span><span class="p">))</span>
  <span class="nb">println</span><span class="p">(</span><span class="s">&quot;p3 == p4 </span><span class="s2">&quot;</span> <span class="o">+</span> <span class="p">(</span><span class="n">p3</span> <span class="o">==</span> <span class="n">p4</span><span class="p">))</span>

  <span class="nb">println</span><span class="p">(</span><span class="s">&quot;#p1 </span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">p1</span><span class="o">:</span> <span class="nf">hashCode</span><span class="p">())</span>
  <span class="nb">println</span><span class="p">(</span><span class="s">&quot;#p2 </span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">p2</span><span class="o">:</span> <span class="nf">hashCode</span><span class="p">())</span>
  <span class="nb">println</span><span class="p">(</span><span class="s">&quot;#p3 </span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">p3</span><span class="o">:</span> <span class="nf">hashCode</span><span class="p">())</span>
  <span class="nb">println</span><span class="p">(</span><span class="s">&quot;#p4 </span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">p4</span><span class="o">:</span> <span class="nf">hashCode</span><span class="p">())</span>
<span class="p">}</span>
</pre></div></div></div>
<div class="paragraph"><p>the console output is the following:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="n">p1</span> <span class="o">==</span> <span class="n">p2</span> <span class="kc">false</span>
<span class="n">p1</span> <span class="o">==</span> <span class="n">p3</span> <span class="kc">false</span>
<span class="n">p3</span> <span class="o">==</span> <span class="n">p4</span> <span class="kc">true</span>
<span class="c">#p1 1555845260</span>
<span class="c">#p2 104739310</span>
<span class="c">#p3 994</span>
<span class="c">#p4 994</span>
</pre></div></div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Tip" src="data:image/png;base64,
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">
</td>
<td class="content">It is recommended that you use <span class="monospaced">Immutable&lt;name of struct&gt;(...)</span> or <span class="monospaced">frozenCopy()</span> when you can,
especially when storing values into collections.</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="_helper_methods">Helper methods</h3>
<div class="paragraph"><p>A number of helper methods are being generated:</p></div>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">members()</span> returns a tuple of the member names,
</p>
</li>
<li>
<p>
<span class="monospaced">values()</span> returns a tuple with the current member values,
</p>
</li>
<li>
<p>
<span class="monospaced">isFrozen()</span> returns a boolean to check for frozen structure instances,
</p>
</li>
<li>
<p>
<span class="monospaced">iterator()</span> provides an iterator over a structure where each element is a tuple <span class="monospaced">[member, value]</span>,
</p>
</li>
<li>
<p>
<span class="monospaced">get(name)</span> returns the value of a member by its name,
</p>
</li>
<li>
<p>
<span class="monospaced">set(name, value)</span> updates the value of a member by its name, and returns the same structure.
</p>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="_private_members">Private members</h3>
<div class="paragraph"><p>By default, all members in a struct can be accessed. It is possible to make some elements private by
prefixing them with <span class="monospaced">_</span>, as in:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">struct</span> <span class="nc">Foo</span> <span class="o">=</span> <span class="p">{</span> <span class="n">a</span><span class="p">,</span> <span class="n">_b</span><span class="p">,</span> <span class="n">c</span> <span class="p">}</span>

<span class="c"># (...)</span>

<span class="kd">let</span> <span class="nv">foo</span> <span class="o">=</span> <span class="nf">Foo</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</pre></div></div></div>
<div class="paragraph"><p>In this case, <span class="monospaced">_b</span> is a private struct member. This means that <span class="monospaced">foo: _b()</span> and <span class="monospaced">foo: _b(666)</span> are
valid calls only if made from:</p></div>
<div class="ulist"><ul>
<li>
<p>
a function from the declaring module, or
</p>
</li>
<li>
<p>
an augmentation defined in the declaring module.
</p>
</li>
</ul></div>
<div class="paragraph"><p>Any call to, say, <span class="monospaced">foo: _b()</span> from another module will yield a <span class="monospaced">NoSuchMethodError</span> exception.</p></div>
<div class="paragraph"><p>Private struct members also have the following impact:</p></div>
<div class="ulist"><ul>
<li>
<p>
they do not appear in <span class="monospaced">members()</span> and <span class="monospaced">values()</span> calls, and
</p>
</li>
<li>
<p>
they are not iterated through <span class="monospaced">iterator()</span>-provided iterators, and
</p>
</li>
<li>
<p>
they are being used like other members in <span class="monospaced">equals()</span> and <span class="monospaced">hashCode()</span>, and
</p>
</li>
<li>
<p>
they do not appear in <span class="monospaced">toString()</span> representations.
</p>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="_augmenting_structs">Augmenting structs</h3>
<div class="paragraph"><p>Structs provide a simple data model, especially with private members for encapsulation.</p></div>
<div class="paragraph"><p>Augmenting structs is encouraged, as in:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kn">module</span> <span class="nn">Plop</span>

<span class="kd">struct</span> <span class="nc">Point</span> <span class="o">=</span> <span class="p">{</span> <span class="n">_id</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="p">}</span>

<span class="k">augment</span> <span class="nn">Plop.types.Point</span> <span class="p">{</span>

  <span class="kd">function</span> <span class="nf">str</span> <span class="o">=</span> <span class="p">|</span><span class="n">this</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="s">&quot;{id=</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">this</span><span class="o">:</span> <span class="nf">_id</span><span class="p">()</span> <span class="o">+</span> <span class="s">&quot;,x=</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">this</span><span class="o">:</span> <span class="nf">x</span><span class="p">()</span> <span class="o">+</span> <span class="s">&quot;,y=</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">this</span><span class="o">:</span> <span class="nf">y</span><span class="p">()</span> <span class="o">+</span> <span class="s">&quot;}</span><span class="s2">&quot;</span>
<span class="p">}</span>
</pre></div></div></div>
<div class="paragraph"><p>When an augmentation on a struct is defined <strong>within the same module</strong>, then you can omit the full
type name of the struct:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kn">module</span> <span class="nn">Plop</span>

<span class="kd">struct</span> <span class="nc">Point</span> <span class="o">=</span> <span class="p">{</span> <span class="n">_id</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="p">}</span>

<span class="k">augment</span> <span class="n">Point</span> <span class="p">{</span>

  <span class="kd">function</span> <span class="nf">str</span> <span class="o">=</span> <span class="p">|</span><span class="n">this</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="s">&quot;{id=</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">this</span><span class="o">:</span> <span class="nf">_id</span><span class="p">()</span> <span class="o">+</span> <span class="s">&quot;,x=</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">this</span><span class="o">:</span> <span class="nf">x</span><span class="p">()</span> <span class="o">+</span> <span class="s">&quot;,y=</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">this</span><span class="o">:</span> <span class="nf">y</span><span class="p">()</span> <span class="o">+</span> <span class="s">&quot;}</span><span class="s2">&quot;</span>
<span class="p">}</span>
</pre></div></div></div>
<div class="paragraph"><p>Again, it is important to note that augmentations can only access private struct members when they
originate from the same module.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==">
</td>
<td class="content">
<div class="title">Don&#8217;t do this at home</div>
<div class="paragraph"><p>Of course doing the following is a bad idea, with the concise augmentation taking over the
fully-qualified one:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kn">module</span> <span class="nn">Foo</span>

<span class="kd">struct</span> <span class="nc">Value</span> <span class="o">=</span> <span class="p">{</span> <span class="n">v</span> <span class="p">}</span>

<span class="k">augment</span> <span class="nn">Foo.types.Value</span> <span class="p">{</span>

  <span class="kd">function</span> <span class="nf">a</span> <span class="o">=</span> <span class="p">|</span><span class="n">this</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="s">&quot;a</span><span class="s2">&quot;</span>
<span class="p">}</span>

<span class="c"># This will discard the previous augmentation...</span>
<span class="k">augment</span> <span class="n">Value</span> <span class="p">{</span>

  <span class="kd">function</span> <span class="nf">b</span> <span class="o">=</span> <span class="p">|</span><span class="n">this</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="s">&quot;a</span><span class="s2">&quot;</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nf">check</span> <span class="o">=</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nv">v</span> <span class="o">=</span> <span class="nf">Value</span><span class="p">(</span><span class="mi">666</span><span class="p">)</span>

  <span class="c"># Ok</span>
  <span class="n">v</span><span class="o">:</span> <span class="nf">b</span><span class="p">()</span>

  <span class="c"># Fails, the concise augmentation overrides the fully-qualifed one</span>
  <span class="n">v</span><span class="o">:</span> <span class="nf">a</span><span class="p">()</span>
<span class="p">}</span>
</pre></div></div></div>
</td>
</tr></table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_dynamic_objects">Dynamic objects</h2>
<div class="sectionbody">
<div class="paragraph"><p>Dynamic objects can have values and methods being added and removed dynamically at runtime. You can
think of it as an enhancement over using hash maps and putting closures in them.</p></div>
<div class="sect2">
<h3 id="_creating_dynamic_objects">Creating dynamic objects</h3>
<div class="paragraph"><p>Creating a dynamic object is as simple as calling the <span class="monospaced">DynamicObject</span> function:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">let</span> <span class="nv">foo</span> <span class="o">=</span> <span class="nf">DynamicObject</span><span class="p">()</span>
</pre></div></div></div>
<div class="paragraph"><p>Dynamic objects have the following <strong>reserved</strong> methods, that is, methods that you cannot override:</p></div>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">define(name, value)</span> allows to define an object property, which can be either a value or a
  closure, and
</p>
</li>
<li>
<p>
<span class="monospaced">get(name)</span> gives the value or closure for a property name, or <span class="monospaced">null</span> if there is none, and
</p>
</li>
<li>
<p>
<span class="monospaced">undefine(name)</span> removes a property from the object, and
</p>
</li>
<li>
<p>
<span class="monospaced">mixin(dynobj)</span> mixes in all the properties of the dynamic object <span class="monospaced">dynobj</span>, and
</p>
</li>
<li>
<p>
<span class="monospaced">copy()</span> gives a copy of a dynamic object, and
</p>
</li>
<li>
<p>
<span class="monospaced">freeze()</span> locks an object, and calling <span class="monospaced">define</span> will raise an <span class="monospaced">IllegalStateException</span>, and
</p>
</li>
<li>
<p>
<span class="monospaced">isFrozen()</span> checks whether a dynamic object is frozen or not, and
</p>
</li>
<li>
<p>
<span class="monospaced">properties()</span> gives the set of entries in the dynamic object, and
</p>
</li>
<li>
<p>
<span class="monospaced">hasMethod(name)</span> checks if a method is defined or not in the dynamic object, and
</p>
</li>
<li>
<p>
<span class="monospaced">invoker(name, type)</span> which is mostly used by the Golo runtime internals, and
</p>
</li>
<li>
<p>
<span class="monospaced">fallback(handler)</span> defines a fallback behavior for property invocation.
</p>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="_defining_values">Defining values</h3>
<div class="paragraph"><p>Defining values also defines getter and setter methods, as illustrated by the next example:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">let</span> <span class="nv">person</span> <span class="o">=</span> <span class="nf">DynamicObject</span><span class="p">()</span><span class="o">:</span>
  <span class="nf">define</span><span class="p">(</span><span class="s">&quot;name</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s">&quot;MrBean</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">:</span>
  <span class="nf">define</span><span class="p">(</span><span class="s">&quot;email</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s">&quot;mrbean@gmail.com</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c"># prints &quot;Mr Bean&quot;</span>
<span class="nb">println</span><span class="p">(</span><span class="n">person</span><span class="o">:</span> <span class="nf">name</span><span class="p">())</span>

<span class="c"># prints &quot;Mr Beanz&quot;</span>
<span class="n">person</span><span class="o">:</span> <span class="nf">name</span><span class="p">(</span><span class="s">&quot;Mr Beanz</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">println</span><span class="p">(</span><span class="n">person</span><span class="o">:</span> <span class="nf">name</span><span class="p">())</span>
</pre></div></div></div>
<div class="paragraph"><p>Calling a setter method for a non-existent property defines it, hence the previous example can be
rewritten as:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">let</span> <span class="nv">person</span> <span class="o">=</span> <span class="nf">DynamicObject</span><span class="p">()</span><span class="o">:</span> <span class="nf">name</span><span class="p">(</span><span class="s">&quot;MrBean</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">:</span> <span class="nf">email</span><span class="p">(</span><span class="s">&quot;mrbean@gmail.com</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c"># prints &quot;Mr Bean&quot;</span>
<span class="nb">println</span><span class="p">(</span><span class="n">person</span><span class="o">:</span> <span class="nf">name</span><span class="p">())</span>

<span class="c"># prints &quot;Mr Beanz&quot;</span>
<span class="n">person</span><span class="o">:</span> <span class="nf">name</span><span class="p">(</span><span class="s">&quot;Mr Beanz</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">println</span><span class="p">(</span><span class="n">person</span><span class="o">:</span> <span class="nf">name</span><span class="p">())</span>
</pre></div></div></div>
</div>
<div class="sect2">
<h3 id="_defining_methods">Defining methods</h3>
<div class="paragraph"><p>Dynamic object methods are simply defined as closures. They must take the dynamic object object as
their first argument, and we suggest that you call it <span class="monospaced">this</span>. You can then define as many parameters
as you want.</p></div>
<div class="paragraph"><p>Here is an example where we define a <span class="monospaced">toString</span>-style of method:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="k">local</span> <span class="kd">function</span> <span class="nf">mrbean</span> <span class="o">=</span> <span class="o">-&gt;</span> <span class="nf">DynamicObject</span><span class="p">()</span><span class="o">:</span>
  <span class="nf">name</span><span class="p">(</span><span class="s">&quot;Mr Bean</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">:</span>
  <span class="nf">email</span><span class="p">(</span><span class="s">&quot;mrbean@gmail.com</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">:</span>
  <span class="nf">define</span><span class="p">(</span><span class="s">&quot;toString</span><span class="s2">&quot;</span><span class="p">,</span> <span class="p">|</span><span class="n">this</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="n">this</span><span class="o">:</span> <span class="nf">name</span><span class="p">()</span> <span class="o">+</span> <span class="s">&quot; &lt;</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">this</span><span class="o">:</span> <span class="nf">email</span><span class="p">()</span> <span class="o">+</span> <span class="s">&quot;&gt;</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="kd">function</span> <span class="nf">main</span> <span class="o">=</span> <span class="p">|</span><span class="n">args</span><span class="p">|</span> <span class="p">{</span>

  <span class="kd">let</span> <span class="nv">bean</span> <span class="o">=</span> <span class="nf">mrbean</span><span class="p">()</span>
  <span class="nb">println</span><span class="p">(</span><span class="n">bean</span><span class="o">:</span> <span class="nf">toString</span><span class="p">())</span>

  <span class="n">bean</span><span class="o">:</span> <span class="nf">email</span><span class="p">(</span><span class="s">&quot;mrbean@outlook.com</span><span class="s2">&quot;</span><span class="p">)</span>
  <span class="nb">println</span><span class="p">(</span><span class="n">bean</span><span class="o">:</span> <span class="nf">toString</span><span class="p">())</span>
<span class="p">}</span>
</pre></div></div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==">
</td>
<td class="content">You cannot overload methods, that is, providing methods with the same name but different
signatures.</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==">
</td>
<td class="content">
<div class="paragraph"><p>It is strongly recommended that you use <span class="monospaced">define</span> to create and update methods.
Consider the following example:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">let</span> <span class="nv">obj</span> <span class="o">=</span> <span class="nf">DynamicObject</span><span class="p">()</span><span class="o">:</span>
  <span class="nf">plop</span><span class="p">(|</span><span class="n">this</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="s">&quot;Plop!</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div></div></div>
<div class="paragraph"><p>Any call such as <span class="monospaced">obj: plop()</span> properly calls <span class="monospaced">plop()</span>. Because the dynamic object is fresh and new,
the first call to <span class="monospaced">plop</span> creates a property since it is currently missing.</p></div>
<div class="paragraph"><p>That being said, the following would fail:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="n">obj</span><span class="o">:</span> <span class="nf">plop</span><span class="p">(|</span><span class="n">this</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="s">&quot;Plop it up!</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div></div></div>
<div class="paragraph"><p>Indeed, when the value of a dynamic object property is a function, it is understood to be a method,
hence calling <span class="monospaced">plop</span> like it would be a setter method fails because there already exists a property
that is a function, and it has a different signature. It needs to be updated as in:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="n">obj</span><span class="o">:</span> <span class="nf">define</span><span class="p">(</span><span class="s">&#39;plop&#39;</span><span class="p">,</span> <span class="p">|</span><span class="n">this</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="s">&quot;Plop it up!</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div></div></div>
<div class="paragraph"><p><strong>As a rule of thumb, prefer named setters for values and <span class="monospaced">define</span> for methods. It is acceptable
to have named definitions for methods if and only if a call happens after the object creation and
before any call to <span class="monospaced">mixin</span> (remember that it injects properties from other objects, including
methods).</strong></p></div>
</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="_querying_the_properties">Querying the properties</h3>
<div class="paragraph"><p>The <span class="monospaced">properties()</span> method returns a set of entries, as instances of <span class="monospaced">java.util.Map.Entry</span>. You can
thus write code such as:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">function</span> <span class="nf">dump</span> <span class="o">=</span> <span class="p">|</span><span class="n">obj</span><span class="p">|</span> <span class="p">{</span>
  <span class="k">foreach</span> <span class="n">prop</span> <span class="ow">in</span> <span class="n">obj</span><span class="o">:</span> <span class="nf">properties</span><span class="p">()</span> <span class="p">{</span>
    <span class="nb">println</span><span class="p">(</span><span class="n">prop</span><span class="o">:</span> <span class="nf">getKey</span><span class="p">()</span> <span class="o">+</span> <span class="s">&quot; -&gt; </span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">prop</span><span class="o">:</span> <span class="nf">getValue</span><span class="p">())</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div></div></div>
<div class="paragraph"><p>Because dynamic object entries mix both values and method handles, do not forget that the predefined
<span class="monospaced">isClosure(obj)</span> function can be useful to distinguish them.</p></div>
</div>
<div class="sect2">
<h3 id="_defining_a_fallback_behavior">Defining a fallback behavior</h3>
<div class="paragraph"><p>The <span class="monospaced">fallback(handler)</span> method let&#8217;s the user define a method that is invoked whenever the initial method dispatch fails.
Here is an example of how to define a fallback.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAJhUlEQVRoge2ZWWycVxXHf+fce7/v
m/GaGCde4pI0aQlJC0kRtE1L00JbLIjY4QkeUB9YHhAIJFCExAsKUkE8IAFFPIDUIqhBRSDRBUqC
CimFFBCBpCWx02IaZ3G2SdyxPZ7vHh6+mcnSZnFjKIge6Wj8zYzvPf9z/me5d8TM+F8WfbkNuFx5
BcDLLf/fAEZGRmx4eNh6enqsp6fHhoeHbWRk5D9aFeSlVqHNmzfb6H33sHnT7ZQmD5GfOMax6Sm+
Pl5h1Yc+xpYtW2SBbX1ReUkRGBkZsdH77mHLW95EOv4Ms3ueJh6YYPHUFF9aljJ63z3cf//9/5FI
vKQIDA8P293L2yhVjjH7t51ocDiviFecF46n7XzBreChhx4qNhH5t0XjJUVgx44ddGUZ9b/vIpQD
oRQIWSDJAiFL6B9axo4dO4gxAmANWVDLG+Ln82URMRGhVCqRHxonlAPqFXWKC4r6IhI6OMjMzBN4
/4LlTUQQEZxzZ32QJAlpmrb+p16vU6vVOHXq1AWjN18AnDj0F971vrs4OnmYJVkoDA4FCPUO172I
Cgnt7SV++4vvsGhRJx3tJbIsRVVpsUnOBBABBVFEClKYwbKr7sTM7EIUnBcA7z21k7t49x1X8JXv
bOWra7rw5QRtcN8PLCfvvZJvb9vJycpJpg4/hp/N0I4SMQs4Jw0A5zBXHGiCaIZIKABgpGlKjPEF
0TpT5pUDRXiVt99+Le03r+WzuytM1gO6pB/3+o0cbxvk8yOPMjW6i2iR2lxOjJDHSDMFogmGwzQ7
rRJAUpAENAGXIZq2AFzQpvkACCEQcahP+cRH3sKHn9zHXU+MM7rtGeD33NDXzaZynZU9gcezpUw9
X6OzIyOakkfF4QEpPG6nDRNNEA2FSgKimETSNCXPc0II57VpXhEolUqoOrxPSLOMT330Dv5SqfKD
NR388Y2L+caQsjITNv3pMBs3rOT56ZyZGaM+J0QUxDc0INrWUgggoRGBAOIRAt77hY1AmqaoeJxP
cN645jVDbNn8Hj73o8fZ/af9mEE9j9y2YRXt5YzZWmRmzjj1/BwhTXAKzitOHEbeWlc0AVwDnCv8
KoZzjotV33lTSL1HNKAuEtKM1169jM98/E6mTk3x4Nbd7Bk7TEdHRvAeVY+hmDqmZwx1kIkiqrhz
S2zL+AbNMC6l/80LgHMOEY9oQvBCks5RKpXo7JhFxbhz42pet2aQet1YtLiDJAkIDq8BHwJmwlwO
UaD0ojsrNKuUReIZyb9gABCHcwWFgg+0lTPyvIRToVzKWLpkMfV6REQplYvmZCj1uuBUSdJwTg8A
XBdoCZMOsBkQBeGi/J83gBgjmABC8AlJGsjzFLMyaXDM1etEA0VR50iCx6mSZhkiijpPjEpQD+SF
4WdJrTAewdCFB1CtVlFVVATnhMQnWJqC5aTBk+c5IIgWRoTgSZJAmiZAo1s7hwsppglI+fTiljeY
nyHkLQotKIAYI4igzpFHISQOiwEnKTEG8hhRVZw6YjRQLfJGHcF7jleqTBw8znXr12MABnv37efY
iSnesG4tiUsRUQwD7JIAzKsPqCqiRbVwweM04XdPjhJN+dvTBxgbn6G9q59yZx9/3HWEb33vN+zc
/RzOJ+w/eJLtO8Z5ZNtT7PvHIUQTvvv9X/Lc/mN0d3by3fseRLQwvWh0Fy+h8wbQ2VFG1KM+xfuA
qufo8So/fejPPD/rqJys8pvf7eLAoeNMHqnw2U9+kH3jVQ5MClMzKUla5obr13HliiEMmDx6gltv
uY7Vr1nBQF8PJopQ9AFTt/AROFfMjCW9XTy19xB33Hodb924jr1j+/nDk3/nzTdei4jw3nfeyCOP
bufa1y5jzeoVrcHM8HR3dfHlr/2Q+x94jFtuuh44/9B2PplXDryYLF3STXd3e+t5UXcHY89OsOH6
NS2Qed7wpM1Rm50G4MGHH2P961Zy3bqreXrPP5mrzwLt5y6/cACq1eoLCKm+TN/SAebmfn8aUG83
PYs7+cnPH+eqKwd5as8/edc7bi02847pmVkATk1VWbF8AOcca1Yv59DkqcYK0tCL02deACqVCldc
0YdIwLmEPM9RV6NnUZlPf3wT6oqJcePN6wHhzTeu4/CRCrfctJ4sSxBRli7pYfHEMUSU97/7Th75
1RP8eec+Yp5zzTVXM9DfDyogBvHS6HTJACYmJnjVoq5GFw0454gCEOnoaMfiNGZFFRFxJGkbywZ6
i1NWoy9kWYmbb1gHKCHApuGbisVFGyoYUswa5OR5ftF56JIBjI6OMtDfWwAQ35jnc8AVpRXBohVq
UowECKqK4RBxoE0W6gvGCcEjaOEAwEQWdpgbGxujt7erOLO2mk3R8i0Wz9EiuUGz+qlKEQEUaJbI
4lTHmTVePKgWzpDGJGpc8CDTlEsuo88++wxXDA0UIUbAOP23KGZKjI48KnkuhcbiPbPCOBoeBikO
Lk2VxjqNRilaAEqSZGEAbN261bZt+zW33XY7IAXXm6Ou0YhIMamaaUOl5WRrzg00viuKWWxpQUOH
NAZFQRpD48Xlkig0MTHBB95zG+VSylz1KCbWyDOh2XyK+56IqjWMKigkUnzWnPPFFFRRLZ29SQRU
ELOGY4pZ6LKOlM07mZ07d/KOtw1TcB4sGkTDiDQ9K1IkrKeYmQC08d7pZLSiRBpE5s7aS0XAHFEK
AGY51Wr18g80Zmb33nsvX/z8XdSmj2AWOXhwkrxe46+79jB55Dh/3T2GxUhHextdXW2sXN7PNWtW
IQKDA71FFBoAjIgQkVg/a5+oHrU5zIznDhxk964xKpXKggAoTlWW8+OfPorlOQ//cjsDy1bS2dFO
W+diVly1iL6+Pqanpzl5qsL4pPHwN3/G1InDlMsZ7Z1tDA30cfWqIa5dexV9fb2YnT7UTxw4xsHJ
o4yOjfOP8QOMjx/k4OQx7r777lY0zycXvJ02M4sxMjg4SL1eR0TYsGEDw8PD9PX10d7ejogUN3a1
GqpKCIE8z5mdnUVVqVarbN++nba2Nvbu3csDDzyAqrJ8+atb+zjn6e/vZ/Xq1axatYq1a9fS29tL
lmUMDQ1RKpXOm9EXvV6v1+tWr9eZnp5mZmaGWq1GjLHF62aiNZ+bnPfe45xrvTZzxMyYmZk56+LX
zKjX661DvHOOJElIkoRSqYT3/vLvRlW15eHCa4VxzdvmpjZDfubzuXeb3vuzqCEixBhbo0NTkyS5
PAr9L8j/96+U/w3yCoCXW14B8HLLvwDd67nwZIEPdgAAAABJRU5ErkJggg==">
</td>
<td class="content">Calling a setter method for a non-existent property defines it, thus the fallback is not applicable for setters.</td>
</tr></table>
</div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">let</span> <span class="nv">dynob</span> <span class="o">=</span> <span class="nf">DynamicObject</span><span class="p">()</span><span class="o">:</span>
  <span class="nf">fallback</span><span class="p">(|</span><span class="n">this</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">args</span><span class="o">...</span><span class="p">|</span> <span class="p">{</span>
    <span class="k">return</span> <span class="s">&quot;Dispatch failed for method: </span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">method</span> <span class="o">+</span> <span class="s">&quot;, with args: </span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">args</span><span class="o">:</span> <span class="nf">asList</span><span class="p">()</span><span class="o">:</span> <span class="nf">join</span><span class="p">(</span><span class="s">&quot; </span><span class="s2">&quot;</span><span class="p">)</span>
  <span class="p">})</span>

<span class="nb">println</span><span class="p">(</span><span class="n">dynob</span><span class="o">:</span> <span class="nf">casperGetter</span><span class="p">())</span>
<span class="nb">println</span><span class="p">(</span><span class="n">dynob</span><span class="o">:</span> <span class="nf">casperMethod</span><span class="p">(</span><span class="s">&quot;foo</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s">&quot;bar</span><span class="s2">&quot;</span><span class="p">))</span>
</pre></div></div></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="go">Dispatch failed for method: casperGetter, with args:</span>
<span class="go">Dispatch failed for method: casperMethod, with args: foo bar</span>
</pre></div></div></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_adapters">Adapters</h2>
<div class="sectionbody">
<div class="paragraph"><p>There is already much you can do while in Golo land using functions, closures, structs,
augmentations and dynamic objects.</p></div>
<div class="paragraph"><p>Yet, the JVM is a wider ecosystem and you will soon be tempted to integrate existing Java libraries
into your code. Calling Java libraries from Golo is quite easy, but what happens when you need to
subclass classes or provide objects that implement specific interfaces?</p></div>
<div class="paragraph"><p>As you can easily guess, this is all what adapters are about: they allow the definition of objects
at runtime that can extend and inherit Java types.</p></div>
<div class="sect2">
<h3 id="_a_simple_example">A simple example</h3>
<div class="paragraph"><p>Let us get started with a simple example of a web application based on the nice
<a href="http://www.sparkjava.com/">Spark micro-framework</a>.</p></div>
<div class="paragraph"><p>Spark requires route handlers to extend an abstract base class called <span class="monospaced">spark.Route</span>. The following
code snippet does just that:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kn">module</span> <span class="nn">sparky</span>

<span class="kn">import</span> <span class="nn">spark</span>
<span class="kn">import</span> <span class="nn">spark.Spark</span>

<span class="kd">function</span> <span class="nf">main</span> <span class="o">=</span> <span class="p">|</span><span class="n">args</span><span class="p">|</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nv">conf</span> <span class="o">=</span> <span class="nb">map</span><span class="p">[</span>   <span class="c"># <img alt="1" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAAAAABzHgM7AAAAAmJLR0QAAKqNIzIAAABjSURBVHja
VY6xDcAwCAS/pPQaLim9QmajdOk2I2SNrMEIlARIoigU8Cek/4e7zdHaWOYOVwaoA6wOCw05Y7FB
gE0tIWQ+sBcwKM8qoD/wB5wGL8hjfdzWrh01GRp1hInGjDoXwHgsFuzBVLQAAABDdEVYdFNvZnR3
YXJlAEAoIylJbWFnZU1hZ2ljayA0LjIuOCA5OS8wOC8wMSBjcmlzdHlAbXlzdGljLmVzLmR1cG9u
dC5jb22RuiG4AAAAKnRFWHRTaWduYXR1cmUANThhMDcyZTA3MGRhMjJmNjEzNWNiZDNlNDE0NTQ2
ZjloaiHtAAAADnRFWHRQYWdlADEyeDEyKzArMIRtu30AAAAASUVORK5CYII="></span>
    <span class="p">[</span><span class="s">&quot;extends</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s">&quot;spark.Route</span><span class="s2">&quot;</span><span class="p">],</span>   <span class="c"># <img alt="2" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAAAAABzHgM7AAAAAmJLR0QAAKqNIzIAAAB7SURBVHja
HY6hFcMwDEQ/NDQsNSwU9Apdo7Cw0CsIBoZmhKzQEQJLDQsFVclHpHu693W429Zr7bu541Pg3kCm
Y0K75u9TEUPhuGgWU4mQDvieEaSQEnsT6zKPeZY0EUNtrHMCXvYUuSUg0PsMjUSvpysUT6OOSil9
izp/VNk1YJ8vf6MAAABDdEVYdFNvZnR3YXJlAEAoIylJbWFnZU1hZ2ljayA0LjIuOCA5OS8wOC8w
MSBjcmlzdHlAbXlzdGljLmVzLmR1cG9udC5jb22RuiG4AAAAKnRFWHRTaWduYXR1cmUAODBlYWU1
MjljOTRhN2Y0N2RlY2NmYWRhMjhhY2I5ZGblb7ENAAAADnRFWHRQYWdlADEyeDEyKzArMIRtu30A
AAAASUVORK5CYII="></span>
    <span class="p">[</span><span class="s">&quot;implements</span><span class="s2">&quot;</span><span class="p">,</span> <span class="nb">map</span><span class="p">[</span>   <span class="c"># <img alt="3" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAAAAABzHgM7AAAAAmJLR0QAAKqNIzIAAAB4SURBVHja
JU6rFcNADBM09BqBhl6ltDCwKxQeDOwKB7tGYGCoYaChK6cmlt7TD1W5uap/sgoVBnEXWBTSoOdx
7gpLDOAVorWC0ABdcBPqwZtx8Muf+DPXJpQ96Nu/LSMYl/n17oCOnplTOrpiwW3sUs4ZJmob5/wA
Ubg1Y/zrjUwAAABDdEVYdFNvZnR3YXJlAEAoIylJbWFnZU1hZ2ljayA0LjIuOCA5OS8wOC8wMSBj
cmlzdHlAbXlzdGljLmVzLmR1cG9udC5jb22RuiG4AAAAKnRFWHRTaWduYXR1cmUAODBiYmRhMjcy
NmRkYWNlOGFiOGEwMWY1OWRlMmViZGII/Q51AAAADnRFWHRQYWdlADEyeDEyKzArMIRtu30AAAAA
SUVORK5CYII="></span>
      <span class="p">[</span><span class="s">&quot;handle</span><span class="s2">&quot;</span><span class="p">,</span> <span class="p">|</span><span class="n">this</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">response</span><span class="p">|</span> <span class="p">{</span>  <span class="c"># <img alt="4" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAAAAABzHgM7AAAAAmJLR0QAAKqNIzIAAABzSURBVHja
HY0hEoUwEEMjkZVYZGVlr1CJxCKRXKPyy28reyVsZeXKsCFi573ZzAQk+x5jaQ6gFQAxIA8XceEN
ZEN3DkOCH/TobUoSVuAYwSSLyzbvaHWVFJxUmmp+PF+twrLkuXzLwPmZ8+OjtH8KS6pGvuoGNo5b
6rzDAAAAQ3RFWHRTb2Z0d2FyZQBAKCMpSW1hZ2VNYWdpY2sgNC4yLjggOTkvMDgvMDEgY3Jpc3R5
QG15c3RpYy5lcy5kdXBvbnQuY29tkbohuAAAACp0RVh0U2lnbmF0dXJlADlmODJmY2FjOWUwMzlj
YmRiNzIzODBhNDU5MTMyNGY1gLv4dgAAAA50RVh0UGFnZQAxMngxMiswKzCEbbt9AAAAAElFTkSu
QmCC"></span>
        <span class="k">return</span> <span class="s">&quot;Golo, world!</span><span class="s2">&quot;</span>
      <span class="p">}]</span>
    <span class="p">]]</span>
  <span class="p">]</span>
  <span class="kd">let</span> <span class="nv">fabric</span> <span class="o">=</span> <span class="nf">AdapterFabric</span><span class="p">()</span>  <span class="c"># <img alt="5" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAAAAABzHgM7AAAAAmJLR0QAAKqNIzIAAAB2SURBVHja
FY6hEcQwDAQPChqGGhoaqgWX8PUYBhqGBn4rX0JooKDh/UlsZ3b2BJKXH8XPTYLh1lpt1h+BwxkR
A23jhsCQd2IkfH9T3HEkzPFegCXUKSUSpJUPsN7UFOgc9VkZUBoz9l0yrVHZarUcJZeb9XznDyNb
Ny9CX3/7AAAAQ3RFWHRTb2Z0d2FyZQBAKCMpSW1hZ2VNYWdpY2sgNC4yLjggOTkvMDgvMDEgY3Jp
c3R5QG15c3RpYy5lcy5kdXBvbnQuY29tkbohuAAAACp0RVh0U2lnbmF0dXJlAGZlNjkwNDYzMzc5
ZWIyNWU1NjJmY2M4Y2M5YjNjN2Uw37I5ngAAAA50RVh0UGFnZQAxMngxMiswKzCEbbt9AAAAAElF
TkSuQmCC"></span>
  <span class="kd">let</span> <span class="nv">routeMaker</span> <span class="o">=</span> <span class="n">fabric</span><span class="o">:</span> <span class="nf">maker</span><span class="p">(</span><span class="n">conf</span><span class="p">)</span>  <span class="c"># <img alt="6" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAAAAABzHgM7AAAAAmJLR0QAAKqNIzIAAAB9SURBVHja
FY0hEsMwDAQXChaaBgoG+guB/UZhvlAYWFhqmCeUBvoJoYaCgqrMbudu9oiI86m6tQyEb1AU6kjI
3GxcQnVO2K0Uq/Ahi6tpFWClwLDe+wNkwt0R2yfk7Negv+csw8uWZR4c+NS4Z6FOTKmkTO88Df9W
kfXwiD+zczjqCrgbWQAAAEN0RVh0U29mdHdhcmUAQCgjKUltYWdlTWFnaWNrIDQuMi44IDk5LzA4
LzAxIGNyaXN0eUBteXN0aWMuZXMuZHVwb250LmNvbZG6IbgAAAAqdEVYdFNpZ25hdHVyZQBkMjVk
NzE3NmQ2N2EwMzhhZmMxYzU2NTU4ZTNkZmIxYf0Q9bUAAAAOdEVYdFBhZ2UAMTJ4MTIrMCswhG27
fQAAAABJRU5ErkJggg=="></span>
  <span class="kd">let</span> <span class="nv">route</span> <span class="o">=</span> <span class="n">routeMaker</span><span class="o">:</span> <span class="nf">newInstance</span><span class="p">(</span><span class="s">&quot;/hello</span><span class="s2">&quot;</span><span class="p">)</span>   <span class="c"># <img alt="7" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAAAAABzHgM7AAAAAmJLR0QAAKqNIzIAAABySURBVHja
JY6tAYUwDIRPViJZIbKyFoms7EyVT74VkJWswQpIZOSRK4lIvuTyA5Kjmu2Hk6DXZQ1fyh3QcESX
F7LjhGy9G/BDmzBUK8jKqyukD66BCZIVVkGGat2ToIN7jE+VOfhscx9MR8l/Scl6vPMCPjYxv0cQ
VlMAAABDdEVYdFNvZnR3YXJlAEAoIylJbWFnZU1hZ2ljayA0LjIuOCA5OS8wOC8wMSBjcmlzdHlA
bXlzdGljLmVzLmR1cG9udC5jb22RuiG4AAAAKnRFWHRTaWduYXR1cmUAMjk4MzY4MTQyYWM0M2Nl
YmQyNTg2ZDhkMTEzN2M4ZGYmOemZAAAADnRFWHRQYWdlADEyeDEyKzArMIRtu30AAAAASUVORK5C
YII="></span>
  <span class="nf">get</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>  <span class="c"># <img alt="8" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAAAAABzHgM7AAAAAmJLR0QAAKqNIzIAAAB/SURBVHja
HY6hFcMwDAUPChqWGgYGhhoaBnaFwqzQEbyCYWCg1wgMNTQ0VKUK6T/duy9U9dyXuFdb0JEhRNi6
hQT1uVtgnVTIM9APKBiUZpDxgZUXcPXnFhAP77lnv4hjtcHZHDPBMZbYvy4wtZQ+irj6X+qzDStV
rTnG5O/8AKOfObpGYu0OAAAAQ3RFWHRTb2Z0d2FyZQBAKCMpSW1hZ2VNYWdpY2sgNC4yLjggOTkv
MDgvMDEgY3Jpc3R5QG15c3RpYy5lcy5kdXBvbnQuY29tkbohuAAAACp0RVh0U2lnbmF0dXJlADU3
YmUxOTUwNWMwM2Y5MmYzODQ3ZjUzNWU5YjExNGU52TRrQwAAAA50RVh0UGFnZQAxMngxMiswKzCE
bbt9AAAAAElFTkSuQmCC"></span>
<span class="p">}</span>
</pre></div></div></div>
<div class="colist arabic"><table>
<tr><td><img alt="1" src="data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAAAAABzHgM7AAAAAmJLR0QAAKqNIzIAAABjSURBVHja
VY6xDcAwCAS/pPQaLim9QmajdOk2I2SNrMEIlARIoigU8Cek/4e7zdHaWOYOVwaoA6wOCw05Y7FB
gE0tIWQ+sBcwKM8qoD/wB5wGL8hjfdzWrh01GRp1hInGjDoXwHgsFuzBVLQAAABDdEVYdFNvZnR3
YXJlAEAoIylJbWFnZU1hZ2ljayA0LjIuOCA5OS8wOC8wMSBjcmlzdHlAbXlzdGljLmVzLmR1cG9u
dC5jb22RuiG4AAAAKnRFWHRTaWduYXR1cmUANThhMDcyZTA3MGRhMjJmNjEzNWNiZDNlNDE0NTQ2
ZjloaiHtAAAADnRFWHRQYWdlADEyeDEyKzArMIRtu30AAAAASUVORK5CYII="></td><td>
An adapter configuration is provided by a map object.
</td></tr>
<tr><td><img alt="2" src="data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAAAAABzHgM7AAAAAmJLR0QAAKqNIzIAAAB7SURBVHja
HY6hFcMwDEQ/NDQsNSwU9Apdo7Cw0CsIBoZmhKzQEQJLDQsFVclHpHu693W429Zr7bu541Pg3kCm
Y0K75u9TEUPhuGgWU4mQDvieEaSQEnsT6zKPeZY0EUNtrHMCXvYUuSUg0PsMjUSvpysUT6OOSil9
izp/VNk1YJ8vf6MAAABDdEVYdFNvZnR3YXJlAEAoIylJbWFnZU1hZ2ljayA0LjIuOCA5OS8wOC8w
MSBjcmlzdHlAbXlzdGljLmVzLmR1cG9udC5jb22RuiG4AAAAKnRFWHRTaWduYXR1cmUAODBlYWU1
MjljOTRhN2Y0N2RlY2NmYWRhMjhhY2I5ZGblb7ENAAAADnRFWHRQYWdlADEyeDEyKzArMIRtu30A
AAAASUVORK5CYII="></td><td>
The <span class="monospaced">extends</span> key allows specifying the name of the parent class (<span class="monospaced">java.lang.Object</span> by
    default).
</td></tr>
<tr><td><img alt="3" src="data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAAAAABzHgM7AAAAAmJLR0QAAKqNIzIAAAB4SURBVHja
JU6rFcNADBM09BqBhl6ltDCwKxQeDOwKB7tGYGCoYaChK6cmlt7TD1W5uap/sgoVBnEXWBTSoOdx
7gpLDOAVorWC0ABdcBPqwZtx8Muf+DPXJpQ96Nu/LSMYl/n17oCOnplTOrpiwW3sUs4ZJmob5/wA
Ubg1Y/zrjUwAAABDdEVYdFNvZnR3YXJlAEAoIylJbWFnZU1hZ2ljayA0LjIuOCA5OS8wOC8wMSBj
cmlzdHlAbXlzdGljLmVzLmR1cG9udC5jb22RuiG4AAAAKnRFWHRTaWduYXR1cmUAODBiYmRhMjcy
NmRkYWNlOGFiOGEwMWY1OWRlMmViZGII/Q51AAAADnRFWHRQYWdlADEyeDEyKzArMIRtu30AAAAA
SUVORK5CYII="></td><td>
The <span class="monospaced">implements</span> provides a map of method implementations.
</td></tr>
<tr><td><img alt="4" src="data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAAAAABzHgM7AAAAAmJLR0QAAKqNIzIAAABzSURBVHja
HY0hEoUwEEMjkZVYZGVlr1CJxCKRXKPyy28reyVsZeXKsCFi573ZzAQk+x5jaQ6gFQAxIA8XceEN
ZEN3DkOCH/TobUoSVuAYwSSLyzbvaHWVFJxUmmp+PF+twrLkuXzLwPmZ8+OjtH8KS6pGvuoGNo5b
6rzDAAAAQ3RFWHRTb2Z0d2FyZQBAKCMpSW1hZ2VNYWdpY2sgNC4yLjggOTkvMDgvMDEgY3Jpc3R5
QG15c3RpYy5lcy5kdXBvbnQuY29tkbohuAAAACp0RVh0U2lnbmF0dXJlADlmODJmY2FjOWUwMzlj
YmRiNzIzODBhNDU5MTMyNGY1gLv4dgAAAA50RVh0UGFnZQAxMngxMiswKzCEbbt9AAAAAElFTkSu
QmCC"></td><td>
The implementation is given by a closure whose signature matches the parent class definition,
    and where the first argument is the receiver object that is going to be the adapter instance.
</td></tr>
<tr><td><img alt="5" src="data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAAAAABzHgM7AAAAAmJLR0QAAKqNIzIAAAB2SURBVHja
FY6hEcQwDAQPChqGGhoaqgWX8PUYBhqGBn4rX0JooKDh/UlsZ3b2BJKXH8XPTYLh1lpt1h+BwxkR
A23jhsCQd2IkfH9T3HEkzPFegCXUKSUSpJUPsN7UFOgc9VkZUBoz9l0yrVHZarUcJZeb9XznDyNb
Ny9CX3/7AAAAQ3RFWHRTb2Z0d2FyZQBAKCMpSW1hZ2VNYWdpY2sgNC4yLjggOTkvMDgvMDEgY3Jp
c3R5QG15c3RpYy5lcy5kdXBvbnQuY29tkbohuAAAACp0RVh0U2lnbmF0dXJlAGZlNjkwNDYzMzc5
ZWIyNWU1NjJmY2M4Y2M5YjNjN2Uw37I5ngAAAA50RVh0UGFnZQAxMngxMiswKzCEbbt9AAAAAElF
TkSuQmCC"></td><td>
An adapter fabric provides context for creating adapters. It manages its own class loader.
</td></tr>
<tr><td><img alt="6" src="data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAAAAABzHgM7AAAAAmJLR0QAAKqNIzIAAAB9SURBVHja
FY0hEsMwDAQXChaaBgoG+guB/UZhvlAYWFhqmCeUBvoJoYaCgqrMbudu9oiI86m6tQyEb1AU6kjI
3GxcQnVO2K0Uq/Ahi6tpFWClwLDe+wNkwt0R2yfk7Negv+csw8uWZR4c+NS4Z6FOTKmkTO88Df9W
kfXwiD+zczjqCrgbWQAAAEN0RVh0U29mdHdhcmUAQCgjKUltYWdlTWFnaWNrIDQuMi44IDk5LzA4
LzAxIGNyaXN0eUBteXN0aWMuZXMuZHVwb250LmNvbZG6IbgAAAAqdEVYdFNpZ25hdHVyZQBkMjVk
NzE3NmQ2N2EwMzhhZmMxYzU2NTU4ZTNkZmIxYf0Q9bUAAAAOdEVYdFBhZ2UAMTJ4MTIrMCswhG27
fQAAAABJRU5ErkJggg=="></td><td>
An adapter maker creates instances based on a configuration.
</td></tr>
<tr><td><img alt="7" src="data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAAAAABzHgM7AAAAAmJLR0QAAKqNIzIAAABySURBVHja
JY6tAYUwDIRPViJZIbKyFoms7EyVT74VkJWswQpIZOSRK4lIvuTyA5Kjmu2Hk6DXZQ1fyh3QcESX
F7LjhGy9G/BDmzBUK8jKqyukD66BCZIVVkGGat2ToIN7jE+VOfhscx9MR8l/Scl6vPMCPjYxv0cQ
VlMAAABDdEVYdFNvZnR3YXJlAEAoIylJbWFnZU1hZ2ljayA0LjIuOCA5OS8wOC8wMSBjcmlzdHlA
bXlzdGljLmVzLmR1cG9udC5jb22RuiG4AAAAKnRFWHRTaWduYXR1cmUAMjk4MzY4MTQyYWM0M2Nl
YmQyNTg2ZDhkMTEzN2M4ZGYmOemZAAAADnRFWHRQYWdlADEyeDEyKzArMIRtu30AAAAASUVORK5C
YII="></td><td>
The <span class="monospaced">newInstance()</span> method calls the right constructor based on the parent class constructors
    and provided argument types.
</td></tr>
<tr><td><img alt="8" src="data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAAAAABzHgM7AAAAAmJLR0QAAKqNIzIAAAB/SURBVHja
HY6hFcMwDAUPChqWGgYGhhoaBnaFwqzQEbyCYWCg1wgMNTQ0VKUK6T/duy9U9dyXuFdb0JEhRNi6
hQT1uVtgnVTIM9APKBiUZpDxgZUXcPXnFhAP77lnv4hjtcHZHDPBMZbYvy4wtZQ+irj6X+qzDStV
rTnG5O/8AKOfObpGYu0OAAAAQ3RFWHRTb2Z0d2FyZQBAKCMpSW1hZ2VNYWdpY2sgNC4yLjggOTkv
MDgvMDEgY3Jpc3R5QG15c3RpYy5lcy5kdXBvbnQuY29tkbohuAAAACp0RVh0U2lnbmF0dXJlADU3
YmUxOTUwNWMwM2Y5MmYzODQ3ZjUzNWU5YjExNGU52TRrQwAAAA50RVh0UGFnZQAxMngxMiswKzCE
bbt9AAAAAElFTkSuQmCC"></td><td>
The <span class="monospaced">spark.Spark.get()</span> static is method is happy as we feed it a subclass of <span class="monospaced">spark.Route</span>.
</td></tr>
</table></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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">
</td>
<td class="content">Adapter objects implement the <span class="monospaced">gololang.GoloAdapter</span> marker interface, so you can do type
checks on them a in: <span class="monospaced">(foo oftype gololang.GoloAdapter.class)</span>.</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="_implementing_interfaces">Implementing interfaces</h3>
<div class="paragraph"><p>This is as easy as providing a <span class="monospaced">java.lang.Iterable</span> as part of the configuration:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">let</span> <span class="nv">result</span> <span class="o">=</span> <span class="nb">array</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="kd">let</span> <span class="nv">conf</span> <span class="o">=</span> <span class="nb">map</span><span class="p">[</span>
  <span class="p">[</span><span class="s">&quot;interfaces</span><span class="s2">&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s">&quot;java.io.Serializable</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s">&quot;java.lang.Runnable</span><span class="s2">&quot;</span><span class="p">]],</span>
  <span class="p">[</span><span class="s">&quot;implements</span><span class="s2">&quot;</span><span class="p">,</span> <span class="nb">map</span><span class="p">[</span>
    <span class="p">[</span><span class="s">&quot;run</span><span class="s2">&quot;</span><span class="p">,</span> <span class="p">|</span><span class="n">this</span><span class="p">|</span> <span class="p">{</span>
      <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nv">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">result</span><span class="o">:</span> <span class="nf">length</span><span class="p">(),</span> <span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">result</span><span class="o">:</span> <span class="nf">set</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">result</span><span class="o">:</span> <span class="nf">get</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">+</span> <span class="mi">10</span><span class="p">)</span>
      <span class="p">}</span>
    <span class="p">}]</span>
  <span class="p">]]</span>
<span class="p">]</span>
<span class="kd">let</span> <span class="nv">runner</span> <span class="o">=</span> <span class="nf">AdapterFabric</span><span class="p">()</span><span class="o">:</span> <span class="nf">maker</span><span class="p">(</span><span class="n">conf</span><span class="p">)</span><span class="o">:</span> <span class="nf">newInstance</span><span class="p">()</span>
<span class="n">runner</span><span class="o">:</span> <span class="nf">run</span><span class="p">()</span> <span class="c"># <img alt="1" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAAAAABzHgM7AAAAAmJLR0QAAKqNIzIAAABjSURBVHja
VY6xDcAwCAS/pPQaLim9QmajdOk2I2SNrMEIlARIoigU8Cek/4e7zdHaWOYOVwaoA6wOCw05Y7FB
gE0tIWQ+sBcwKM8qoD/wB5wGL8hjfdzWrh01GRp1hInGjDoXwHgsFuzBVLQAAABDdEVYdFNvZnR3
YXJlAEAoIylJbWFnZU1hZ2ljayA0LjIuOCA5OS8wOC8wMSBjcmlzdHlAbXlzdGljLmVzLmR1cG9u
dC5jb22RuiG4AAAAKnRFWHRTaWduYXR1cmUANThhMDcyZTA3MGRhMjJmNjEzNWNiZDNlNDE0NTQ2
ZjloaiHtAAAADnRFWHRQYWdlADEyeDEyKzArMIRtu30AAAAASUVORK5CYII="></span>
</pre></div></div></div>
<div class="colist arabic"><table>
<tr><td><img alt="1" src="data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAAAAABzHgM7AAAAAmJLR0QAAKqNIzIAAABjSURBVHja
VY6xDcAwCAS/pPQaLim9QmajdOk2I2SNrMEIlARIoigU8Cek/4e7zdHaWOYOVwaoA6wOCw05Y7FB
gE0tIWQ+sBcwKM8qoD/wB5wGL8hjfdzWrh01GRp1hInGjDoXwHgsFuzBVLQAAABDdEVYdFNvZnR3
YXJlAEAoIylJbWFnZU1hZ2ljayA0LjIuOCA5OS8wOC8wMSBjcmlzdHlAbXlzdGljLmVzLmR1cG9u
dC5jb22RuiG4AAAAKnRFWHRTaWduYXR1cmUANThhMDcyZTA3MGRhMjJmNjEzNWNiZDNlNDE0NTQ2
ZjloaiHtAAAADnRFWHRQYWdlADEyeDEyKzArMIRtu30AAAAASUVORK5CYII="></td><td>
As you may guess, this changes the <span class="monospaced">result</span> array values to <span class="monospaced">[11, 12, 13]</span>.
</td></tr>
</table></div>
</div>
<div class="sect2">
<h3 id="_overrides">Overrides</h3>
<div class="paragraph"><p>Implementations are great, but what happens if you need to call the parent class implementation of a
method? In Java, you would use a <span class="monospaced">super</span> reference, but Golo does not provide that.</p></div>
<div class="paragraph"><p>Instead, you can override methods, and have the parent class implementation given to you as a
method handle parameter:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">let</span> <span class="nv">conf</span> <span class="o">=</span> <span class="nb">map</span><span class="p">[</span>
  <span class="p">[</span><span class="s">&quot;overrides</span><span class="s2">&quot;</span><span class="p">,</span> <span class="nb">map</span><span class="p">[</span>
    <span class="p">[</span><span class="s">&quot;toString</span><span class="s2">&quot;</span><span class="p">,</span> <span class="p">|</span><span class="n">super</span><span class="p">,</span> <span class="n">this</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="s">&quot;&gt;&gt;&gt; </span><span class="s2">&quot;</span> <span class="o">+</span> <span class="nf">super</span><span class="p">(</span><span class="n">this</span><span class="p">)]</span>
  <span class="p">]]</span>
<span class="p">]</span>
<span class="nb">println</span><span class="p">(</span><span class="nf">AdapterFabric</span><span class="p">()</span><span class="o">:</span> <span class="nf">maker</span><span class="p">(</span><span class="n">conf</span><span class="p">)</span><span class="o">:</span> <span class="nf">newInstance</span><span class="p">()</span><span class="o">:</span> <span class="nf">toString</span><span class="p">())</span> <span class="c"># <img alt="1" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAAAAABzHgM7AAAAAmJLR0QAAKqNIzIAAABjSURBVHja
VY6xDcAwCAS/pPQaLim9QmajdOk2I2SNrMEIlARIoigU8Cek/4e7zdHaWOYOVwaoA6wOCw05Y7FB
gE0tIWQ+sBcwKM8qoD/wB5wGL8hjfdzWrh01GRp1hInGjDoXwHgsFuzBVLQAAABDdEVYdFNvZnR3
YXJlAEAoIylJbWFnZU1hZ2ljayA0LjIuOCA5OS8wOC8wMSBjcmlzdHlAbXlzdGljLmVzLmR1cG9u
dC5jb22RuiG4AAAAKnRFWHRTaWduYXR1cmUANThhMDcyZTA3MGRhMjJmNjEzNWNiZDNlNDE0NTQ2
ZjloaiHtAAAADnRFWHRQYWdlADEyeDEyKzArMIRtu30AAAAASUVORK5CYII="></span>
</pre></div></div></div>
<div class="colist arabic"><table>
<tr><td><img alt="1" src="data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAAAAABzHgM7AAAAAmJLR0QAAKqNIzIAAABjSURBVHja
VY6xDcAwCAS/pPQaLim9QmajdOk2I2SNrMEIlARIoigU8Cek/4e7zdHaWOYOVwaoA6wOCw05Y7FB
gE0tIWQ+sBcwKM8qoD/wB5wGL8hjfdzWrh01GRp1hInGjDoXwHgsFuzBVLQAAABDdEVYdFNvZnR3
YXJlAEAoIylJbWFnZU1hZ2ljayA0LjIuOCA5OS8wOC8wMSBjcmlzdHlAbXlzdGljLmVzLmR1cG9u
dC5jb22RuiG4AAAAKnRFWHRTaWduYXR1cmUANThhMDcyZTA3MGRhMjJmNjEzNWNiZDNlNDE0NTQ2
ZjloaiHtAAAADnRFWHRQYWdlADEyeDEyKzArMIRtu30AAAAASUVORK5CYII="></td><td>
This prints something like: <span class="monospaced">&gt;&gt;&gt; $Golo$Adapter$0@12fc7ceb</span>.
</td></tr>
</table></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAJhUlEQVRoge2ZWWycVxXHf+fce7/v
m/GaGCde4pI0aQlJC0kRtE1L00JbLIjY4QkeUB9YHhAIJFCExAsKUkE8IAFFPIDUIqhBRSDRBUqC
CimFFBCBpCWx02IaZ3G2SdyxPZ7vHh6+mcnSZnFjKIge6Wj8zYzvPf9z/me5d8TM+F8WfbkNuFx5
BcDLLf/fAEZGRmx4eNh6enqsp6fHhoeHbWRk5D9aFeSlVqHNmzfb6H33sHnT7ZQmD5GfOMax6Sm+
Pl5h1Yc+xpYtW2SBbX1ReUkRGBkZsdH77mHLW95EOv4Ms3ueJh6YYPHUFF9aljJ63z3cf//9/5FI
vKQIDA8P293L2yhVjjH7t51ocDiviFecF46n7XzBreChhx4qNhH5t0XjJUVgx44ddGUZ9b/vIpQD
oRQIWSDJAiFL6B9axo4dO4gxAmANWVDLG+Ln82URMRGhVCqRHxonlAPqFXWKC4r6IhI6OMjMzBN4
/4LlTUQQEZxzZ32QJAlpmrb+p16vU6vVOHXq1AWjN18AnDj0F971vrs4OnmYJVkoDA4FCPUO172I
Cgnt7SV++4vvsGhRJx3tJbIsRVVpsUnOBBABBVFEClKYwbKr7sTM7EIUnBcA7z21k7t49x1X8JXv
bOWra7rw5QRtcN8PLCfvvZJvb9vJycpJpg4/hp/N0I4SMQs4Jw0A5zBXHGiCaIZIKABgpGlKjPEF
0TpT5pUDRXiVt99+Le03r+WzuytM1gO6pB/3+o0cbxvk8yOPMjW6i2iR2lxOjJDHSDMFogmGwzQ7
rRJAUpAENAGXIZq2AFzQpvkACCEQcahP+cRH3sKHn9zHXU+MM7rtGeD33NDXzaZynZU9gcezpUw9
X6OzIyOakkfF4QEpPG6nDRNNEA2FSgKimETSNCXPc0II57VpXhEolUqoOrxPSLOMT330Dv5SqfKD
NR388Y2L+caQsjITNv3pMBs3rOT56ZyZGaM+J0QUxDc0INrWUgggoRGBAOIRAt77hY1AmqaoeJxP
cN645jVDbNn8Hj73o8fZ/af9mEE9j9y2YRXt5YzZWmRmzjj1/BwhTXAKzitOHEbeWlc0AVwDnCv8
KoZzjotV33lTSL1HNKAuEtKM1169jM98/E6mTk3x4Nbd7Bk7TEdHRvAeVY+hmDqmZwx1kIkiqrhz
S2zL+AbNMC6l/80LgHMOEY9oQvBCks5RKpXo7JhFxbhz42pet2aQet1YtLiDJAkIDq8BHwJmwlwO
UaD0ojsrNKuUReIZyb9gABCHcwWFgg+0lTPyvIRToVzKWLpkMfV6REQplYvmZCj1uuBUSdJwTg8A
XBdoCZMOsBkQBeGi/J83gBgjmABC8AlJGsjzFLMyaXDM1etEA0VR50iCx6mSZhkiijpPjEpQD+SF
4WdJrTAewdCFB1CtVlFVVATnhMQnWJqC5aTBk+c5IIgWRoTgSZJAmiZAo1s7hwsppglI+fTiljeY
nyHkLQotKIAYI4igzpFHISQOiwEnKTEG8hhRVZw6YjRQLfJGHcF7jleqTBw8znXr12MABnv37efY
iSnesG4tiUsRUQwD7JIAzKsPqCqiRbVwweM04XdPjhJN+dvTBxgbn6G9q59yZx9/3HWEb33vN+zc
/RzOJ+w/eJLtO8Z5ZNtT7PvHIUQTvvv9X/Lc/mN0d3by3fseRLQwvWh0Fy+h8wbQ2VFG1KM+xfuA
qufo8So/fejPPD/rqJys8pvf7eLAoeNMHqnw2U9+kH3jVQ5MClMzKUla5obr13HliiEMmDx6gltv
uY7Vr1nBQF8PJopQ9AFTt/AROFfMjCW9XTy19xB33Hodb924jr1j+/nDk3/nzTdei4jw3nfeyCOP
bufa1y5jzeoVrcHM8HR3dfHlr/2Q+x94jFtuuh44/9B2PplXDryYLF3STXd3e+t5UXcHY89OsOH6
NS2Qed7wpM1Rm50G4MGHH2P961Zy3bqreXrPP5mrzwLt5y6/cACq1eoLCKm+TN/SAebmfn8aUG83
PYs7+cnPH+eqKwd5as8/edc7bi02847pmVkATk1VWbF8AOcca1Yv59DkqcYK0tCL02deACqVCldc
0YdIwLmEPM9RV6NnUZlPf3wT6oqJcePN6wHhzTeu4/CRCrfctJ4sSxBRli7pYfHEMUSU97/7Th75
1RP8eec+Yp5zzTVXM9DfDyogBvHS6HTJACYmJnjVoq5GFw0454gCEOnoaMfiNGZFFRFxJGkbywZ6
i1NWoy9kWYmbb1gHKCHApuGbisVFGyoYUswa5OR5ftF56JIBjI6OMtDfWwAQ35jnc8AVpRXBohVq
UowECKqK4RBxoE0W6gvGCcEjaOEAwEQWdpgbGxujt7erOLO2mk3R8i0Wz9EiuUGz+qlKEQEUaJbI
4lTHmTVePKgWzpDGJGpc8CDTlEsuo88++wxXDA0UIUbAOP23KGZKjI48KnkuhcbiPbPCOBoeBikO
Lk2VxjqNRilaAEqSZGEAbN261bZt+zW33XY7IAXXm6Ou0YhIMamaaUOl5WRrzg00viuKWWxpQUOH
NAZFQRpD48Xlkig0MTHBB95zG+VSylz1KCbWyDOh2XyK+56IqjWMKigkUnzWnPPFFFRRLZ29SQRU
ELOGY4pZ6LKOlM07mZ07d/KOtw1TcB4sGkTDiDQ9K1IkrKeYmQC08d7pZLSiRBpE5s7aS0XAHFEK
AGY51Wr18g80Zmb33nsvX/z8XdSmj2AWOXhwkrxe46+79jB55Dh/3T2GxUhHextdXW2sXN7PNWtW
IQKDA71FFBoAjIgQkVg/a5+oHrU5zIznDhxk964xKpXKggAoTlWW8+OfPorlOQ//cjsDy1bS2dFO
W+diVly1iL6+Pqanpzl5qsL4pPHwN3/G1InDlMsZ7Z1tDA30cfWqIa5dexV9fb2YnT7UTxw4xsHJ
o4yOjfOP8QOMjx/k4OQx7r777lY0zycXvJ02M4sxMjg4SL1eR0TYsGEDw8PD9PX10d7ejogUN3a1
GqpKCIE8z5mdnUVVqVarbN++nba2Nvbu3csDDzyAqrJ8+atb+zjn6e/vZ/Xq1axatYq1a9fS29tL
lmUMDQ1RKpXOm9EXvV6v1+tWr9eZnp5mZmaGWq1GjLHF62aiNZ+bnPfe45xrvTZzxMyYmZk56+LX
zKjX661DvHOOJElIkoRSqYT3/vLvRlW15eHCa4VxzdvmpjZDfubzuXeb3vuzqCEixBhbo0NTkyS5
PAr9L8j/96+U/w3yCoCXW14B8HLLvwDd67nwZIEPdgAAAABJRU5ErkJggg==">
</td>
<td class="content">You can mix both implementations and overrides in an adapter configuration.</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="_star_implementations_and_overrides">Star implementations and overrides</h3>
<div class="paragraph"><p>You can pass <span class="monospaced">*</span> as a name for implementations or overrides. In such cases, the provided closure
become the dispatch targets for all methods that do not have an implementation or override. Note
that providing both a star implementation and a star override is an error.</p></div>
<div class="paragraph"><p>Let us see a concrete example:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">let</span> <span class="nv">carbonCopy</span> <span class="o">=</span> <span class="nb">list</span><span class="p">[]</span> <span class="c"># <img alt="1" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAAAAABzHgM7AAAAAmJLR0QAAKqNIzIAAABjSURBVHja
VY6xDcAwCAS/pPQaLim9QmajdOk2I2SNrMEIlARIoigU8Cek/4e7zdHaWOYOVwaoA6wOCw05Y7FB
gE0tIWQ+sBcwKM8qoD/wB5wGL8hjfdzWrh01GRp1hInGjDoXwHgsFuzBVLQAAABDdEVYdFNvZnR3
YXJlAEAoIylJbWFnZU1hZ2ljayA0LjIuOCA5OS8wOC8wMSBjcmlzdHlAbXlzdGljLmVzLmR1cG9u
dC5jb22RuiG4AAAAKnRFWHRTaWduYXR1cmUANThhMDcyZTA3MGRhMjJmNjEzNWNiZDNlNDE0NTQ2
ZjloaiHtAAAADnRFWHRQYWdlADEyeDEyKzArMIRtu30AAAAASUVORK5CYII="></span>
<span class="kd">let</span> <span class="nv">conf</span> <span class="o">=</span> <span class="nb">map</span><span class="p">[</span>
  <span class="p">[</span><span class="s">&quot;extends</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s">&quot;java.util.ArrayList</span><span class="s2">&quot;</span><span class="p">],</span>
  <span class="p">[</span><span class="s">&quot;overrides</span><span class="s2">&quot;</span><span class="p">,</span> <span class="nb">map</span><span class="p">[</span>
    <span class="p">[</span><span class="s">&quot;*</span><span class="s2">&quot;</span><span class="p">,</span> <span class="p">|</span><span class="n">super</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">args</span><span class="p">|</span> <span class="p">{</span> <span class="c"># <img alt="2" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAAAAABzHgM7AAAAAmJLR0QAAKqNIzIAAAB7SURBVHja
HY6hFcMwDEQ/NDQsNSwU9Apdo7Cw0CsIBoZmhKzQEQJLDQsFVclHpHu693W429Zr7bu541Pg3kCm
Y0K75u9TEUPhuGgWU4mQDvieEaSQEnsT6zKPeZY0EUNtrHMCXvYUuSUg0PsMjUSvpysUT6OOSil9
izp/VNk1YJ8vf6MAAABDdEVYdFNvZnR3YXJlAEAoIylJbWFnZU1hZ2ljayA0LjIuOCA5OS8wOC8w
MSBjcmlzdHlAbXlzdGljLmVzLmR1cG9udC5jb22RuiG4AAAAKnRFWHRTaWduYXR1cmUAODBlYWU1
MjljOTRhN2Y0N2RlY2NmYWRhMjhhY2I5ZGblb7ENAAAADnRFWHRQYWdlADEyeDEyKzArMIRtu30A
AAAASUVORK5CYII="></span>
      <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s">&quot;add</span><span class="s2">&quot;</span> <span class="p">{</span>
        <span class="k">if</span> <span class="n">args</span><span class="o">:</span> <span class="nf">length</span><span class="p">()</span> <span class="o">==</span> <span class="mi">2</span> <span class="p">{</span>
          <span class="n">carbonCopy</span><span class="o">:</span> <span class="nf">add</span><span class="p">(</span><span class="n">args</span><span class="o">:</span> <span class="nf">get</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>  <span class="c"># <img alt="3" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAAAAABzHgM7AAAAAmJLR0QAAKqNIzIAAAB4SURBVHja
JU6rFcNADBM09BqBhl6ltDCwKxQeDOwKB7tGYGCoYaChK6cmlt7TD1W5uap/sgoVBnEXWBTSoOdx
7gpLDOAVorWC0ABdcBPqwZtx8Muf+DPXJpQ96Nu/LSMYl/n17oCOnplTOrpiwW3sUs4ZJmob5/wA
Ubg1Y/zrjUwAAABDdEVYdFNvZnR3YXJlAEAoIylJbWFnZU1hZ2ljayA0LjIuOCA5OS8wOC8wMSBj
cmlzdHlAbXlzdGljLmVzLmR1cG9udC5jb22RuiG4AAAAKnRFWHRTaWduYXR1cmUAODBiYmRhMjcy
NmRkYWNlOGFiOGEwMWY1OWRlMmViZGII/Q51AAAADnRFWHRQYWdlADEyeDEyKzArMIRtu30AAAAA
SUVORK5CYII="></span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="n">carbonCopy</span><span class="o">:</span> <span class="nf">add</span><span class="p">(</span><span class="n">args</span><span class="o">:</span> <span class="nf">get</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">args</span><span class="o">:</span> <span class="nf">get</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span> <span class="c"># <img alt="4" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAAAAABzHgM7AAAAAmJLR0QAAKqNIzIAAABzSURBVHja
HY0hEoUwEEMjkZVYZGVlr1CJxCKRXKPyy28reyVsZeXKsCFi573ZzAQk+x5jaQ6gFQAxIA8XceEN
ZEN3DkOCH/TobUoSVuAYwSSLyzbvaHWVFJxUmmp+PF+twrLkuXzLwPmZ8+OjtH8KS6pGvuoGNo5b
6rzDAAAAQ3RFWHRTb2Z0d2FyZQBAKCMpSW1hZ2VNYWdpY2sgNC4yLjggOTkvMDgvMDEgY3Jpc3R5
QG15c3RpYy5lcy5kdXBvbnQuY29tkbohuAAAACp0RVh0U2lnbmF0dXJlADlmODJmY2FjOWUwMzlj
YmRiNzIzODBhNDU5MTMyNGY1gLv4dgAAAA50RVh0UGFnZQAxMngxMiswKzCEbbt9AAAAAElFTkSu
QmCC"></span>
        <span class="p">}</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="n">super</span><span class="o">:</span> <span class="nf">spread</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>  <span class="c"># <img alt="5" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAAAAABzHgM7AAAAAmJLR0QAAKqNIzIAAAB2SURBVHja
FY6hEcQwDAQPChqGGhoaqgWX8PUYBhqGBn4rX0JooKDh/UlsZ3b2BJKXH8XPTYLh1lpt1h+BwxkR
A23jhsCQd2IkfH9T3HEkzPFegCXUKSUSpJUPsN7UFOgc9VkZUBoz9l0yrVHZarUcJZeb9XznDyNb
Ny9CX3/7AAAAQ3RFWHRTb2Z0d2FyZQBAKCMpSW1hZ2VNYWdpY2sgNC4yLjggOTkvMDgvMDEgY3Jp
c3R5QG15c3RpYy5lcy5kdXBvbnQuY29tkbohuAAAACp0RVh0U2lnbmF0dXJlAGZlNjkwNDYzMzc5
ZWIyNWU1NjJmY2M4Y2M5YjNjN2Uw37I5ngAAAA50RVh0UGFnZQAxMngxMiswKzCEbbt9AAAAAElF
TkSuQmCC"></span>
    <span class="p">}</span>
  <span class="p">]]</span>
<span class="p">]]</span>
<span class="kd">let</span> <span class="nv">list</span> <span class="o">=</span> <span class="nf">AdapterFabric</span><span class="p">()</span><span class="o">:</span> <span class="nf">maker</span><span class="p">(</span><span class="n">conf</span><span class="p">)</span><span class="o">:</span> <span class="nf">newInstance</span><span class="p">()</span>
<span class="n">list</span><span class="o">:</span> <span class="nf">add</span><span class="p">(</span><span class="s">&quot;bar</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="n">list</span><span class="o">:</span> <span class="nf">add</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s">&quot;foo</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="n">list</span><span class="o">:</span> <span class="nf">add</span><span class="p">(</span><span class="s">&quot;baz</span><span class="s2">&quot;</span><span class="p">)</span>  <span class="c"># <img alt="6" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAAAAABzHgM7AAAAAmJLR0QAAKqNIzIAAAB9SURBVHja
FY0hEsMwDAQXChaaBgoG+guB/UZhvlAYWFhqmCeUBvoJoYaCgqrMbudu9oiI86m6tQyEb1AU6kjI
3GxcQnVO2K0Uq/Ahi6tpFWClwLDe+wNkwt0R2yfk7Negv+csw8uWZR4c+NS4Z6FOTKmkTO88Df9W
kfXwiD+zczjqCrgbWQAAAEN0RVh0U29mdHdhcmUAQCgjKUltYWdlTWFnaWNrIDQuMi44IDk5LzA4
LzAxIGNyaXN0eUBteXN0aWMuZXMuZHVwb250LmNvbZG6IbgAAAAqdEVYdFNpZ25hdHVyZQBkMjVk
NzE3NmQ2N2EwMzhhZmMxYzU2NTU4ZTNkZmIxYf0Q9bUAAAAOdEVYdFBhZ2UAMTJ4MTIrMCswhG27
fQAAAABJRU5ErkJggg=="></span>
</pre></div></div></div>
<div class="colist arabic"><table>
<tr><td><img alt="1" src="data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAAAAABzHgM7AAAAAmJLR0QAAKqNIzIAAABjSURBVHja
VY6xDcAwCAS/pPQaLim9QmajdOk2I2SNrMEIlARIoigU8Cek/4e7zdHaWOYOVwaoA6wOCw05Y7FB
gE0tIWQ+sBcwKM8qoD/wB5wGL8hjfdzWrh01GRp1hInGjDoXwHgsFuzBVLQAAABDdEVYdFNvZnR3
YXJlAEAoIylJbWFnZU1hZ2ljayA0LjIuOCA5OS8wOC8wMSBjcmlzdHlAbXlzdGljLmVzLmR1cG9u
dC5jb22RuiG4AAAAKnRFWHRTaWduYXR1cmUANThhMDcyZTA3MGRhMjJmNjEzNWNiZDNlNDE0NTQ2
ZjloaiHtAAAADnRFWHRQYWdlADEyeDEyKzArMIRtu30AAAAASUVORK5CYII="></td><td>
We create an empty list, more on that later.
</td></tr>
<tr><td><img alt="2" src="data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAAAAABzHgM7AAAAAmJLR0QAAKqNIzIAAAB7SURBVHja
HY6hFcMwDEQ/NDQsNSwU9Apdo7Cw0CsIBoZmhKzQEQJLDQsFVclHpHu693W429Zr7bu541Pg3kCm
Y0K75u9TEUPhuGgWU4mQDvieEaSQEnsT6zKPeZY0EUNtrHMCXvYUuSUg0PsMjUSvpysUT6OOSil9
izp/VNk1YJ8vf6MAAABDdEVYdFNvZnR3YXJlAEAoIylJbWFnZU1hZ2ljayA0LjIuOCA5OS8wOC8w
MSBjcmlzdHlAbXlzdGljLmVzLmR1cG9udC5jb22RuiG4AAAAKnRFWHRTaWduYXR1cmUAODBlYWU1
MjljOTRhN2Y0N2RlY2NmYWRhMjhhY2I5ZGblb7ENAAAADnRFWHRQYWdlADEyeDEyKzArMIRtu30A
AAAASUVORK5CYII="></td><td>
A star override takes 3 parameters: the parent class implementation, the method name and the
    arguments into an array (the element at index 0 is the receiver).
</td></tr>
<tr><td><img alt="3" src="data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAAAAABzHgM7AAAAAmJLR0QAAKqNIzIAAAB4SURBVHja
JU6rFcNADBM09BqBhl6ltDCwKxQeDOwKB7tGYGCoYaChK6cmlt7TD1W5uap/sgoVBnEXWBTSoOdx
7gpLDOAVorWC0ABdcBPqwZtx8Muf+DPXJpQ96Nu/LSMYl/n17oCOnplTOrpiwW3sUs4ZJmob5/wA
Ubg1Y/zrjUwAAABDdEVYdFNvZnR3YXJlAEAoIylJbWFnZU1hZ2ljayA0LjIuOCA5OS8wOC8wMSBj
cmlzdHlAbXlzdGljLmVzLmR1cG9udC5jb22RuiG4AAAAKnRFWHRTaWduYXR1cmUAODBiYmRhMjcy
NmRkYWNlOGFiOGEwMWY1OWRlMmViZGII/Q51AAAADnRFWHRQYWdlADEyeDEyKzArMIRtu30AAAAA
SUVORK5CYII="></td><td>
We copy into <span class="monospaced">carbonCopy</span>.
</td></tr>
<tr><td><img alt="4" src="data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAAAAABzHgM7AAAAAmJLR0QAAKqNIzIAAABzSURBVHja
HY0hEoUwEEMjkZVYZGVlr1CJxCKRXKPyy28reyVsZeXKsCFi573ZzAQk+x5jaQ6gFQAxIA8XceEN
ZEN3DkOCH/TobUoSVuAYwSSLyzbvaHWVFJxUmmp+PF+twrLkuXzLwPmZ8+OjtH8KS6pGvuoGNo5b
6rzDAAAAQ3RFWHRTb2Z0d2FyZQBAKCMpSW1hZ2VNYWdpY2sgNC4yLjggOTkvMDgvMDEgY3Jpc3R5
QG15c3RpYy5lcy5kdXBvbnQuY29tkbohuAAAACp0RVh0U2lnbmF0dXJlADlmODJmY2FjOWUwMzlj
YmRiNzIzODBhNDU5MTMyNGY1gLv4dgAAAA50RVh0UGFnZQAxMngxMiswKzCEbbt9AAAAAElFTkSu
QmCC"></td><td>
Same here, but we dispatch to a different method
</td></tr>
<tr><td><img alt="5" src="data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAAAAABzHgM7AAAAAmJLR0QAAKqNIzIAAAB2SURBVHja
FY6hEcQwDAQPChqGGhoaqgWX8PUYBhqGBn4rX0JooKDh/UlsZ3b2BJKXH8XPTYLh1lpt1h+BwxkR
A23jhsCQd2IkfH9T3HEkzPFegCXUKSUSpJUPsN7UFOgc9VkZUBoz9l0yrVHZarUcJZeb9XznDyNb
Ny9CX3/7AAAAQ3RFWHRTb2Z0d2FyZQBAKCMpSW1hZ2VNYWdpY2sgNC4yLjggOTkvMDgvMDEgY3Jp
c3R5QG15c3RpYy5lcy5kdXBvbnQuY29tkbohuAAAACp0RVh0U2lnbmF0dXJlAGZlNjkwNDYzMzc5
ZWIyNWU1NjJmY2M4Y2M5YjNjN2Uw37I5ngAAAA50RVh0UGFnZQAxMngxMiswKzCEbbt9AAAAAElF
TkSuQmCC"></td><td>
We just call the parent class implementation of whatever method it is. Note that <span class="monospaced">spread</span> allows
    to dispatch a closure call with an array of arguments.
</td></tr>
<tr><td><img alt="6" src="data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAAAAABzHgM7AAAAAmJLR0QAAKqNIzIAAAB9SURBVHja
FY0hEsMwDAQXChaaBgoG+guB/UZhvlAYWFhqmCeUBvoJoYaCgqrMbudu9oiI86m6tQyEb1AU6kjI
3GxcQnVO2K0Uq/Ahi6tpFWClwLDe+wNkwt0R2yfk7Negv+csw8uWZR4c+NS4Z6FOTKmkTO88Df9W
kfXwiD+zczjqCrgbWQAAAEN0RVh0U29mdHdhcmUAQCgjKUltYWdlTWFnaWNrIDQuMi44IDk5LzA4
LzAxIGNyaXN0eUBteXN0aWMuZXMuZHVwb250LmNvbZG6IbgAAAAqdEVYdFNpZ25hdHVyZQBkMjVk
NzE3NmQ2N2EwMzhhZmMxYzU2NTU4ZTNkZmIxYf0Q9bUAAAAOdEVYdFBhZ2UAMTJ4MTIrMCswhG27
fQAAAABJRU5ErkJggg=="></td><td>
At this point <span class="monospaced">carbonCopy</span> contains <span class="monospaced">["foo", "bar", "baz"]</span> (and so does <span class="monospaced">list</span>, too).
</td></tr>
</table></div>
<div class="paragraph"><p>The case of star implementation is similar, except that the closure takes only 2 parameters:
<span class="monospaced">|name, args|</span>.</p></div>
</div>
<div class="sect2">
<h3 id="_misc_2">Misc.</h3>
<div class="paragraph"><p>The <span class="monospaced">AdapterFabric</span> constructor can also take a class loader as a parameter. When none is provided,
the current thread context class loader is being used as a parent for an <span class="monospaced">AdapterFabric</span>-internal
classloader. There is also a static method <span class="monospaced">withParentClassLoader(classloader)</span> to obtain a fabric
whose class loader is based on a provided parent.</p></div>
<div class="paragraph"><p>As it is often the case for dynamic languages on the JVM, overloaded methods with the same name but
different methods are painful. In such cases, we suggest that you take advantage of
star-implementations or star-overrides as illustrated above on a <span class="monospaced">ArrayList</span> subclass where the 2
<span class="monospaced">add(obj)</span> and <span class="monospaced">add(index, obj)</span> methods are being intercepted.</p></div>
<div class="paragraph"><p>Finally we do not encourage you to use adapters as part of Golo code outside of providing bridges to
third-party APIs.</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_decorators">Decorators</h2>
<div class="sectionbody">
<div class="paragraph"><p>Golo feature Python-like decorators.</p></div>
<div class="sect2">
<h3 id="_presentation">Presentation</h3>
<div class="paragraph"><p>Decorators are similar in syntax and purpose to Java annotations.
However, the concepts behind them are very different. Indeed, whereas Java
annotations are compiler or VM directives, decorators are actually plain
functions, more precisely higher order functions.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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">
</td>
<td class="content">Higher order functions (HOF) are functions that process functions, i.e. that take
a function as parameter, and may return a new function.</td>
</tr></table>
</div>
<div class="paragraph"><p>A decorator is thus a function that take the function to decorate as parameter,
and return a new function, generally a wrapper that do some stuffs before or
after calling the original function.</p></div>
<div class="paragraph"><p>The name can remind the well known
<a href="http://en.wikipedia.org/wiki/Decorator_pattern">GoF pattern</a>, with good reason.
This pattern describe a design that allow an object to be augmented by wrapping
it in an other object with the same interface, delegating operations to the
wrapped object. This is exactly what a decorator does here, the interface
being "function" (more precisely a <span class="monospaced">java.lang.invoke.MethodHandle</span>).</p></div>
</div>
<div class="sect2">
<h3 id="_principles_and_syntax">Principles and syntax</h3>
<div class="paragraph"><p>As in Python, and similarly to Java annotations, a decorator is used with a
<span class="monospaced">@</span> prefix before the function definition. As an example, the decorator
<span class="monospaced">deco1</span> only prints its name before returning the result unchanged</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">function</span> <span class="nf">deco1</span> <span class="o">=</span> <span class="p">|</span><span class="nb">fun</span><span class="p">|</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">|</span><span class="n">args</span><span class="o">...</span><span class="p">|</span> <span class="p">{</span>
    <span class="k">return</span> <span class="s">&quot;deco1 + </span><span class="s2">&quot;</span> <span class="o">+</span> <span class="nb">fun</span><span class="o">:</span> <span class="nf">invokeWithArguments</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div></div></div>
<div class="paragraph"><p>It can be used as:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="err">@</span><span class="n">deco1</span>
<span class="kd">function</span> <span class="nf">foo</span> <span class="o">=</span> <span class="p">|</span><span class="n">a</span><span class="p">|</span> <span class="p">{</span>
  <span class="k">return</span> <span class="s">&quot;foo: </span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">a</span>
<span class="p">}</span>
</pre></div></div></div>
<div class="paragraph"><p>Here, calling <span class="monospaced">println(foo(1))</span> will print <span class="monospaced">deco1 + foo: 1</span>.</p></div>
<div class="paragraph"><p>To be the most generic, the function created by a decorator should be a
variable arity function, and thus call the decorated function with
<span class="monospaced">invokeWithArguments</span>, such that it can be applied to any function, regardless
of its arity, as in the previous example.</p></div>
<div class="paragraph"><p>Indeed, suppose you what to a decorator <span class="monospaced">dec</span> (that does nothing) used like:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="err">@</span><span class="n">dec</span>
<span class="kd">function</span> <span class="nf">add</span> <span class="o">=</span> <span class="p">|</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
</pre></div></div></div>
<div class="paragraph"><p>Such a decorator can be implemented as:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">function</span> <span class="nf">dec</span> <span class="o">=</span> <span class="p">|</span><span class="n">func</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="p">|</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="nf">func</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
</pre></div></div></div>
<div class="paragraph"><p>But in that case, it will be applicable to two parameters functions only.
On the other hand, you cannot do:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">function</span> <span class="nf">dec</span> <span class="o">=</span> <span class="p">|</span><span class="n">func</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="p">|</span><span class="n">args</span><span class="o">...</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="nf">func</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
</pre></div></div></div>
<div class="paragraph"><p>Indeed, this will throw an exception because <span class="monospaced">func</span> is not a variable arity
function (just a reference on <span class="monospaced">add</span> function) and thus cannot take an array
as parameter. In this case, the decorator have to invoke the original function
like this:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">function</span> <span class="nf">dec</span> <span class="o">=</span> <span class="p">|</span><span class="n">func</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="p">|</span><span class="n">args</span><span class="o">...</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="nf">func</span><span class="p">(</span><span class="n">args</span><span class="o">:</span> <span class="nf">get</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="n">args</span><span class="o">:</span> <span class="nf">get</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
</pre></div></div></div>
<div class="paragraph"><p>which is equivalent to the first form, but is not generic. The more generic
decorator is thus:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">function</span> <span class="nf">dec</span> <span class="o">=</span> <span class="p">|</span><span class="n">func</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="p">|</span><span class="n">args</span><span class="o">...</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="n">func</span><span class="o">:</span> <span class="nf">invokeWithArguments</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
</pre></div></div></div>
<div class="paragraph"><p>which can deal with any function.</p></div>
<div class="paragraph"><p>As illustrated, the decorator is just a wrapper (closure) around the decorated
function. The <span class="monospaced">@</span> syntax is just syntactic sugar. Indeed, it can also be used
as such:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">function</span> <span class="nf">bar</span> <span class="o">=</span> <span class="p">|</span><span class="n">a</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="s">&quot;bar: </span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">a</span>

<span class="kd">function</span> <span class="nf">main</span> <span class="o">=</span> <span class="p">|</span><span class="n">args</span><span class="p">|</span> <span class="p">{</span>
  <span class="nb">println</span><span class="p">(</span><span class="nf">deco1</span><span class="p">(</span><span class="o">^</span><span class="n">bar</span><span class="p">)(</span><span class="mi">1</span><span class="p">))</span>

  <span class="kd">let</span> <span class="nv">decobar</span> <span class="o">=</span> <span class="nf">deco1</span><span class="p">(</span><span class="o">^</span><span class="n">bar</span><span class="p">)</span>
  <span class="nb">println</span><span class="p">(</span><span class="nf">decobar</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>

  <span class="nb">println</span><span class="p">(</span><span class="nf">deco1</span><span class="p">(|</span><span class="n">a</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="s">&quot;bar: </span><span class="s2">&quot;</span><span class="o">+</span><span class="n">a</span><span class="p">)(</span><span class="mi">1</span><span class="p">))</span>
<span class="p">}</span>
</pre></div></div></div>
<div class="paragraph"><p>prints all <span class="monospaced">deco1 + bar: 1</span>.</p></div>
<div class="paragraph"><p>Decorators can also be stacked. For instance:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">function</span> <span class="nf">deco2</span> <span class="o">=</span> <span class="p">|</span><span class="nb">fun</span><span class="p">|</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">|</span><span class="n">args</span><span class="o">...</span><span class="p">|</span> <span class="p">{</span>
    <span class="k">return</span> <span class="s">&quot;deco2 + </span><span class="s2">&quot;</span> <span class="o">+</span> <span class="nb">fun</span><span class="o">:</span> <span class="nf">invokeWithArguments</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="err">@</span><span class="n">deco2</span>
<span class="err">@</span><span class="n">deco1</span>
<span class="kd">function</span> <span class="nf">baz</span> <span class="o">=</span> <span class="p">|</span><span class="n">a</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="s">&quot;baz: </span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">a</span>
</pre></div></div></div>
<div class="paragraph"><p><span class="monospaced">println(baz(1))</span> will print <span class="monospaced">deco2 + deco1 + baz: 1</span></p></div>
<div class="paragraph"><p>This result can also be achieved by composing decorators, as in:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">let</span> <span class="nv">deco3</span> <span class="o">=</span> <span class="o">^</span><span class="n">deco1</span><span class="o">:</span> <span class="nf">andThen</span><span class="p">(</span><span class="o">^</span><span class="n">deco2</span><span class="p">)</span>

<span class="err">@</span><span class="n">deco3</span>
<span class="kd">function</span> <span class="nf">spam</span> <span class="o">=</span> <span class="p">|</span><span class="n">a</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="s">&quot;spam: </span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">a</span>
</pre></div></div></div>
<div class="paragraph"><p>Again, <span class="monospaced">println(spam(1))</span> will print <span class="monospaced">deco2 + deco1 + spam: 1</span></p></div>
<div class="paragraph"><p>Moreover, since decorator are just higher order functions, they can be closure
on a first argument, i.e. parametrized decorators, as illustrated in the
following listing:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kn">module</span> <span class="nn">tests.LogDeco</span>

<span class="kd">function</span> <span class="nf">log</span> <span class="o">=</span> <span class="p">|</span><span class="n">msg</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="p">|</span><span class="nb">fun</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="p">|</span><span class="n">args</span><span class="o">...</span><span class="p">|</span> <span class="p">{</span>
  <span class="nb">println</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
  <span class="k">return</span> <span class="nb">fun</span><span class="o">:</span> <span class="nf">invokeWithArguments</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
<span class="p">}</span>

<span class="err">@</span><span class="nf">log</span><span class="p">(</span><span class="s">&quot;calling foo</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="kd">function</span> <span class="nf">foo</span> <span class="o">=</span> <span class="p">|</span><span class="n">a</span><span class="p">|</span> <span class="p">{</span>
  <span class="nb">println</span><span class="p">(</span><span class="s">&quot;foo got a </span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">a</span><span class="p">)</span>
<span class="p">}</span>

<span class="err">@</span><span class="nf">log</span><span class="p">(</span><span class="s">&quot;I&#39;am a bar</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="kd">function</span> <span class="nf">bar</span> <span class="o">=</span> <span class="p">|</span><span class="n">a</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="mi">2</span><span class="o">*</span><span class="n">a</span>

<span class="kd">function</span> <span class="nf">main</span> <span class="o">=</span> <span class="p">|</span><span class="n">args</span><span class="p">|</span> <span class="p">{</span>
  <span class="nf">foo</span><span class="p">(</span><span class="s">&quot;bar</span><span class="s2">&quot;</span><span class="p">)</span>
  <span class="nb">println</span><span class="p">(</span><span class="nf">bar</span><span class="p">(</span><span class="mi">21</span><span class="p">))</span>
<span class="p">}</span>
</pre></div></div></div>
<div class="paragraph"><p>will print</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>calling foo
foo got a bar
I'am a bar
42</pre>
</div></div>
<div class="paragraph"><p>Here, <span class="monospaced">log</span> create a closure on the message, and return the decorator function.
Thus, <span class="monospaced">log("hello")</span> is a function that take a function as parameter, and
return a new function printing the message (<span class="monospaced">hello</span>) before delegating to the
inner function.</p></div>
<div class="paragraph"><p>Again, since all of this are just functions, you can create shortcuts:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">let</span> <span class="nv">sayHello</span> <span class="o">=</span> <span class="nf">log</span><span class="p">(</span><span class="s">&quot;Hello</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="err">@</span><span class="n">sayHello</span>
<span class="kd">function</span> <span class="nf">baz</span> <span class="o">=</span> <span class="o">-&gt;</span> <span class="s">&quot;Goodbye</span><span class="s2">&quot;</span>
</pre></div></div></div>
<div class="paragraph"><p>A call to <span class="monospaced">println(baz())</span> will print</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>Hello
Goodbye</pre>
</div></div>
<div class="paragraph"><p>The only requirement is that the effective decorator (the expression following
the <span class="monospaced">@</span>) is eventually a HOF returning a closure on the decorated function. As
an example, it can be as elaborated as:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">function</span> <span class="nf">log</span> <span class="o">=</span> <span class="p">|</span><span class="n">msgBefore</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="p">|</span><span class="n">msgAfter</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="p">|</span><span class="n">func</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="p">|</span><span class="n">args</span><span class="o">...</span><span class="p">|</span> <span class="p">{</span>
  <span class="nb">println</span><span class="p">(</span><span class="n">msgBefore</span><span class="p">)</span>
  <span class="kd">let</span> <span class="nv">res</span> <span class="o">=</span> <span class="n">func</span><span class="o">:</span> <span class="nf">invokeWithArguments</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
  <span class="nb">println</span><span class="p">(</span><span class="n">msgAfter</span><span class="p">)</span>
  <span class="k">return</span> <span class="n">res</span>
<span class="p">}</span>

<span class="err">@</span><span class="nf">log</span><span class="p">(</span><span class="s">&quot;enter foo</span><span class="s2">&quot;</span><span class="p">)(</span><span class="s">&quot;exit foo</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="kd">function</span> <span class="nf">foo</span> <span class="o">=</span> <span class="p">|</span><span class="n">a</span><span class="p">|</span> <span class="p">{</span>
  <span class="nb">println</span><span class="p">(</span><span class="s">&quot;foo: </span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">a</span><span class="p">)</span>
<span class="p">}</span>
</pre></div></div></div>
<div class="paragraph"><p>where a call <span class="monospaced">foo("bar")</span> will print</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>enter foo
foo: bar
exit foo</pre>
</div></div>
<div class="paragraph"><p>and with</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">function</span> <span class="nf">logEnterExit</span> <span class="o">=</span> <span class="p">|</span><span class="n">name</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="nf">log</span><span class="p">(</span><span class="s">&quot;# enter </span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">name</span><span class="p">)(</span><span class="s">&quot;# exit </span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">name</span><span class="p">)</span>

<span class="err">@</span><span class="nf">logEnterExit</span><span class="p">(</span><span class="s">&quot;bar</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="kd">function</span> <span class="nf">bar</span> <span class="o">=</span> <span class="p">{</span> <span class="nb">println</span><span class="p">(</span><span class="s">&quot;doing something...</span><span class="s2">&quot;</span><span class="p">)</span> <span class="p">}</span>
</pre></div></div></div>
<div class="paragraph"><p>calling <span class="monospaced">bar()</span> will print</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># enter bar
doing something...
# exit bar</pre>
</div></div>
<div class="paragraph"><p>or even, without decorator syntax:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">function</span> <span class="nf">main</span> <span class="o">=</span> <span class="p">|</span><span class="n">args</span><span class="p">|</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nv">strange_use</span> <span class="o">=</span> <span class="nf">log</span><span class="p">(</span><span class="s">&quot;hello</span><span class="s2">&quot;</span><span class="p">)(</span><span class="s">&quot;goodbye</span><span class="s2">&quot;</span><span class="p">)({</span><span class="nb">println</span><span class="p">(</span><span class="s">&quot;:p</span><span class="s2">&quot;</span><span class="p">)})</span>
  <span class="nf">strange_use</span><span class="p">()</span>

  <span class="nf">log</span><span class="p">(</span><span class="s">&quot;another</span><span class="s2">&quot;</span><span class="p">)(</span><span class="s">&quot;use</span><span class="s2">&quot;</span><span class="p">)(|</span><span class="n">a</span><span class="p">|{</span><span class="nb">println</span><span class="p">(</span><span class="n">a</span><span class="p">)})(</span><span class="s">&quot;strange</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="p">}</span>
</pre></div></div></div>
<div class="paragraph"><p>Let&#8217;s now illustrate with some use cases and examples, with a presentation of
some decorators of the standard module
<a href="./golodoc/gololang/Decorators"><span class="monospaced">gololang.Decorators</span></a>.</p></div>
</div>
<div class="sect2">
<h3 id="_use_cases_and_examples">Use cases and examples</h3>
<div class="paragraph"><p>Use cases are at least the same as
<a href="http://en.wikipedia.org/wiki/Aspect-oriented_programming"><em>aspect oriented programming</em></a>
(AOP) and the
<a href="http://en.wikipedia.org/wiki/Decorator_pattern"><em>decorator design pattern</em></a>, but
your imagination is your limit.
Some are presented here for illustration.</p></div>
<div class="sect3">
<h4 id="_logging">Logging</h4>
<div class="paragraph"><p>Logging is a classical example use case of AOP. See the
<a href="#_principles_and_syntax">Principles and syntax</a> section for an example.</p></div>
</div>
<div class="sect3">
<h4 id="_pre_post_conditions_checking">Pre/post conditions checking</h4>
<div class="paragraph"><p>Decorators can be used to check pre-conditions, that is conditions that must
hold for arguments, and post-conditions, that is conditions that must hold for
returned values, of a function.</p></div>
<div class="paragraph"><p>Indeed, a decorated can execute code before delegating to the decorated
function, of after the delegation.</p></div>
<div class="paragraph"><p>The module <a href="./golodoc/gololang/Decorators"><span class="monospaced">gololang.Decorators</span></a> provide two
decorators and several utility functions to check pre and post conditions.</p></div>
<div class="paragraph"><p><span class="monospaced">checkResult</span> is a parametrized decorator taking a checker as parameter. It
checks that the result of the decorated function is valid.</p></div>
<div class="paragraph"><p><span class="monospaced">checkArguments</span> is a variable arity function, taking as much checkers as the
decorated function arguments. It checks that the arguments of the decorated
function are valid according to the corresponding checker (1st argument checked
by 1st checker, and so on).</p></div>
<div class="paragraph"><p>A checker is a function that raises an exception if its argument is not valid
(e.g. using <span class="monospaced">require</span>) or returns it unchanged, allowing checkers to be chained
using the <span class="monospaced">andThen</span> method.</p></div>
<div class="paragraph"><p>As an example, one can check that the arguments and result of a function are
integers with:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">function</span> <span class="nf">isInteger</span> <span class="o">=</span> <span class="p">|</span><span class="n">v</span><span class="p">|</span> <span class="p">{</span>
  <span class="nf">require</span><span class="p">(</span><span class="n">v</span> <span class="ow">oftype</span> <span class="nn">Integer.class</span><span class="p">,</span> <span class="n">v</span> <span class="o">+</span> <span class="s">&quot;is not an Integer</span><span class="s2">&quot;</span><span class="p">)</span>
  <span class="k">return</span> <span class="n">v</span>
<span class="p">}</span>

<span class="err">@</span><span class="nf">checkResult</span><span class="p">(</span><span class="n">isInteger</span><span class="p">)</span>
<span class="err">@</span><span class="nf">checkArguments</span><span class="p">(</span><span class="n">isInteger</span><span class="p">,</span> <span class="n">isInteger</span><span class="p">)</span>
<span class="kd">function</span> <span class="nf">add</span> <span class="o">=</span> <span class="p">|</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
</pre></div></div></div>
<div class="paragraph"><p>or that the argument is a positive integer:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">function</span> <span class="nf">isPositive</span> <span class="o">=</span> <span class="p">|</span><span class="n">v</span><span class="p">|</span> <span class="p">{</span>
  <span class="nf">require</span><span class="p">(</span><span class="n">v</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">v</span> <span class="o">+</span> <span class="s">&quot;is not &gt; 0</span><span class="s2">&quot;</span><span class="p">)</span>
  <span class="k">return</span> <span class="n">v</span>
<span class="p">}</span>

<span class="err">@</span><span class="nf">checkArguments</span><span class="p">(</span><span class="n">isInteger</span><span class="o">:</span> <span class="nf">andThen</span><span class="p">(</span><span class="n">isPositive</span><span class="p">))</span>
<span class="kd">function</span> <span class="nf">inv</span> <span class="o">=</span> <span class="p">|</span><span class="n">v</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="n">v</span>
</pre></div></div></div>
<div class="paragraph"><p>Of course, again, you can take shortcuts:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">let</span> <span class="nv">isPositiveInt</span> <span class="o">=</span> <span class="n">isInteger</span><span class="o">:</span> <span class="nf">andThen</span><span class="p">(</span><span class="n">isPositive</span><span class="p">)</span>

<span class="err">@</span><span class="nf">checkResult</span><span class="p">(</span><span class="n">isPositiveInt</span><span class="p">)</span>
<span class="err">@</span><span class="nf">checkArguments</span><span class="p">(</span><span class="n">isPositiveInt</span><span class="p">)</span>
<span class="kd">function</span> <span class="nf">double</span> <span class="o">=</span> <span class="p">|</span><span class="n">v</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">v</span>
</pre></div></div></div>
<div class="paragraph"><p>or even</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">let</span> <span class="nv">myCheck</span> <span class="o">=</span> <span class="nf">checkArguments</span><span class="p">(</span><span class="n">isInteger</span><span class="o">:</span> <span class="nf">andThen</span><span class="p">(</span><span class="n">isPositive</span><span class="p">))</span>

<span class="err">@</span><span class="n">myCheck</span>
<span class="kd">function</span> <span class="nf">inv</span> <span class="o">=</span> <span class="p">|</span><span class="n">v</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="n">v</span>

<span class="err">@</span><span class="n">myCheck</span>
<span class="kd">function</span> <span class="nf">mul</span> <span class="o">=</span> <span class="p">|</span><span class="n">v</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="mi">10</span> <span class="o">*</span> <span class="n">v</span>
</pre></div></div></div>
<div class="paragraph"><p>Several factory functions are available in
<a href="./golodoc/gololang/Decorators"><span class="monospaced">gololang.Decorators</span></a> to ease the creation
of checkers:</p></div>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">any</span> is a void checker that does nothing. It can used when you need to check
  only some arguments of a n-ary function.
</p>
</li>
<li>
<p>
<span class="monospaced">asChecker</span> is a factory that takes a boolean function and an error message
  and returns the corresponding checker. For instance:
</p>
</li>
</ul></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">let</span> <span class="nv">isPositive</span> <span class="o">=</span> <span class="nf">asChecker</span><span class="p">(|</span><span class="n">v</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="n">v</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s">&quot;is not positive</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div></div></div>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">isOfType</span> is a factory function that returns a function checking types,
   e.g.
</p>
</li>
</ul></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">let</span> <span class="nv">isInteger</span> <span class="o">=</span> <span class="nf">isOfType</span><span class="p">(</span><span class="nn">Integer.class</span><span class="p">)</span>
</pre></div></div></div>
<div class="paragraph"><p>The full set of standard checkers is documented in the generated <strong>golodoc</strong>
(hint: look for <span class="monospaced">doc/golodoc</span> in the Golo distribution).</p></div>
</div>
<div class="sect3">
<h4 id="_locking">Locking</h4>
<div class="paragraph"><p>As seen, decorator can be used to wrap a function call between checking
operation, but also between a lock/unlock in a concurrent context:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">java.util.concurrent.locks</span>

<span class="kd">function</span> <span class="nf">withLock</span> <span class="o">=</span> <span class="p">|</span><span class="n">lock</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="p">|</span><span class="nb">fun</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="p">|</span><span class="n">args</span><span class="o">...</span><span class="p">|</span> <span class="p">{</span>
  <span class="n">lock</span><span class="o">:</span> <span class="nf">lock</span><span class="p">()</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nb">fun</span><span class="o">:</span> <span class="nf">invokeWithArguments</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
  <span class="p">}</span> <span class="k">finally</span> <span class="p">{</span>
    <span class="n">lock</span><span class="o">:</span> <span class="nf">unlock</span><span class="p">()</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kd">let</span> <span class="nv">myLock</span> <span class="o">=</span> <span class="nf">ReentrantLock</span><span class="p">()</span>

<span class="err">@</span><span class="nf">withLock</span><span class="p">(</span><span class="n">myLock</span><span class="p">)</span>
<span class="kd">function</span> <span class="nf">foo</span> <span class="o">=</span> <span class="p">|</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">|</span> <span class="p">{</span>
  <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
<span class="p">}</span>
</pre></div></div></div>
</div>
<div class="sect3">
<h4 id="_memoization">Memoization</h4>
<div class="paragraph"><p>Memoization is the optimization technique that stores the results of a expensive
computation to return them directly on subsequent calls. It is quite easy,
using decorators, to transform a function into a memoized one. The decorator
creates a closure on a hashmap, and check the existence of the results before
delegating to the decorated function, and storing the result in the hashmap if
needed.</p></div>
<div class="paragraph"><p>Such a decorator is provided in the
<a href="./golodoc/gololang/Decorators"><span class="monospaced">gololang.Decorators</span></a> module, presented
here as an example:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">function</span> <span class="nf">memoizer</span> <span class="o">=</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nv">cache</span> <span class="o">=</span> <span class="nb">map</span><span class="p">[]</span>
  <span class="k">return</span> <span class="p">|</span><span class="nb">fun</span><span class="p">|</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">|</span><span class="n">args</span><span class="o">...</span><span class="p">|</span> <span class="p">{</span>
      <span class="kd">let</span> <span class="nv">key</span> <span class="o">=</span> <span class="p">[</span><span class="nb">fun</span><span class="o">:</span> <span class="nf">hashCode</span><span class="p">(),</span> <span class="nf">Tuple</span><span class="p">(</span><span class="n">args</span><span class="p">)]</span>
      <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="n">cache</span><span class="o">:</span> <span class="nf">containsKey</span><span class="p">(</span><span class="n">key</span><span class="p">))</span> <span class="p">{</span>
        <span class="n">cache</span><span class="o">:</span> <span class="nf">add</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="nb">fun</span><span class="o">:</span> <span class="nf">invokeWithArguments</span><span class="p">(</span><span class="n">args</span><span class="p">))</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="n">cache</span><span class="o">:</span> <span class="nf">get</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div></div></div>
<div class="paragraph"><p>The cache key is the decorated function
and its call arguments, thus the decorator can be used for every module
functions. It must however be put in a module-level state, since in the current
implementation, the decoration is invoked at each call. For instance:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">let</span> <span class="nv">memo</span> <span class="o">=</span> <span class="nf">memoizer</span><span class="p">()</span>

<span class="err">@</span><span class="n">memo</span>
<span class="kd">function</span> <span class="nf">fib</span> <span class="o">=</span> <span class="p">|</span><span class="n">n</span><span class="p">|</span> <span class="p">{</span>
  <span class="k">if</span> <span class="n">n</span> <span class="o">&lt;=</span> <span class="mi">1</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">n</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nf">fib</span><span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="nf">fib</span><span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="mi">2</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="err">@</span><span class="n">memo</span>
<span class="kd">function</span> <span class="nf">fact</span> <span class="o">=</span> <span class="p">|</span><span class="n">n</span><span class="p">|</span> <span class="p">{</span>
  <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">{</span>
    <span class="k">return</span> <span class="mi">1</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">n</span> <span class="o">*</span> <span class="nf">fact</span><span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div></div></div>
</div>
<div class="sect3">
<h4 id="_generic_context">Generic context</h4>
<div class="paragraph"><p>Decorators can be used to define a generic wrapper around a function, that
extends the previous example (and can be used to implement most of them).
This functionality is provided by the
<a href="./golodoc/gololang/Decorators#withContext_context"><span class="monospaced">gololang.Decorators.withContext</span></a>
standard decorator. This decorator take a context, such as the one returned by
<a href="./golodoc/gololang/Decorators#defaultContext_"><span class="monospaced">gololang.Decorators.defaultContext</span></a>
function.</p></div>
<div class="paragraph"><p>A context is an object with 4 defined methods:</p></div>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">entry</span>, that takes and returns the function arguments.
         This method can be used to check arguments or apply transformation to them;
</p>
</li>
<li>
<p>
<span class="monospaced">exit</span>, that takes and returns the result of the function.
          This method can be used to check conditions or transform the result;
</p>
</li>
<li>
<p>
<span class="monospaced">catcher</span>, that deal with exceptions that occurs during function execution. It
         takes the exception as parameter;
</p>
</li>
<li>
<p>
<span class="monospaced">finallizer</span>, that is called in a <span class="monospaced">finally</span> clause after function execution.
</p>
</li>
</ul></div>
<div class="paragraph"><p>The context returned by <span class="monospaced">gololang.Decorators.defaultContext</span> is a void one, that
is <span class="monospaced">entry</span> and <span class="monospaced">exit</span> return their parameters unchanged,
<span class="monospaced">catcher</span> rethrow the exception and <span class="monospaced">finallizer</span> does nothing.</p></div>
<div class="paragraph"><p>The workflow of this decorator is as follow:</p></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
the context <span class="monospaced">entry</span> method is called on the function arguments;
</p>
</li>
<li>
<p>
the decorated function is called with arguments returned by <span class="monospaced">entry</span>;
</p>
<div class="olist loweralpha"><ol class="loweralpha">
<li>
<p>
if an exception is raised, <span class="monospaced">catcher</span> is called with it as parameter;
</p>
</li>
<li>
<p>
else the result is passed to <span class="monospaced">exit</span> and the returned value is returned
</p>
</li>
</ol></div>
</li>
<li>
<p>
the <span class="monospaced">finallizer</span> method is called.
</p>
</li>
</ol></div>
<div class="paragraph"><p>Any of theses methods can modify the context internal state.</p></div>
<div class="paragraph"><p>Here is an usage example:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kn">module</span> <span class="nn">samples.ContextDecorator</span>

<span class="kn">import</span> <span class="nn">gololang.Decorators</span>

<span class="kd">let</span> <span class="nv">myContext</span> <span class="o">=</span> <span class="nf">defaultContext</span><span class="p">()</span><span class="o">:</span>
  <span class="nf">count</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">:</span>
  <span class="nf">define</span><span class="p">(</span><span class="s">&quot;entry</span><span class="s2">&quot;</span><span class="p">,</span> <span class="p">|</span><span class="n">this</span><span class="p">,</span> <span class="n">args</span><span class="p">|</span> <span class="p">{</span>
    <span class="n">this</span><span class="o">:</span> <span class="nf">count</span><span class="p">(</span><span class="n">this</span><span class="o">:</span> <span class="nf">count</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
    <span class="nb">println</span><span class="p">(</span><span class="s">&quot;hello:</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">this</span><span class="o">:</span> <span class="nf">count</span><span class="p">())</span>
    <span class="k">return</span> <span class="n">args</span>
  <span class="p">})</span><span class="o">:</span>
  <span class="nf">define</span><span class="p">(</span><span class="s">&quot;exit</span><span class="s2">&quot;</span><span class="p">,</span> <span class="p">|</span><span class="n">this</span><span class="p">,</span> <span class="n">result</span><span class="p">|</span> <span class="p">{</span>
    <span class="nf">require</span><span class="p">(</span><span class="n">result</span> <span class="o">&gt;=</span> <span class="mi">3</span><span class="p">,</span> <span class="s">&quot;wrong value</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">println</span><span class="p">(</span><span class="s">&quot;goobye</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">result</span>
  <span class="p">})</span><span class="o">:</span>
  <span class="nf">define</span><span class="p">(</span><span class="s">&quot;catcher</span><span class="s2">&quot;</span><span class="p">,</span> <span class="p">|</span><span class="n">this</span><span class="p">,</span> <span class="n">e</span><span class="p">|</span> <span class="p">{</span>
    <span class="nb">println</span><span class="p">(</span><span class="s">&quot;Caught </span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">e</span><span class="p">)</span>
    <span class="k">throw</span> <span class="n">e</span>
  <span class="p">})</span><span class="o">:</span>
  <span class="nf">define</span><span class="p">(</span><span class="s">&quot;finallizer</span><span class="s2">&quot;</span><span class="p">,</span> <span class="p">|</span><span class="n">this</span><span class="p">|</span> <span class="p">{</span><span class="nb">println</span><span class="p">(</span><span class="s">&quot;do some cleanup</span><span class="s2">&quot;</span><span class="p">)})</span>


<span class="err">@</span><span class="nf">withContext</span><span class="p">(</span><span class="n">myContext</span><span class="p">)</span>
<span class="kd">function</span> <span class="nf">foo</span> <span class="o">=</span> <span class="p">|</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">|</span> <span class="p">{</span>
  <span class="nb">println</span><span class="p">(</span><span class="s">&quot;Hard computation</span><span class="s2">&quot;</span><span class="p">)</span>
  <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nf">main</span> <span class="o">=</span> <span class="p">|</span><span class="n">args</span><span class="p">|</span> <span class="p">{</span>
  <span class="nb">println</span><span class="p">(</span><span class="nf">foo</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>
  <span class="nb">println</span><span class="p">(</span><span class="s">&quot;====</span><span class="s2">&quot;</span><span class="p">)</span>
  <span class="nb">println</span><span class="p">(</span><span class="nf">withContext</span><span class="p">(</span><span class="n">myContext</span><span class="p">)(|</span><span class="n">a</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="mi">2</span><span class="o">*</span><span class="n">a</span><span class="p">)(</span><span class="mi">3</span><span class="p">))</span>
  <span class="nb">println</span><span class="p">(</span><span class="s">&quot;====</span><span class="s2">&quot;</span><span class="p">)</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="nb">println</span><span class="p">(</span><span class="nf">foo</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>
<span class="p">}</span>
</pre></div></div></div>
<div class="paragraph"><p>which prints</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>hello:1
Hard computation
goobye
do some cleanup
3
====
hello:2
goobye
do some cleanup
6
====
hello:3
Hard computation
Caught java.lang.AssertionError: wrong value
do some cleanup</pre>
</div></div>
<div class="paragraph"><p>Since the context is here shared between decorations, the <span class="monospaced">count</span> attribute is
incremented by each call to every decorated function, thus the output.</p></div>
<div class="paragraph"><p>This generic decorator can be used to easily implement condition checking,
logging, locking, and so on. It can be more interesting if you want to provide
several functionalities, instead of stacking more specific decorators, since
stacking, or decorator composition, adds indirection levels and deepen the call
stack.</p></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_dynamic_code_evaluation">Dynamic code evaluation</h2>
<div class="sectionbody">
<div class="paragraph"><p>Golo provides facilities for dynamically evaluating code from strings in the form of the
<span class="monospaced">gololang.EvaluationEnvironment</span> class. It provides an API that is useful both when used from Golo
code, or when used from a polyglot JVM application that embeds Golo.</p></div>
<div class="sect2">
<h3 id="_loading_a_module">Loading a module</h3>
<div class="paragraph"><p>The code of a complete module can be evaluated by the <span class="monospaced">asModule</span> method:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">let</span> <span class="nv">env</span> <span class="o">=</span> <span class="nn">gololang.EvaluationEnvironment</span><span class="p">()</span>
<span class="kd">let</span> <span class="nv">code</span> <span class="o">=</span>
<span class="s">&quot;&quot;&quot;</span>
<span class="s">module foo</span>

<span class="s">function a = -&gt; &quot;a!&quot;</span>
<span class="s">function b = -&gt; &quot;b!&quot;</span>
<span class="s">&quot;&quot;&quot;</span>
<span class="kd">let</span> <span class="nv">mod</span> <span class="o">=</span> <span class="n">env</span><span class="o">:</span> <span class="nf">asModule</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
<span class="kd">let</span> <span class="nv">a</span> <span class="o">=</span> <span class="nb">fun</span><span class="p">(</span><span class="s">&quot;a</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">mod</span><span class="p">)</span>
<span class="kd">let</span> <span class="nv">b</span> <span class="o">=</span> <span class="nb">fun</span><span class="p">(</span><span class="s">&quot;b</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">mod</span><span class="p">)</span>
<span class="nb">println</span><span class="p">(</span><span class="nf">a</span><span class="p">())</span>
<span class="nb">println</span><span class="p">(</span><span class="nf">b</span><span class="p">())</span>
</pre></div></div></div>
<div class="paragraph"><p>It is important to note that an <span class="monospaced">EvaluationEnvironment</span> instance has a <span class="monospaced">GoloClassloader</span>, and that
attempting to evaluate module code with the same <span class="monospaced">module</span> declaration will cause an error. Indeed, a
class loader cannot load classes with the same name twice.</p></div>
</div>
<div class="sect2">
<h3 id="_anonymous_modules">Anonymous modules</h3>
<div class="paragraph"><p>The <span class="monospaced">anonymousModule</span> method is similar to <span class="monospaced">asModule</span>, except that the code to evaluate is free of
<span class="monospaced">module</span> declaration:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">let</span> <span class="nv">env</span> <span class="o">=</span> <span class="nn">gololang.EvaluationEnvironment</span><span class="p">()</span>
<span class="kd">let</span> <span class="nv">code</span> <span class="o">=</span>
<span class="s">&quot;&quot;&quot;</span>
<span class="s">function a = -&gt; &quot;a!&quot;</span>
<span class="s">function b = -&gt; &quot;b!&quot;</span>
<span class="s">&quot;&quot;&quot;</span>
<span class="kd">let</span> <span class="nv">mod</span> <span class="o">=</span> <span class="n">env</span><span class="o">:</span> <span class="nf">anonymousModule</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
<span class="kd">let</span> <span class="nv">a</span> <span class="o">=</span> <span class="nb">fun</span><span class="p">(</span><span class="s">&quot;a</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">mod</span><span class="p">)</span>
<span class="kd">let</span> <span class="nv">b</span> <span class="o">=</span> <span class="nb">fun</span><span class="p">(</span><span class="s">&quot;b</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">mod</span><span class="p">)</span>
<span class="nb">println</span><span class="p">(</span><span class="nf">a</span><span class="p">())</span>
<span class="nb">println</span><span class="p">(</span><span class="nf">b</span><span class="p">())</span>
</pre></div></div></div>
<div class="paragraph"><p>The modules that get evaluated through <span class="monospaced">anonymousModule</span> have unique names, hence this method is
suitable in cases where the same code is to be re-evaluated several times.</p></div>
</div>
<div class="sect2">
<h3 id="_functions_2">Functions</h3>
<div class="paragraph"><p>The <span class="monospaced">asFunction</span> and <span class="monospaced">def</span> methods evaluate function code. Here is how <span class="monospaced">asFunction</span> can be used:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">let</span> <span class="nv">env</span> <span class="o">=</span> <span class="nn">gololang.EvaluationEnvironment</span><span class="p">()</span>
<span class="kd">let</span> <span class="nv">code</span> <span class="o">=</span> <span class="s">&quot;return (a + b) * 2</span><span class="s2">&quot;</span>
<span class="kd">let</span> <span class="nv">f</span> <span class="o">=</span> <span class="n">env</span><span class="o">:</span> <span class="nf">asFunction</span><span class="p">(</span><span class="n">code</span><span class="p">,</span> <span class="s">&quot;a</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s">&quot;b</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">println</span><span class="p">(</span><span class="nf">f</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">))</span>
</pre></div></div></div>
<div class="paragraph"><p>It evaluates straight code as the body of a function. Note that <span class="monospaced">imports</span> can be used to specify
<span class="monospaced">import</span> statements to be available while evaluation the code:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="n">env</span><span class="o">:</span>
  <span class="nf">imports</span><span class="p">(</span><span class="s">&quot;java.util.LinkedList</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s">&quot;java.util.HashMap</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">:</span>
  <span class="nf">asFunction</span><span class="p">(</span><span class="s">&quot;&quot;&quot;let l = LinkedList()</span>
<span class="s">let m = HashMap()&quot;&quot;&quot;</span><span class="p">)</span>
</pre></div></div></div>
<div class="paragraph"><p>The <span class="monospaced">def</span> method is similar, except that it has the parameters definition in the code to evaluate:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">let</span> <span class="nv">env</span> <span class="o">=</span> <span class="nn">gololang.EvaluationEnvironment</span><span class="p">()</span>
<span class="kd">let</span> <span class="nv">code</span> <span class="o">=</span> <span class="s">&quot;|a, b| -&gt; (a + b) * 2</span><span class="s2">&quot;</span>
<span class="kd">let</span> <span class="nv">f</span> <span class="o">=</span> <span class="n">env</span><span class="o">:</span> <span class="nf">def</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
<span class="nb">println</span><span class="p">(</span><span class="nf">f</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">))</span>
</pre></div></div></div>
</div>
<div class="sect2">
<h3 id="_running_code">Running code</h3>
<div class="paragraph"><p>The first form of <span class="monospaced">run</span> method works as follows:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">let</span> <span class="nv">env</span> <span class="o">=</span> <span class="nn">gololang.EvaluationEnvironment</span><span class="p">()</span>
<span class="kd">let</span> <span class="nv">code</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;println(&quot;&gt;&gt;&gt; run&quot;)</span>
<span class="s">foreach i in range(0, 3) {</span>
<span class="s">  println(&quot;w00t&quot;)</span>
<span class="s">}</span>
<span class="s">return 666&quot;&quot;&quot;</span>
<span class="nb">println</span><span class="p">(</span><span class="n">env</span><span class="o">:</span> <span class="nf">run</span><span class="p">(</span><span class="n">code</span><span class="p">))</span> <span class="c"># =&gt; &quot;w00t&quot;x3 and &quot;666&quot;</span>
</pre></div></div></div>
<div class="paragraph"><p>The second form allows passing parameter values in a map:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">let</span> <span class="nv">env</span> <span class="o">=</span> <span class="nn">gololang.EvaluationEnvironment</span><span class="p">()</span>
<span class="kd">let</span> <span class="nv">code</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;println(&quot;&gt;&gt;&gt; run_map&quot;)</span>
<span class="s">println(a)</span>
<span class="s">println(b)</span>
<span class="s">&quot;&quot;&quot;</span>
<span class="kd">let</span> <span class="nv">values</span> <span class="o">=</span> <span class="nn">java.util.TreeMap</span><span class="p">()</span><span class="o">:</span> <span class="nf">add</span><span class="p">(</span><span class="s">&quot;a</span><span class="s2">&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">:</span> <span class="nf">add</span><span class="p">(</span><span class="s">&quot;b</span><span class="s2">&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">env</span><span class="o">:</span> <span class="nf">run</span><span class="p">(</span><span class="n">code</span><span class="p">,</span> <span class="n">values</span><span class="p">)</span>
</pre></div></div></div>
<div class="paragraph"><p>It is important not to abuse <span class="monospaced">run</span>, as each invocation triggers the generation of a one-shot
class. If the same code is to be run several times, we suggest that you take advantage of either
<span class="monospaced">def</span> or <span class="monospaced">asFunction</span>.</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_concurrency_with_workers">Concurrency with workers</h2>
<div class="sectionbody">
<div class="paragraph"><p>Concurrency is <strong>hard</strong>. Fortunately for us the <span class="monospaced">java.util.concurrent</span> packages bring useful
abstractions, data types and execution mechanisms to get concurrency <strong>"a little bit better"</strong>.</p></div>
<div class="paragraph"><p>Golo doesn&#8217;t provide a equivalent to the <span class="monospaced">synchronized</span> keyword of Java. This is on-purpose: when
facing concurrency, we advise you to just use whatever is in <span class="monospaced">java.util.concurrent</span>.</p></div>
<div class="paragraph"><p>That being said we provide a simple abstraction for concurrent executions in the form of <strong>workers</strong>.
They pretty much resemble JavaScript web workers or <strong>isolates</strong> in Dart, albeit they do not really
isolate the workers data space.</p></div>
<div class="sect2">
<h3 id="_the_big_picture">The big picture</h3>
<div class="paragraph"><p>A <strong>worker</strong> is simply a Golo function that can be executed concurrently. You can pass <strong>messages</strong> to a
worker, and they are eventually received and handled by their target worker. In other words, workers
react to messages in an asynchronous fashion.</p></div>
<div class="paragraph"><p>Communications between a worker and some client code happens through <strong>ports</strong>. A <strong>port</strong> is simply an
object that is responsible for dispatching a message to its worker.</p></div>
<div class="paragraph"><p>Ports are obtained by <strong>spawning</strong> a worker function from a <strong>worker environment</strong>. Internally, a worker
environment manages a <span class="monospaced">java.util.concurrent</span> executor, which means that you do not have to deal with
thread management.</p></div>
</div>
<div class="sect2">
<h3 id="_worker_environments">Worker environments</h3>
<div class="paragraph"><p>Worker environments are defined in the <span class="monospaced">gololang.concurrent.workers.WorkerEnvironment</span> class /
module.</p></div>
<div class="paragraph"><p>You can directly pass an instance of <span class="monospaced">java.util.concurrent.ExecutorService</span> to its constructor, or
you may go through its builder object and call either of the following static methods:</p></div>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">withCachedThreadPool()</span> uses a cached thread pool,
</p>
</li>
<li>
<p>
<span class="monospaced">withFixedThreadPool(size)</span> uses a fixed number of threads in a pool,
</p>
</li>
<li>
<p>
<span class="monospaced">withFixedThreadPool()</span> uses a pool with 1 thread per processor core,
</p>
</li>
<li>
<p>
<span class="monospaced">withSingleThreadExecutor()</span> uses a single executor thread.
</p>
</li>
</ul></div>
<div class="paragraph"><p>In most scenarios <span class="monospaced">withCachedThreadPool()</span> is a safe choice, but as usual, your mileage varies. If
you have many concurrent tasks to perform and they are not IO-bound, then <span class="monospaced">withFixedThreadPool()</span> is
probably a better option. You should always measure, and remember that you can always pass a
fine-tuned executor to the <span class="monospaced">WorkerEnvironment()</span> constructor.</p></div>
<div class="paragraph"><p>Worker environments also provide delegate methods to their internal executor. It is important to
call <span class="monospaced">shutdown()</span> to close the workers environment and release the threads pool. You can also call
the <span class="monospaced">awaitTermination</span>, <span class="monospaced">isShutdown</span> and <span class="monospaced">isTerminated</span> methods whose semantics are exactly those of
<span class="monospaced">java.util.concurrent.ExecutorService</span>.</p></div>
</div>
<div class="sect2">
<h3 id="_spawning_a_worker_and_passing_messages">Spawning a worker and passing messages</h3>
<div class="paragraph"><p>Worker functions take a single parameter which is the message to be received. To obtain a port, you
need to call the <span class="monospaced">spawn(target)</span> function of a worker environment, as in:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">let</span> <span class="nv">env</span> <span class="o">=</span> <span class="nn">WorkerEnvironment.builder</span><span class="p">()</span><span class="o">:</span> <span class="nf">withFixedThreadPool</span><span class="p">()</span>
<span class="kd">let</span> <span class="nv">port</span> <span class="o">=</span> <span class="n">env</span><span class="o">:</span> <span class="nf">spawn</span><span class="p">(|</span><span class="n">message</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="nb">println</span><span class="p">(</span><span class="s">&quot;&gt;&gt;&gt; </span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">message</span><span class="p">))</span>
</pre></div></div></div>
<div class="paragraph"><p>A port provides a <span class="monospaced">send(message)</span> method:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="n">port</span><span class="o">:</span> <span class="nf">send</span><span class="p">(</span><span class="s">&quot;hello</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">:</span> <span class="nf">send</span><span class="p">(</span><span class="s">&quot;world</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div></div></div>
<div class="paragraph"><p>Messages are being put in a queue, and eventually dispatched to the function that we spawned.</p></div>
</div>
<div class="sect2">
<h3 id="_a_complete_and_useless_example">A complete and useless example</h3>
<div class="paragraph"><p>To better understand how workers can be used, here is a (fairly useless) example:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kn">module</span> <span class="nn">SampleWithWorkers</span>

<span class="kn">import</span> <span class="nn">java.lang.Thread</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent</span>
<span class="kn">import</span> <span class="nn">gololang.concurrent.workers.WorkerEnvironment</span>

<span class="k">local</span> <span class="kd">function</span> <span class="nf">pusher</span> <span class="o">=</span> <span class="p">|</span><span class="n">queue</span><span class="p">,</span> <span class="n">message</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="n">queue</span><span class="o">:</span> <span class="nf">offer</span><span class="p">(</span><span class="n">message</span><span class="p">)</span> <span class="c"># <img alt="3" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAAAAABzHgM7AAAAAmJLR0QAAKqNIzIAAAB4SURBVHja
JU6rFcNADBM09BqBhl6ltDCwKxQeDOwKB7tGYGCoYaChK6cmlt7TD1W5uap/sgoVBnEXWBTSoOdx
7gpLDOAVorWC0ABdcBPqwZtx8Muf+DPXJpQ96Nu/LSMYl/n17oCOnplTOrpiwW3sUs4ZJmob5/wA
Ubg1Y/zrjUwAAABDdEVYdFNvZnR3YXJlAEAoIylJbWFnZU1hZ2ljayA0LjIuOCA5OS8wOC8wMSBj
cmlzdHlAbXlzdGljLmVzLmR1cG9udC5jb22RuiG4AAAAKnRFWHRTaWduYXR1cmUAODBiYmRhMjcy
NmRkYWNlOGFiOGEwMWY1OWRlMmViZGII/Q51AAAADnRFWHRQYWdlADEyeDEyKzArMIRtu30AAAAA
SUVORK5CYII="></span>

<span class="k">local</span> <span class="kd">function</span> <span class="nf">generator</span> <span class="o">=</span> <span class="p">|</span><span class="n">port</span><span class="p">,</span> <span class="n">message</span><span class="p">|</span> <span class="p">{</span> <span class="c"># <img alt="1" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAAAAABzHgM7AAAAAmJLR0QAAKqNIzIAAABjSURBVHja
VY6xDcAwCAS/pPQaLim9QmajdOk2I2SNrMEIlARIoigU8Cek/4e7zdHaWOYOVwaoA6wOCw05Y7FB
gE0tIWQ+sBcwKM8qoD/wB5wGL8hjfdzWrh01GRp1hInGjDoXwHgsFuzBVLQAAABDdEVYdFNvZnR3
YXJlAEAoIylJbWFnZU1hZ2ljayA0LjIuOCA5OS8wOC8wMSBjcmlzdHlAbXlzdGljLmVzLmR1cG9u
dC5jb22RuiG4AAAAKnRFWHRTaWduYXR1cmUANThhMDcyZTA3MGRhMjJmNjEzNWNiZDNlNDE0NTQ2
ZjloaiHtAAAADnRFWHRQYWdlADEyeDEyKzArMIRtu30AAAAASUVORK5CYII="></span>
  <span class="k">foreach</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">port</span><span class="o">:</span> <span class="nf">send</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>                      <span class="c"># <img alt="2" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAAAAABzHgM7AAAAAmJLR0QAAKqNIzIAAAB7SURBVHja
HY6hFcMwDEQ/NDQsNSwU9Apdo7Cw0CsIBoZmhKzQEQJLDQsFVclHpHu693W429Zr7bu541Pg3kCm
Y0K75u9TEUPhuGgWU4mQDvieEaSQEnsT6zKPeZY0EUNtrHMCXvYUuSUg0PsMjUSvpysUT6OOSil9
izp/VNk1YJ8vf6MAAABDdEVYdFNvZnR3YXJlAEAoIylJbWFnZU1hZ2ljayA0LjIuOCA5OS8wOC8w
MSBjcmlzdHlAbXlzdGljLmVzLmR1cG9udC5jb22RuiG4AAAAKnRFWHRTaWduYXR1cmUAODBlYWU1
MjljOTRhN2Y0N2RlY2NmYWRhMjhhY2I5ZGblb7ENAAAADnRFWHRQYWdlADEyeDEyKzArMIRtu30A
AAAASUVORK5CYII="></span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nf">main</span> <span class="o">=</span> <span class="p">|</span><span class="n">args</span><span class="p">|</span> <span class="p">{</span>

  <span class="kd">let</span> <span class="nv">env</span> <span class="o">=</span> <span class="nn">WorkerEnvironment.builder</span><span class="p">()</span><span class="o">:</span> <span class="nf">withFixedThreadPool</span><span class="p">()</span>
  <span class="kd">let</span> <span class="nv">queue</span> <span class="o">=</span> <span class="nf">ConcurrentLinkedQueue</span><span class="p">()</span>

  <span class="kd">let</span> <span class="nv">pusherPort</span> <span class="o">=</span> <span class="n">env</span><span class="o">:</span> <span class="nf">spawn</span><span class="p">(</span><span class="o">^</span><span class="n">pusher</span><span class="o">:</span> <span class="nf">bindTo</span><span class="p">(</span><span class="n">queue</span><span class="p">))</span>
  <span class="kd">let</span> <span class="nv">generatorPort</span> <span class="o">=</span> <span class="n">env</span><span class="o">:</span> <span class="nf">spawn</span><span class="p">(</span><span class="o">^</span><span class="n">generator</span><span class="o">:</span> <span class="nf">bindTo</span><span class="p">(</span><span class="n">pusherPort</span><span class="p">))</span>

  <span class="kd">let</span> <span class="nv">finishPort</span> <span class="o">=</span> <span class="n">env</span><span class="o">:</span> <span class="nf">spawn</span><span class="p">(|</span><span class="n">any</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="n">env</span><span class="o">:</span> <span class="nf">shutdown</span><span class="p">())</span> <span class="c"># <img alt="5" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAAAAABzHgM7AAAAAmJLR0QAAKqNIzIAAAB2SURBVHja
FY6hEcQwDAQPChqGGhoaqgWX8PUYBhqGBn4rX0JooKDh/UlsZ3b2BJKXH8XPTYLh1lpt1h+BwxkR
A23jhsCQd2IkfH9T3HEkzPFegCXUKSUSpJUPsN7UFOgc9VkZUBoz9l0yrVHZarUcJZeb9XznDyNb
Ny9CX3/7AAAAQ3RFWHRTb2Z0d2FyZQBAKCMpSW1hZ2VNYWdpY2sgNC4yLjggOTkvMDgvMDEgY3Jp
c3R5QG15c3RpYy5lcy5kdXBvbnQuY29tkbohuAAAACp0RVh0U2lnbmF0dXJlAGZlNjkwNDYzMzc5
ZWIyNWU1NjJmY2M4Y2M5YjNjN2Uw37I5ngAAAA50RVh0UGFnZQAxMngxMiswKzCEbbt9AAAAAElF
TkSuQmCC"></span>

  <span class="k">foreach</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">generatorPort</span><span class="o">:</span> <span class="nf">send</span><span class="p">(</span><span class="s">&quot;[</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">i</span> <span class="o">+</span> <span class="s">&quot;]</span><span class="s2">&quot;</span><span class="p">)</span>
  <span class="p">}</span>
  <span class="nn">Thread.sleep</span><span class="p">(</span><span class="il">2000_L</span><span class="p">)</span>
  <span class="n">finishPort</span><span class="o">:</span> <span class="nf">send</span><span class="p">(</span><span class="s">&quot;Die!</span><span class="s2">&quot;</span><span class="p">)</span> <span class="c"># <img alt="4" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAAAAABzHgM7AAAAAmJLR0QAAKqNIzIAAABzSURBVHja
HY0hEoUwEEMjkZVYZGVlr1CJxCKRXKPyy28reyVsZeXKsCFi573ZzAQk+x5jaQ6gFQAxIA8XceEN
ZEN3DkOCH/TobUoSVuAYwSSLyzbvaHWVFJxUmmp+PF+twrLkuXzLwPmZ8+OjtH8KS6pGvuoGNo5b
6rzDAAAAQ3RFWHRTb2Z0d2FyZQBAKCMpSW1hZ2VNYWdpY2sgNC4yLjggOTkvMDgvMDEgY3Jpc3R5
QG15c3RpYy5lcy5kdXBvbnQuY29tkbohuAAAACp0RVh0U2lnbmF0dXJlADlmODJmY2FjOWUwMzlj
YmRiNzIzODBhNDU5MTMyNGY1gLv4dgAAAA50RVh0UGFnZQAxMngxMiswKzCEbbt9AAAAAElFTkSu
QmCC"></span>

  <span class="n">env</span><span class="o">:</span> <span class="nf">awaitTermination</span><span class="p">(</span><span class="mi">2000</span><span class="p">)</span>
  <span class="nb">println</span><span class="p">(</span><span class="n">queue</span><span class="o">:</span> <span class="nf">reduce</span><span class="p">(</span><span class="s">&quot;</span><span class="s2">&quot;</span><span class="p">,</span> <span class="p">|</span><span class="n">acc</span><span class="p">,</span> <span class="n">next</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="n">acc</span> <span class="o">+</span> <span class="s">&quot; </span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">next</span><span class="p">))</span>
<span class="p">}</span>
</pre></div></div></div>
<div class="paragraph"><p>In this example, we spawn 3 workers:</p></div>
<div class="colist arabic"><table>
<tr><td><img alt="1" src="data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAAAAABzHgM7AAAAAmJLR0QAAKqNIzIAAABjSURBVHja
VY6xDcAwCAS/pPQaLim9QmajdOk2I2SNrMEIlARIoigU8Cek/4e7zdHaWOYOVwaoA6wOCw05Y7FB
gE0tIWQ+sBcwKM8qoD/wB5wGL8hjfdzWrh01GRp1hInGjDoXwHgsFuzBVLQAAABDdEVYdFNvZnR3
YXJlAEAoIylJbWFnZU1hZ2ljayA0LjIuOCA5OS8wOC8wMSBjcmlzdHlAbXlzdGljLmVzLmR1cG9u
dC5jb22RuiG4AAAAKnRFWHRTaWduYXR1cmUANThhMDcyZTA3MGRhMjJmNjEzNWNiZDNlNDE0NTQ2
ZjloaiHtAAAADnRFWHRQYWdlADEyeDEyKzArMIRtu30AAAAASUVORK5CYII="></td><td>
the first repeats a message 100 times,
</td></tr>
<tr><td><img alt="2" src="data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAAAAABzHgM7AAAAAmJLR0QAAKqNIzIAAAB7SURBVHja
HY6hFcMwDEQ/NDQsNSwU9Apdo7Cw0CsIBoZmhKzQEQJLDQsFVclHpHu693W429Zr7bu541Pg3kCm
Y0K75u9TEUPhuGgWU4mQDvieEaSQEnsT6zKPeZY0EUNtrHMCXvYUuSUg0PsMjUSvpysUT6OOSil9
izp/VNk1YJ8vf6MAAABDdEVYdFNvZnR3YXJlAEAoIylJbWFnZU1hZ2ljayA0LjIuOCA5OS8wOC8w
MSBjcmlzdHlAbXlzdGljLmVzLmR1cG9udC5jb22RuiG4AAAAKnRFWHRTaWduYXR1cmUAODBlYWU1
MjljOTRhN2Y0N2RlY2NmYWRhMjhhY2I5ZGblb7ENAAAADnRFWHRQYWdlADEyeDEyKzArMIRtu30A
AAAASUVORK5CYII="></td><td>
&#8230;forwarding them to another one,
</td></tr>
<tr><td><img alt="3" src="data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAAAAABzHgM7AAAAAmJLR0QAAKqNIzIAAAB4SURBVHja
JU6rFcNADBM09BqBhl6ltDCwKxQeDOwKB7tGYGCoYaChK6cmlt7TD1W5uap/sgoVBnEXWBTSoOdx
7gpLDOAVorWC0ABdcBPqwZtx8Muf+DPXJpQ96Nu/LSMYl/n17oCOnplTOrpiwW3sUs4ZJmob5/wA
Ubg1Y/zrjUwAAABDdEVYdFNvZnR3YXJlAEAoIylJbWFnZU1hZ2ljayA0LjIuOCA5OS8wOC8wMSBj
cmlzdHlAbXlzdGljLmVzLmR1cG9udC5jb22RuiG4AAAAKnRFWHRTaWduYXR1cmUAODBiYmRhMjcy
NmRkYWNlOGFiOGEwMWY1OWRlMmViZGII/Q51AAAADnRFWHRQYWdlADEyeDEyKzArMIRtu30AAAAA
SUVORK5CYII="></td><td>
&#8230;that ultimately pushes them to a concurrent queue.
</td></tr>
<tr><td><img alt="4" src="data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAAAAABzHgM7AAAAAmJLR0QAAKqNIzIAAABzSURBVHja
HY0hEoUwEEMjkZVYZGVlr1CJxCKRXKPyy28reyVsZeXKsCFi573ZzAQk+x5jaQ6gFQAxIA8XceEN
ZEN3DkOCH/TobUoSVuAYwSSLyzbvaHWVFJxUmmp+PF+twrLkuXzLwPmZ8+OjtH8KS6pGvuoGNo5b
6rzDAAAAQ3RFWHRTb2Z0d2FyZQBAKCMpSW1hZ2VNYWdpY2sgNC4yLjggOTkvMDgvMDEgY3Jpc3R5
QG15c3RpYy5lcy5kdXBvbnQuY29tkbohuAAAACp0RVh0U2lnbmF0dXJlADlmODJmY2FjOWUwMzlj
YmRiNzIzODBhNDU5MTMyNGY1gLv4dgAAAA50RVh0UGFnZQAxMngxMiswKzCEbbt9AAAAAElFTkSu
QmCC"></td><td>
A message is sent to a final worker,
</td></tr>
<tr><td><img alt="5" src="data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAAAAABzHgM7AAAAAmJLR0QAAKqNIzIAAAB2SURBVHja
FY6hEcQwDAQPChqGGhoaqgWX8PUYBhqGBn4rX0JooKDh/UlsZ3b2BJKXH8XPTYLh1lpt1h+BwxkR
A23jhsCQd2IkfH9T3HEkzPFegCXUKSUSpJUPsN7UFOgc9VkZUBoz9l0yrVHZarUcJZeb9XznDyNb
Ny9CX3/7AAAAQ3RFWHRTb2Z0d2FyZQBAKCMpSW1hZ2VNYWdpY2sgNC4yLjggOTkvMDgvMDEgY3Jp
c3R5QG15c3RpYy5lcy5kdXBvbnQuY29tkbohuAAAACp0RVh0U2lnbmF0dXJlAGZlNjkwNDYzMzc5
ZWIyNWU1NjJmY2M4Y2M5YjNjN2Uw37I5ngAAAA50RVh0UGFnZQAxMngxMiswKzCEbbt9AAAAAElF
TkSuQmCC"></td><td>
&#8230;that shuts the workers environment down.
</td></tr>
</table></div>
<div class="paragraph"><p>As an aside, the example illustrates that worker functions may take further dependencies as
arguments. The <span class="monospaced">pusher</span> function takes a queue target and <span class="monospaced">generator</span> needs a port.</p></div>
<div class="paragraph"><p>You can satisfy dependencies by pre-binding function arguments, all you need is to make sure that
each function passed to <span class="monospaced">spawn</span> only expects a single message as its argument, as in:</p></div>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">^pusher: bindTo(queue)</span>, and
</p>
</li>
<li>
<p>
<span class="monospaced">^generator: bindTo(pusherPort)</span>, and
</p>
</li>
<li>
<p>
<span class="monospaced">env: spawn(|any| -&gt; env: shutdown())</span> where the worker function is defined as a closure, and
  implicitly captures its <span class="monospaced">env</span> dependency from the surrounding context.
</p>
</li>
</ul></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_golo_template_engine">Golo template engine</h2>
<div class="sectionbody">
<div class="paragraph"><p>Golo comes with a built-in template engine that is reminiscent of Java Server Pages or Ruby ERB. It
compiles template text into Golo functions.</p></div>
<div class="sect2">
<h3 id="_example">Example</h3>
<div class="paragraph"><p>Consider the following example.</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">let</span> <span class="nv">template</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">&lt;%@params posts %&gt;</span>
<span class="s">&lt;!DOCTYPE html&gt;</span>
<span class="s">&lt;html&gt;</span>
<span class="s">  &lt;head&gt;</span>
<span class="s">    &lt;title&gt;Golo Chat&lt;/title&gt;</span>
<span class="s">  &lt;/head&gt;</span>
<span class="s">  &lt;body&gt;</span>
<span class="s">  &lt;form action=&quot;/&quot; method=&quot;post&quot;&gt;</span>
<span class="s">    &lt;input type=&quot;text&quot; name=&quot;msg&quot;&gt;</span>
<span class="s">    &lt;input type=&quot;submit&quot; value=&quot;Send&quot;&gt;</span>
<span class="s">  &lt;/form&gt;</span>
<span class="s">  &lt;div&gt;</span>
<span class="s">    &lt;h3&gt;Last posts&lt;/h3&gt;</span>
<span class="s">    &lt;% foreach post in posts { %&gt;</span>
<span class="s">      &lt;div&gt;</span>
<span class="s">        &lt;%= post %&gt;</span>
<span class="s">      &lt;/div&gt;</span>
<span class="s">    &lt;% } %&gt;</span>
<span class="s">  &lt;/div&gt;</span>
<span class="s">  &lt;/body&gt;</span>
<span class="s">&lt;/html&gt;</span>
<span class="s">&quot;&quot;&quot;</span>
</pre></div></div></div>
<div class="paragraph"><p>This multi-line string has a Golo template. It can be compiled into a function as follows:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">let</span> <span class="nv">tpl</span> <span class="o">=</span> <span class="nn">gololang.TemplateEngine</span><span class="p">()</span><span class="o">:</span> <span class="nf">compile</span><span class="p">(</span><span class="n">template</span><span class="p">)</span>
<span class="nb">println</span><span class="p">(</span><span class="nf">tpl</span><span class="p">(</span><span class="n">someDataModel</span><span class="o">:</span> <span class="nf">posts</span><span class="p">()))</span>
</pre></div></div></div>
</div>
<div class="sect2">
<h3 id="_directives">Directives</h3>
<div class="paragraph"><p>As you may have guess from the previous example:</p></div>
<div class="ulist"><ul>
<li>
<p>
Golo code snippets are placed in <span class="monospaced">&lt;% %&gt;</span> blocks, and
</p>
</li>
<li>
<p>
expressions can output values using <span class="monospaced">&lt;%= %&gt;</span>, and
</p>
</li>
<li>
<p>
<span class="monospaced">&lt;%@import foo.bar.Baz %&gt;</span> causes <span class="monospaced">foo.bar.Baz</span> to be imported, and
</p>
</li>
<li>
<p>
<span class="monospaced">&lt;%@params foo, bar, baz %&gt;</span> causes the template function to have 3 parameters, i.e., it is a
  <span class="monospaced">|foo, bar, baz| { ... }</span> function.
</p>
</li>
</ul></div>
<div class="paragraph"><p>When no <span class="monospaced">&lt;%@params ... %&gt;</span> exists, the function is assumed to have a single <span class="monospaced">params</span> parameter.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==">
</td>
<td class="content">The template engine is a simple one and makes <strong>no</strong> verification either on the templates
or the resulting Golo source code. The <span class="monospaced">compile</span> method may throw a <span class="monospaced">GoloCompilation</span> exception
though, and you can query the exception <span class="monospaced">getSourceCode()</span> and <span class="monospaced">getProblems()</span> methods to obtain
more details.</td>
</tr></table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_documenting_golo_code">Documenting Golo code</h2>
<div class="sectionbody">
<div class="paragraph"><p>Of course you can document your code using comments (<span class="monospaced">#</span>), but who reads source code?</p></div>
<div class="sect2">
<h3 id="_documentation_blocks">Documentation blocks</h3>
<div class="paragraph"><p>Golo provides a support for documentation blocks on modules, functions, augmentations and structs.
Blocks are delimited by <span class="monospaced">----</span> and contain free-form
<a href="http://daringfireball.net/projects/markdown/syntax">Markdown text</a>.</p></div>
<div class="paragraph"><p>Here is a quick example:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="sd">----</span>
<span class="sd">This is a *nice* module that does a bunch of useless things.</span>

<span class="sd">See more at [our website](http://www.typeunsafe.org).</span>
<span class="sd">----</span>
<span class="kn">module</span> <span class="nn">Hello</span>

<span class="sd">----</span>
<span class="sd">Adds 2 elements, which is quite surprising given the name.</span>

<span class="sd">* `x` is the first argument,</span>
<span class="sd">* `y` is the second argument.</span>

<span class="sd">The following snipped prints `3`:</span>

<span class="sd">    let result = adder(1, 2)</span>
<span class="sd">    println(result)</span>

<span class="sd">Impressive!</span>
<span class="sd">----</span>
<span class="kd">function</span> <span class="nf">adder</span> <span class="o">=</span> <span class="p">|</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span>
</pre></div></div></div>
</div>
<div class="sect2">
<h3 id="_rendering_documentation">Rendering documentation</h3>
<div class="paragraph"><p>The <span class="monospaced">golo doc</span> command can render documentation in <span class="monospaced">html</span> (the default) or <span class="monospaced">markdown</span> format:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="gp">$</span> golo doc --output target/documentation src/**/*.golo
</pre></div></div></div>
<div class="paragraph"><p>In addition, <span class="monospaced">golo doc</span> can also produce ctags <span class="monospaced">tags</span> file, to be used by
editors such as Vim or emacs. In this mode, the special output target <span class="monospaced">-</span> can
be used to print the tags on standard output, which is needed by some editors
or extensions.</p></div>
<div class="paragraph"><p>Please consult <span class="monospaced">golo help</span> for more details.</p></div>
</div>
<div class="sect2">
<h3 id="_alignment">Alignment</h3>
<div class="paragraph"><p>It is sometimes necessary to indent documentation blocks to match the surrounding code format.
Documentation blocks erase indentation based on the indentation level of the opening block:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="sd">----</span>
<span class="sd">The most useful augmentation *ever*.</span>
<span class="sd">----</span>
<span class="k">augment</span> <span class="nn">java.lang.String</span> <span class="p">{</span>

  <span class="sd">----</span>
<span class="sd">  Creates a URL from a string, as in: `let url = &quot;http://foo.bar/plop&quot;: toURL()`.</span>
<span class="sd">  ----</span>
  <span class="kd">function</span> <span class="nf">toURL</span> <span class="o">=</span> <span class="p">|</span><span class="n">this</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="nn">java.net.URL</span><span class="p">(</span><span class="n">this</span><span class="p">)</span>
<span class="p">}</span>
</pre></div></div></div>
<div class="paragraph"><p>When generating documentation from the code above, the documentation block of the <span class="monospaced">toURL</span> function
is unindented of 2 spaces.</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_misc_modules">Misc. modules</h2>
<div class="sectionbody">
<div class="paragraph"><p>Not everything fits into the main documentation. We encourage you to also look at the <em>javadocs</em>
and <em>golodocs</em>.</p></div>
<div class="paragraph"><p>The next subsections provide summaries of misc. modules found as part of Golo.</p></div>
<div class="sect2">
<h3 id="_standard_augmentations_span_class_monospaced_gololang_standardaugmentations_span">Standard augmentations (<span class="monospaced">gololang.StandardAugmentations</span>)</h3>
<div class="paragraph"><p>This Golo module provides standard augmentations for various classes of the Java standard classes
and Golo types. It does not have to be imported explicitely.</p></div>
<div class="paragraph"><p>Here are a few examples.</p></div>
<div class="paragraph"><p>Java collections can be have functional methods:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="nb">println</span><span class="p">(</span><span class="nb">list</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span><span class="o">:</span> <span class="nf">filter</span><span class="p">(|</span><span class="n">n</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="p">(</span><span class="n">n</span> <span class="o">%</span> <span class="mi">2</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">))</span>
<span class="nb">println</span><span class="p">(</span><span class="nb">list</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span><span class="o">:</span> <span class="nf">map</span><span class="p">(|</span><span class="n">n</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="n">n</span> <span class="o">*</span> <span class="mi">10</span><span class="p">))</span>
</pre></div></div></div>
<div class="paragraph"><p>Insert a map entry only if the key is not present, and get a default value if an entry is missing:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="n">map</span><span class="o">:</span> <span class="nf">putIfAbsent</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="o">-&gt;</span> <span class="nf">expensiveOperation</span><span class="p">())</span>
<span class="n">map</span><span class="o">:</span> <span class="nf">getOrElse</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="s">&quot;n/a</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div></div></div>
<div class="paragraph"><p>Repeat an operation many times:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="mi">3</span><span class="o">:</span> <span class="nf">times</span><span class="p">(</span><span class="o">-&gt;</span> <span class="nb">println</span><span class="p">(</span><span class="s">&quot;Hey!</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="mi">3</span><span class="o">:</span> <span class="nf">times</span><span class="p">(|</span><span class="n">i</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="nb">println</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
</pre></div></div></div>
<div class="paragraph"><p>Function references are method handles, and there are augmentations for them:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="c"># Composition</span>
<span class="kd">let</span> <span class="nv">f</span> <span class="o">=</span> <span class="p">|</span><span class="n">x</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">1</span>
<span class="kd">let</span> <span class="nv">g</span> <span class="o">=</span> <span class="p">|</span><span class="n">y</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="n">y</span> <span class="o">*</span> <span class="mi">10</span>
<span class="kd">let</span> <span class="nv">h</span> <span class="o">=</span> <span class="n">f</span><span class="o">:</span> <span class="nf">andThen</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>

<span class="c"># Partial application</span>
<span class="kd">let</span> <span class="nv">adder</span> <span class="o">=</span> <span class="p">|</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span>
<span class="kd">let</span> <span class="nv">add2</span> <span class="o">=</span> <span class="n">adder</span><span class="o">:</span> <span class="nf">bindAt</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>    <span class="c"># binds &#39;y&#39;</span>
<span class="nb">println</span><span class="p">(</span><span class="nf">add2</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
</pre></div></div></div>
</div>
<div class="sect2">
<h3 id="_json_support_span_class_monospaced_gololang_json_span">JSON support (<span class="monospaced">gololang.JSON</span>)</h3>
<div class="paragraph"><p>Golo includes the <a href="https://code.google.com/p/json-simple/">JSON Simple</a> library to provide JSON
support.</p></div>
<div class="paragraph"><p>While <span class="monospaced">json-simple</span> only supports encoding from lists and maps, this API brings support for sets,
arrays, Golo tuples, dynamic objects and structs.</p></div>
<div class="paragraph"><p>Given a simple data structure, we can obtain a JSON representation:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">let</span> <span class="nv">data</span> <span class="o">=</span> <span class="nb">map</span><span class="p">[</span>
  <span class="p">[</span><span class="s">&quot;name</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s">&quot;Somebody</span><span class="s2">&quot;</span><span class="p">],</span>
  <span class="p">[</span><span class="s">&quot;age</span><span class="s2">&quot;</span><span class="p">,</span> <span class="mi">69</span><span class="p">],</span>
  <span class="p">[</span><span class="s">&quot;friends</span><span class="s2">&quot;</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span>
    <span class="s">&quot;Mr Bean</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s">&quot;John B</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s">&quot;Larry</span><span class="s2">&quot;</span>
  <span class="p">]]</span>
<span class="p">]</span>
<span class="kd">let</span> <span class="nv">asText</span> <span class="o">=</span> <span class="nn">JSON.stringify</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</pre></div></div></div>
<div class="paragraph"><p>Given some JSON as text, we can get back a data structure:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">let</span> <span class="nv">data</span> <span class="o">=</span> <span class="nn">JSON.parse</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
<span class="nb">println</span><span class="p">(</span><span class="n">data</span><span class="o">:</span> <span class="nf">get</span><span class="p">(</span><span class="s">&quot;name</span><span class="s2">&quot;</span><span class="p">))</span>
</pre></div></div></div>
<div class="paragraph"><p>The <span class="monospaced">gololang.JSON</span> module also provides helpers for JSON serialization and deserialization
with both dynamic objects and structs.</p></div>
</div>
<div class="sect2">
<h3 id="_scala_like_dynamic_variable_span_class_monospaced_gololang_dynamicvariable_span">Scala-like dynamic variable (<span class="monospaced">gololang.DynamicVariable</span>)</h3>
<div class="paragraph"><p>Golo has a <span class="monospaced">DynamicVariable</span> type that mimics the eponymous class from the Scala standard library.</p></div>
<div class="paragraph"><p>A dynamic variable has inheritable thread-local semantics: updates to its value are confined to the
current thread and its future child threads.</p></div>
<div class="paragraph"><p>Given the following code:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">let</span> <span class="nv">dyn</span> <span class="o">=</span> <span class="nf">DynamicVariable</span><span class="p">(</span><span class="s">&quot;Foo</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">println</span><span class="p">(</span><span class="n">dyn</span><span class="o">:</span> <span class="nf">value</span><span class="p">())</span>

<span class="kd">let</span> <span class="nv">t1</span> <span class="o">=</span> <span class="nf">Thread</span><span class="p">({</span>
  <span class="n">dyn</span><span class="o">:</span> <span class="nf">withValue</span><span class="p">(</span><span class="mi">666</span><span class="p">,</span> <span class="p">{</span>
    <span class="nb">println</span><span class="p">(</span><span class="n">dyn</span><span class="o">:</span> <span class="nf">value</span><span class="p">())</span>
  <span class="p">})</span>
<span class="p">})</span>

<span class="kd">let</span> <span class="nv">t2</span> <span class="o">=</span> <span class="nf">Thread</span><span class="p">({</span>
  <span class="n">dyn</span><span class="o">:</span> <span class="nf">withValue</span><span class="p">(</span><span class="mi">69</span><span class="p">,</span> <span class="p">{</span>
    <span class="nb">println</span><span class="p">(</span><span class="n">dyn</span><span class="o">:</span> <span class="nf">value</span><span class="p">())</span>
  <span class="p">})</span>
<span class="p">})</span>

<span class="n">t1</span><span class="o">:</span> <span class="nf">start</span><span class="p">()</span>
<span class="n">t2</span><span class="o">:</span> <span class="nf">start</span><span class="p">()</span>
<span class="n">t1</span><span class="o">:</span> <span class="nf">join</span><span class="p">()</span>
<span class="n">t2</span><span class="o">:</span> <span class="nf">join</span><span class="p">()</span>
<span class="nb">println</span><span class="p">(</span><span class="n">dyn</span><span class="o">:</span> <span class="nf">value</span><span class="p">())</span>
</pre></div></div></div>
<div class="paragraph"><p>one gets an output similar to:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>Foo
69
666
Foo</pre>
</div></div>
<div class="paragraph"><p>with the <span class="monospaced">69</span> and <span class="monospaced">666</span> swapping order over runs.</p></div>
</div>
<div class="sect2">
<h3 id="_observable_references_span_class_monospaced_gololang_observable_span">Observable references (<span class="monospaced">gololang.Observable</span>)</h3>
<div class="paragraph"><p>An observable value notifies observers of updates in a thread-safe manner. An observable can also be
constructed from another observable using the <span class="monospaced">map</span> and <span class="monospaced">filter</span> combinators:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">let</span> <span class="nv">foo</span> <span class="o">=</span> <span class="nf">Observable</span><span class="p">(</span><span class="s">&quot;Foo</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="n">foo</span><span class="o">:</span> <span class="nf">onChange</span><span class="p">(|</span><span class="n">v</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="nb">println</span><span class="p">(</span><span class="s">&quot;foo = </span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">v</span><span class="p">))</span>

<span class="kd">let</span> <span class="nv">mapped</span> <span class="o">=</span> <span class="n">foo</span><span class="o">:</span> <span class="nf">map</span><span class="p">(|</span><span class="n">v</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="n">v</span> <span class="o">+</span> <span class="s">&quot;!</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="n">mapped</span><span class="o">:</span> <span class="nf">onChange</span><span class="p">(|</span><span class="n">v</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="nb">println</span><span class="p">(</span><span class="s">&quot;mapped = </span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">v</span><span class="p">))</span>

<span class="n">foo</span><span class="o">:</span> <span class="nf">set</span><span class="p">(</span><span class="s">&quot;69</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div></div></div>
<div class="paragraph"><p>This yields the following output:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>foo = 69
mapped = 69!</pre>
</div></div>
</div>
<div class="sect2">
<h3 id="_asynchronous_programming_helpers_span_class_monospaced_gololang_async_span">Asynchronous programming helpers (<span class="monospaced">gololang.Async</span>)</h3>
<div class="paragraph"><p>This module offers asynchronous programming helpers, especially execution context agnostic promises
and futures. The provided APIs are orthogonal to the execution strategy: it is up to you to execute
code from the same thread, from a separate thread, or by pushing new tasks to a service executor.</p></div>
<div class="paragraph"><p>Here is an example:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kn">module</span> <span class="nn">samples.Concurrency</span>

<span class="kn">import</span> <span class="nn">java.util.concurrent</span>
<span class="kn">import</span> <span class="nn">gololang.Async</span>

<span class="k">local</span> <span class="kd">function</span> <span class="nf">fib</span> <span class="o">=</span> <span class="p">|</span><span class="n">n</span><span class="p">|</span> <span class="p">{</span>
  <span class="k">if</span> <span class="n">n</span> <span class="o">&lt;=</span> <span class="mi">1</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">n</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nf">fib</span><span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="nf">fib</span><span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="mi">2</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nf">main</span> <span class="o">=</span> <span class="p">|</span><span class="n">args</span><span class="p">|</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nv">executor</span> <span class="o">=</span> <span class="nn">Executors.newFixedThreadPool</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
  <span class="kd">let</span> <span class="nv">results</span> <span class="o">=</span> <span class="p">[</span><span class="mi">30</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">35</span><span class="p">,</span> <span class="mi">38</span><span class="p">,</span> <span class="mi">39</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">41</span><span class="p">,</span> <span class="mi">42</span><span class="p">]</span><span class="o">:</span>
    <span class="nf">map</span><span class="p">(|</span><span class="n">n</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="n">executor</span><span class="o">:</span> <span class="nf">enqueue</span><span class="p">(</span><span class="o">-&gt;</span> <span class="nf">fib</span><span class="p">(</span><span class="n">n</span><span class="p">))</span><span class="o">:</span>
      <span class="nf">map</span><span class="p">(|</span><span class="n">res</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="n">n</span><span class="p">,</span> <span class="n">res</span><span class="p">]))</span>
  <span class="nf">reduce</span><span class="p">(</span><span class="n">results</span><span class="p">,</span> <span class="s">&quot;</span><span class="s2">&quot;</span><span class="p">,</span> <span class="p">|</span><span class="n">acc</span><span class="p">,</span> <span class="n">next</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="n">acc</span> <span class="o">+</span> <span class="n">next</span><span class="o">:</span> <span class="nf">get</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot; -&gt; </span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">next</span><span class="o">:</span> <span class="nf">get</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">:</span>
    <span class="nf">onSet</span><span class="p">(|</span><span class="n">s</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="nb">println</span><span class="p">(</span><span class="s">&quot;Results:</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">s</span><span class="p">))</span><span class="o">:</span>
    <span class="nf">onFail</span><span class="p">(|</span><span class="n">e</span><span class="p">|</span> <span class="o">-&gt;</span> <span class="n">e</span><span class="o">:</span> <span class="nf">printStackTrace</span><span class="p">())</span>
  <span class="n">executor</span><span class="o">:</span> <span class="nf">shutdown</span><span class="p">()</span>
  <span class="n">executor</span><span class="o">:</span> <span class="nf">awaitTermination</span><span class="p">(</span><span class="il">120_L</span><span class="p">,</span> <span class="nn">TimeUnit.SECONDS</span><span class="p">())</span>
<span class="p">}</span>
</pre></div></div></div>
<div class="paragraph"><p>This example takes advantages of an executor augmentation and composable promises and futures to
compute Fibonacci numbers.</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_common_pitfalls">Common pitfalls</h2>
<div class="sectionbody">
<div class="paragraph"><p>Discovering a new programming language is fun. Yet, we all make mistakes in the beginning, as we
idiomatically repeat habits from other languages.</p></div>
<div class="paragraph"><p>Because Golo works closely with the Java programming language, it is likely that Java programmers
will make some of the following mistakes early on.</p></div>
<div class="sect2">
<h3 id="_span_class_monospaced_new_span"><span class="monospaced">new</span></h3>
<div class="paragraph"><p>Golo does not have a <span class="monospaced">new</span> operator for allocating objects. Instead, one should just call a
constructor as a function:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="c"># Good</span>
<span class="kd">let</span> <span class="nv">foo</span> <span class="o">=</span> <span class="nn">java.util.LinkedList</span><span class="p">()</span>

<span class="c"># Compilation fails</span>
<span class="kd">let</span> <span class="nv">foo</span> <span class="o">=</span> <span class="n">new</span> <span class="nn">java.util.LinkedList</span><span class="p">()</span>
</pre></div></div></div>
</div>
<div class="sect2">
<h3 id="_imports">Imports</h3>
<div class="paragraph"><p>Golo does not have <strong>star</strong> imports like in Java. Imports are only used at runtime as Golo tries to
resolve names of types, functions, and so on.</p></div>
<div class="paragraph"><p>You must think of <span class="monospaced">import</span> statements as a notational shortcut, nothing else. Golo tries to resolve
a name as-is, then tries to complete with every import until a match is found.</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">java.util</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.AtomicInteger</span>

<span class="c"># (...)</span>

<span class="c"># Direct resolution at runtime</span>
<span class="kd">let</span> <span class="nv">foo</span> <span class="o">=</span> <span class="nn">java.util.LinkedList</span><span class="p">()</span>

<span class="c"># Resolution with the 1st import</span>
<span class="kd">let</span> <span class="nv">foo</span> <span class="o">=</span> <span class="nf">LinkedList</span><span class="p">()</span>

<span class="c"># Resolution with the 2nd import</span>
<span class="kd">let</span> <span class="nv">foo</span> <span class="o">=</span> <span class="nf">AtomicInteger</span><span class="p">(</span><span class="mi">666</span><span class="p">)</span>
</pre></div></div></div>
</div>
<div class="sect2">
<h3 id="_method_invocations">Method invocations</h3>
<div class="paragraph"><p>Keep in mind that instance methods are invoked using the <span class="monospaced">:</span> operator, not with dots (<span class="monospaced">.</span>) like in
many languages.</p></div>
<div class="paragraph"><p>This is a common mistake!</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="c"># Calls toString() on foo</span>
<span class="n">foo</span><span class="o">:</span> <span class="nf">toString</span><span class="p">()</span>

<span class="c"># Looks for a function toString() in module foo</span>
<span class="nn">foo.toString</span><span class="p">()</span>
</pre></div></div></div>
</div>
<div class="sect2">
<h3 id="_span_class_monospaced_match_span_is_not_a_closure"><span class="monospaced">match</span> is not a closure</h3>
<div class="paragraph"><p>One thing to keep in mind is that <span class="monospaced">match</span> returns a value, and that it is not a closure unless you
want it to.</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="kd">let</span> <span class="nv">foo</span> <span class="o">=</span> <span class="k">match</span> <span class="p">{</span>
  <span class="k">case</span> <span class="n">plop</span> <span class="k">then</span> <span class="mi">1</span>
  <span class="k">case</span> <span class="n">ploped</span> <span class="k">then</span> <span class="mi">2</span>
  <span class="k">otherwise</span> <span class="o">-</span><span class="mi">1</span>
<span class="p">}</span>

<span class="c"># Ok</span>
<span class="nb">println</span><span class="p">(</span><span class="n">foo</span><span class="p">)</span>

<span class="c"># Bad! foo is an integer!</span>
<span class="nb">println</span><span class="p">(</span><span class="nf">foo</span><span class="p">(</span><span class="s">&quot;abc</span><span class="s2">&quot;</span><span class="p">))</span>
</pre></div></div></div>
</div>
</div>
</div>
</div>
<div id="footnotes"><hr></div>
<div id="footer">
<div id="footer-text">
Last updated 2014-11-01 16:19:11 CET
</div>
</div>
</body>
</html>
